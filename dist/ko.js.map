{"version":3,"file":"ko.js","sources":["../packages/tko.utils/src/array.js","../packages/tko.utils/src/options.js","../packages/tko.utils/src/error.js","../packages/tko.utils/src/async.js","../packages/tko.utils/src/ie.js","../packages/tko.utils/src/object.js","../packages/tko.utils/src/proto.js","../packages/tko.utils/src/string.js","../packages/tko.utils/src/symbol.js","../packages/tko.utils/src/css.js","../packages/tko.utils/src/jquery.js","../packages/tko.utils/src/dom/info.js","../packages/tko.utils/src/dom/data.js","../packages/tko.utils/src/dom/disposal.js","../packages/tko.utils/src/dom/event.js","../packages/tko.utils/src/dom/fixes.js","../packages/tko.utils/src/dom/virtualElements.js","../packages/tko.utils/src/dom/manipulation.js","../packages/tko.utils/src/dom/html.js","../packages/tko.utils/src/memoization.js","../packages/tko.utils/src/tasks.js","../packages/tko.utils/index.js","../packages/tko.observable/src/defer.js","../packages/tko.observable/src/extenders.js","../packages/tko.observable/src/subscribable.js","../packages/tko.observable/src/dependencyDetection.js","../packages/tko.observable/src/observable.js","../packages/tko.observable/src/observableArray.changeTracking.js","../packages/tko.observable/src/observableArray.js","../packages/tko.observable/src/mappingHelpers.js","../packages/tko.observable/index.js","../packages/tko.computed/src/computed.js","../packages/tko.computed/src/throttleExtender.js","../packages/tko.computed/index.js","../packages/tko.provider/src/preparse.js","../packages/tko.provider/src/node.js","../packages/tko.provider/src/expression.js","../packages/tko.provider/src/arguments.js","../packages/tko.provider/src/identifier.js","../packages/tko.provider/src/ternary.js","../packages/tko.provider/src/parser.js","../packages/tko.provider/src/provider.js","../packages/tko.bind/src/bindingContext.js","../packages/tko.lifecycle/src/LifeCycle.js","../packages/tko.bind/src/BindingHandler.js","../packages/tko.bind/src/applyBindings.js","../packages/tko.bind/src/arrayToDomNodeChildren.js","../packages/tko.binding.core/src/attr.js","../packages/tko.binding.core/src/checked.js","../packages/tko.binding.core/src/event.js","../packages/tko.binding.core/src/click.js","../packages/tko.binding.core/src/css.js","../packages/tko.binding.core/src/enableDisable.js","../packages/tko.binding.core/src/hasfocus.js","../packages/tko.binding.core/src/html.js","../packages/tko.binding.core/src/let.js","../packages/tko.binding.core/src/selectExtensions.js","../packages/tko.binding.core/src/options.js","../packages/tko.binding.core/src/selectedOptions.js","../packages/tko.binding.core/src/style.js","../packages/tko.binding.core/src/submit.js","../packages/tko.binding.core/src/text.js","../packages/tko.binding.core/src/textInput.js","../packages/tko.binding.core/src/uniqueName.js","../packages/tko.binding.core/src/value.js","../packages/tko.binding.core/src/visible.js","../packages/tko.binding.core/src/using.js","../packages/tko.binding.core/index.js","../packages/tko.binding.template/src/templateSources.js","../packages/tko.binding.template/src/templateEngine.js","../packages/tko.binding.template/src/templating.js","../packages/tko.binding.template/src/nativeTemplateEngine.js","../packages/tko.binding.template/src/foreach.js","../packages/tko.binding.template/index.js","../packages/tko.binding.if/src/ifIfnotWith.js","../packages/tko.binding.if/index.js","../packages/tko.binding.foreach/src/foreach.js","../packages/tko.binding.foreach/index.js","../packages/tko.preprocessor.textInterpolation/src/interpolationMarkup.js","../packages/tko.preprocessor.textInterpolation/index.js","../packages/tko.filter.punches/index.js","../packages/tko.components/src/loaderRegistry.js","../packages/tko.components/src/componentBinding.js","../packages/tko.components/src/defaultLoader.js","../packages/tko.components/src/customElements.js","../packages/tko.components/index.js","../index.js"],"sourcesContent":["//\n// Array utilities\n//\n/* eslint no-cond-assign: 0 */\n\nexport function arrayForEach(array, action) {\n    for (var i = 0, j = array.length; i < j; i++)\n        action(array[i], i);\n}\n\nexport function arrayIndexOf(array, item) {\n    // IE9\n    if (typeof Array.prototype.indexOf == \"function\")\n        return Array.prototype.indexOf.call(array, item);\n    for (var i = 0, j = array.length; i < j; i++)\n        if (array[i] === item)\n            return i;\n    return -1;\n}\n\nexport function arrayFirst(array, predicate, predicateOwner) {\n    for (var i = 0, j = array.length; i < j; i++)\n        if (predicate.call(predicateOwner, array[i], i))\n            return array[i];\n    return null;\n}\n\nexport function arrayRemoveItem(array, itemToRemove) {\n    var index = arrayIndexOf(array, itemToRemove);\n    if (index > 0) {\n        array.splice(index, 1);\n    }\n    else if (index === 0) {\n        array.shift();\n    }\n}\n\nexport function arrayGetDistinctValues(array) {\n    array = array || [];\n    var result = [];\n    for (var i = 0, j = array.length; i < j; i++) {\n        if (arrayIndexOf(result, array[i]) < 0)\n            result.push(array[i]);\n    }\n    return result;\n}\n\nexport function arrayMap(array, mapping) {\n    array = array || [];\n    var result = [];\n    for (var i = 0, j = array.length; i < j; i++)\n        result.push(mapping(array[i], i));\n    return result;\n}\n\nexport function arrayFilter(array, predicate) {\n    array = array || [];\n    var result = [];\n    for (var i = 0, j = array.length; i < j; i++)\n        if (predicate(array[i], i))\n            result.push(array[i]);\n    return result;\n}\n\nexport function arrayPushAll(array, valuesToPush) {\n    if (valuesToPush instanceof Array)\n        array.push.apply(array, valuesToPush);\n    else\n        for (var i = 0, j = valuesToPush.length; i < j; i++)\n            array.push(valuesToPush[i]);\n    return array;\n}\n\nexport function addOrRemoveItem(array, value, included) {\n    var existingEntryIndex = arrayIndexOf(typeof array.peek === 'function' ? array.peek() : array, value);\n    if (existingEntryIndex < 0) {\n        if (included)\n            array.push(value);\n    } else {\n        if (!included)\n            array.splice(existingEntryIndex, 1);\n    }\n}\n\n\nexport function makeArray(arrayLikeObject) {\n    var result = [];\n    for (var i = 0, j = arrayLikeObject.length; i < j; i++) {\n        result.push(arrayLikeObject[i]);\n    }\n    return result;\n}\n\n\nexport function range(min, max) {\n    min = typeof min === 'function' ? min() : min;\n    max = typeof max === 'function' ? max() : max;\n    var result = [];\n    for (var i = min; i <= max; i++)\n        result.push(i);\n    return result;\n}\n\n// Go through the items that have been added and deleted and try to find matches between them.\nexport function findMovesInArrayComparison(left, right, limitFailedCompares) {\n    if (left.length && right.length) {\n        var failedCompares, l, r, leftItem, rightItem;\n        for (failedCompares = l = 0; (!limitFailedCompares || failedCompares < limitFailedCompares) && (leftItem = left[l]); ++l) {\n            for (r = 0; rightItem = right[r]; ++r) {\n                if (leftItem['value'] === rightItem['value']) {\n                    leftItem['moved'] = rightItem['index'];\n                    rightItem['moved'] = leftItem['index'];\n                    right.splice(r, 1);         // This item is marked as moved; so remove it from right list\n                    failedCompares = r = 0;     // Reset failed compares count because we're checking for consecutive failures\n                    break;\n                }\n            }\n            failedCompares += r;\n        }\n    }\n}\n\n\n\nvar statusNotInOld = 'added', statusNotInNew = 'deleted';\n\n    // Simple calculation based on Levenshtein distance.\nexport function compareArrays(oldArray, newArray, options) {\n    // For backward compatibility, if the third arg is actually a bool, interpret\n    // it as the old parameter 'dontLimitMoves'. Newer code should use { dontLimitMoves: true }.\n    options = (typeof options === 'boolean') ? { 'dontLimitMoves': options } : (options || {});\n    oldArray = oldArray || [];\n    newArray = newArray || [];\n\n    if (oldArray.length < newArray.length)\n        return compareSmallArrayToBigArray(oldArray, newArray, statusNotInOld, statusNotInNew, options);\n    else\n        return compareSmallArrayToBigArray(newArray, oldArray, statusNotInNew, statusNotInOld, options);\n}\n\n\nfunction compareSmallArrayToBigArray(smlArray, bigArray, statusNotInSml, statusNotInBig, options) {\n    var myMin = Math.min,\n        myMax = Math.max,\n        editDistanceMatrix = [],\n        smlIndex, smlIndexMax = smlArray.length,\n        bigIndex, bigIndexMax = bigArray.length,\n        compareRange = (bigIndexMax - smlIndexMax) || 1,\n        maxDistance = smlIndexMax + bigIndexMax + 1,\n        thisRow, lastRow,\n        bigIndexMaxForRow, bigIndexMinForRow;\n\n    for (smlIndex = 0; smlIndex <= smlIndexMax; smlIndex++) {\n        lastRow = thisRow;\n        editDistanceMatrix.push(thisRow = []);\n        bigIndexMaxForRow = myMin(bigIndexMax, smlIndex + compareRange);\n        bigIndexMinForRow = myMax(0, smlIndex - 1);\n        for (bigIndex = bigIndexMinForRow; bigIndex <= bigIndexMaxForRow; bigIndex++) {\n            if (!bigIndex)\n                thisRow[bigIndex] = smlIndex + 1;\n            else if (!smlIndex)  // Top row - transform empty array into new array via additions\n                thisRow[bigIndex] = bigIndex + 1;\n            else if (smlArray[smlIndex - 1] === bigArray[bigIndex - 1])\n                thisRow[bigIndex] = lastRow[bigIndex - 1];                  // copy value (no edit)\n            else {\n                var northDistance = lastRow[bigIndex] || maxDistance;       // not in big (deletion)\n                var westDistance = thisRow[bigIndex - 1] || maxDistance;    // not in small (addition)\n                thisRow[bigIndex] = myMin(northDistance, westDistance) + 1;\n            }\n        }\n    }\n\n    var editScript = [], meMinusOne, notInSml = [], notInBig = [];\n    for (smlIndex = smlIndexMax, bigIndex = bigIndexMax; smlIndex || bigIndex;) {\n        meMinusOne = editDistanceMatrix[smlIndex][bigIndex] - 1;\n        if (bigIndex && meMinusOne === editDistanceMatrix[smlIndex][bigIndex-1]) {\n            notInSml.push(editScript[editScript.length] = {     // added\n                'status': statusNotInSml,\n                'value': bigArray[--bigIndex],\n                'index': bigIndex });\n        } else if (smlIndex && meMinusOne === editDistanceMatrix[smlIndex - 1][bigIndex]) {\n            notInBig.push(editScript[editScript.length] = {     // deleted\n                'status': statusNotInBig,\n                'value': smlArray[--smlIndex],\n                'index': smlIndex });\n        } else {\n            --bigIndex;\n            --smlIndex;\n            if (!options['sparse']) {\n                editScript.push({\n                    'status': \"retained\",\n                    'value': bigArray[bigIndex] });\n            }\n        }\n    }\n\n    // Set a limit on the number of consecutive non-matching comparisons; having it a multiple of\n    // smlIndexMax keeps the time complexity of this algorithm linear.\n    findMovesInArrayComparison(notInBig, notInSml, !options['dontLimitMoves'] && smlIndexMax * 10);\n\n    return editScript.reverse();\n}\n","//\n// This becomes ko.options\n// --\n//\n// This is the root 'options', which must be extended by others.\n\nvar options = {\n    deferUpdates: false,\n\n    useOnlyNativeEvents: false,\n\n    protoProperty: '__ko_proto__',\n\n    // Modify the default attribute from `data-bind`.\n    defaultBindingAttribute: 'data-bind',\n\n    // Enable/disable <!-- ko binding: ... -> style bindings\n    allowVirtualElements: true,\n\n    // Global variables that can be accessed from bindings.\n    bindingGlobals: window,\n\n    // An instance of the binding provider.\n    bindingProviderInstance: null,\n\n    // jQuery will be automatically set to window.jQuery in applyBindings\n    // if it is (strictly equal to) undefined.  Set it to false or null to\n    // disable automatically setting jQuery.\n    jQuery: window && window.jQuery,\n\n    taskScheduler: null,\n\n    debug: false,\n\n    // Filters for bindings\n    //   data-bind=\"expression | filter_1 | filter_2\"\n    filters: {},\n\n    onError: function (e) { throw e; },\n\n    set: function (name, value) {\n        options[name] = value;\n    }\n};\n\nObject.defineProperty(options, '$', {\n    get: function () { return options.jQuery; }\n});\n\n\nexport default options;\n","//\n// Error handling\n// ---\n//\n// The default onError handler is to re-throw.\nimport options from './options.js';\n\n\nexport function catchFunctionErrors(delegate) {\n    return options.onError ? function () {\n        try {\n            return delegate.apply(this, arguments);\n        } catch (e) {\n            options.onError(e);\n        }\n    } : delegate;\n}\n\nexport function deferError(error) {\n    safeSetTimeout(function () { options.onError(error); }, 0);\n}\n\n\nexport function safeSetTimeout(handler, timeout) {\n    return setTimeout(catchFunctionErrors(handler), timeout);\n}\n","//\n// Asynchronous functionality\n// ---\nimport { safeSetTimeout } from './error.js';\n\nexport function throttle(callback, timeout) {\n    var timeoutInstance;\n    return function () {\n        if (!timeoutInstance) {\n            timeoutInstance = safeSetTimeout(function () {\n                timeoutInstance = undefined;\n                callback();\n            }, timeout);\n        }\n    };\n}\n\nexport function debounce(callback, timeout) {\n    var timeoutInstance;\n    return function () {\n        clearTimeout(timeoutInstance);\n        timeoutInstance = safeSetTimeout(callback, timeout);\n    };\n}\n","//\n// Detection and Workarounds for Internet Explorer\n//\n/* eslint no-empty: 0 */\n\n// Detect IE versions for bug workarounds (uses IE conditionals, not UA string, for robustness)\n// Note that, since IE 10 does not support conditional comments, the following logic only detects IE < 10.\n// Currently this is by design, since IE 10+ behaves correctly when treated as a standard browser.\n// If there is a future need to detect specific versions of IE10+, we will amend this.\nvar ieVersion = document && (function() {\n    var version = 3, div = document.createElement('div'), iElems = div.getElementsByTagName('i');\n\n    // Keep constructing conditional HTML blocks until we hit one that resolves to an empty fragment\n    while (\n        div.innerHTML = '<!--[if gt IE ' + (++version) + ']><i></i><![endif]-->',\n        iElems[0]\n    ) {}\n    return version > 4 ? version : undefined;\n}());\n\nvar isIe6 = ieVersion === 6;\nvar isIe7 = ieVersion === 7;\n\n\nexport { ieVersion, isIe6, isIe7 };\n","//\n// Object functions\n//\n\nexport function extend(target, source) {\n    if (source) {\n        for(var prop in source) {\n            if(source.hasOwnProperty(prop)) {\n                target[prop] = source[prop];\n            }\n        }\n    }\n    return target;\n}\n\nexport function objectForEach(obj, action) {\n    for (var prop in obj) {\n        if (obj.hasOwnProperty(prop)) {\n            action(prop, obj[prop]);\n        }\n    }\n}\n\n\nexport function objectMap(source, mapping) {\n    if (!source)\n        return source;\n    var target = {};\n    for (var prop in source) {\n        if (source.hasOwnProperty(prop)) {\n            target[prop] = mapping(source[prop], prop, source);\n        }\n    }\n    return target;\n}\n\n\nexport function getObjectOwnProperty(obj, propName) {\n    return obj.hasOwnProperty(propName) ? obj[propName] : undefined;\n}\n\n\nexport function clonePlainObjectDeep(obj, seen) {\n    if (!seen) { seen = []; }\n\n    if (!obj || typeof obj !== 'object'\n        || obj.constructor !== Object\n        || seen.indexOf(obj) !== -1) {\n        return obj;\n    }\n\n    // Anything that makes it below is a plain object that has not yet\n    // been seen/cloned.\n    seen.push(obj);\n\n    var result = {};\n    for (var prop in obj) {\n        if (obj.hasOwnProperty(prop)) {\n            result[prop] = clonePlainObjectDeep(obj[prop], seen);\n        }\n    }\n    return result;\n}","//\n// Prototype Functions\n//\nimport { extend } from './object.js';\nimport options from './options.js';\n\nvar protoProperty = options.protoProperty;\n\nexport var canSetPrototype = ({ __proto__: [] } instanceof Array);\n\nexport function setPrototypeOf(obj, proto) {\n    obj.__proto__ = proto;\n    return obj;\n}\n\nexport var setPrototypeOfOrExtend = canSetPrototype ? setPrototypeOf : extend;\n\nexport function hasPrototype(instance, prototype) {\n    if ((instance === null) || (instance === undefined) || (instance[protoProperty] === undefined)) return false;\n    if (instance[protoProperty] === prototype) return true;\n    return hasPrototype(instance[protoProperty], prototype); // Walk the prototype chain\n}\n","//\n// String (and JSON)\n//\n\n\nexport function stringTrim (string) {\n    return string === null || string === undefined ? '' :\n        string.trim ?\n            string.trim() :\n            string.toString().replace(/^[\\s\\xa0]+|[\\s\\xa0]+$/g, '');\n}\n\n\nexport function stringStartsWith (string, startsWith) {\n    string = string || \"\";\n    if (startsWith.length > string.length)\n        return false;\n    return string.substring(0, startsWith.length) === startsWith;\n}\n\n\nexport function parseJson (jsonString) {\n    if (typeof jsonString == \"string\") {\n        jsonString = stringTrim(jsonString);\n        if (jsonString) {\n            if (JSON && JSON.parse) // Use native parsing where available\n                return JSON.parse(jsonString);\n            return (new Function(\"return \" + jsonString))(); // Fallback on less safe parsing for older browsers\n        }\n    }\n    return null;\n}\n\n\nexport function stringifyJson (data, replacer, space) {   // replacer and space are optional\n    if (!JSON || !JSON.stringify)\n        throw new Error(\"Cannot find JSON.stringify(). Some browsers (e.g., IE < 8) don't support it natively, but you can overcome this by adding a script reference to json2.js, downloadable from http://www.json.org/json2.js\");\n    return JSON.stringify(typeof data === 'function' ? data() : data, replacer, space);\n}\n","//\n// ES6 Symbols\n//\n\nexport var useSymbols = typeof Symbol === 'function';\n\nexport function createSymbolOrString(identifier) {\n    return useSymbols ? Symbol(identifier) : identifier;\n}\n","//\n// DOM - CSS\n//\n\nimport { arrayForEach, addOrRemoveItem } from './array.js';\n\n// For details on the pattern for changing node classes\n// see: https://github.com/knockout/knockout/issues/1597\nvar cssClassNameRegex = /\\S+/g;\n\n\nfunction toggleDomNodeCssClass(node, classNames, shouldHaveClass) {\n    var addOrRemoveFn;\n    if (!classNames) { return; }\n    if (typeof node.classList === 'object') {\n        addOrRemoveFn = node.classList[shouldHaveClass ? 'add' : 'remove'];\n        arrayForEach(classNames.match(cssClassNameRegex), function(className) {\n            addOrRemoveFn.call(node.classList, className);\n        });\n    } else if (typeof node.className['baseVal'] === 'string') {\n        // SVG tag .classNames is an SVGAnimatedString instance\n        toggleObjectClassPropertyString(node.className, 'baseVal', classNames, shouldHaveClass);\n    } else {\n        // node.className ought to be a string.\n        toggleObjectClassPropertyString(node, 'className', classNames, shouldHaveClass);\n    }\n}\n\n\nfunction toggleObjectClassPropertyString(obj, prop, classNames, shouldHaveClass) {\n    // obj/prop is either a node/'className' or a SVGAnimatedString/'baseVal'.\n    var currentClassNames = obj[prop].match(cssClassNameRegex) || [];\n    arrayForEach(classNames.match(cssClassNameRegex), function(className) {\n        addOrRemoveItem(currentClassNames, className, shouldHaveClass);\n    });\n    obj[prop] = currentClassNames.join(\" \");\n}\n\n\nexport { toggleDomNodeCssClass };\n","//\n// jQuery\n//\n// TODO: deprecate in favour of options.$\n\nexport var jQueryInstance = window && window.jQuery;\n\nexport function jQuerySetInstance(jquery) {\n    jQueryInstance = jquery;\n}\n","//\n// Information about the DOM\n//\nimport { arrayFirst } from '../array.js';\n\nexport function domNodeIsContainedBy (node, containedByNode) {\n    if (node === containedByNode)\n        return true;\n    if (node.nodeType === 11)\n        return false; // Fixes issue #1162 - can't use node.contains for document fragments on IE8\n    if (containedByNode.contains)\n        return containedByNode.contains(node.nodeType !== 1 ? node.parentNode : node);\n    if (containedByNode.compareDocumentPosition)\n        return (containedByNode.compareDocumentPosition(node) & 16) == 16;\n    while (node && node != containedByNode) {\n        node = node.parentNode;\n    }\n    return !!node;\n}\n\nexport function domNodeIsAttachedToDocument (node) {\n    return domNodeIsContainedBy(node, node.ownerDocument.documentElement);\n}\n\nexport function anyDomNodeIsAttachedToDocument(nodes) {\n    return !!arrayFirst(nodes, domNodeIsAttachedToDocument);\n}\n\nexport function tagNameLower(element) {\n    // For HTML elements, tagName will always be upper case; for XHTML elements, it'll be lower case.\n    // Possible future optimization: If we know it's an element from an XHTML document (not HTML),\n    // we don't need to do the .toLowerCase() as it will always be lower case anyway.\n    return element && element.tagName && element.tagName.toLowerCase();\n}\n\nexport function isDomElement(obj) {\n    if (window.HTMLElement) {\n        return obj instanceof HTMLElement;\n    } else {\n        return obj && obj.tagName && obj.nodeType === 1;\n    }\n}\n\nexport function isDocumentFragment(obj) {\n    if (window.DocumentFragment) {\n        return obj instanceof DocumentFragment;\n    } else {\n        return obj && obj.nodeType === 11;\n    }\n}\n","//\n// DOM node data\n//\n//\nvar dataStoreKeyExpandoPropertyName = \"__ko__data\" + new Date();\nvar dataStore;\nvar uniqueId = 0;\nvar get;\nvar set;\nvar clear;\n\n/**\n * --- Legacy getter/setter (may cause memory leaks) ---\n */\nfunction getAll(node, createIfNotFound) {\n    var dataStoreKey = node[dataStoreKeyExpandoPropertyName];\n    var hasExistingDataStore = dataStoreKey && (dataStoreKey !== \"null\") && dataStore[dataStoreKey];\n    if (!hasExistingDataStore) {\n        if (!createIfNotFound)\n            return undefined;\n        dataStoreKey = node[dataStoreKeyExpandoPropertyName] = \"ko\" + uniqueId++;\n        dataStore[dataStoreKey] = {};\n    }\n    return dataStore[dataStoreKey];\n}\n\nfunction legacyGet(node, key) {\n    var allDataForNode = getAll(node, false);\n    return allDataForNode === undefined ? undefined : allDataForNode[key];\n}\n\nfunction legacySet(node, key, value) {\n    if (value === undefined) {\n        // Make sure we don't actually create a new domData key if we are actually deleting a value\n        if (getAll(node, false) === undefined)\n            return;\n    }\n    var allDataForNode = getAll(node, true);\n    allDataForNode[key] = value;\n}\n\nfunction legacyClear(node) {\n    var dataStoreKey = node[dataStoreKeyExpandoPropertyName];\n    if (dataStoreKey) {\n        delete dataStore[dataStoreKey];\n        node[dataStoreKeyExpandoPropertyName] = null;\n        return true; // Exposing \"did clean\" flag purely so specs can infer whether things have been cleaned up as intended\n    }\n    return false;\n}\n\n/**\n * WeakMap get/set/clear\n */\n\nfunction wmGet(node, key) {\n    return (dataStore.get(node) || {})[key];\n}\n\nfunction wmSet(node, key, value) {\n    var dataForNode;\n    if (dataStore.has(node)) {\n        dataForNode = dataStore.get(node);\n    } else {\n        dataForNode = {};\n        dataStore.set(node, dataForNode);\n    }\n    dataForNode[key] = value;\n}\n\nfunction wmClear(node) {\n    dataStore.set(node, {});\n}\n\n\nif ('WeakMap' in window) {\n    dataStore = new WeakMap();\n    get = wmGet;\n    set = wmSet;\n    clear = wmClear;\n} else {\n    dataStore = {};\n    get = legacyGet;\n    set = legacySet;\n    clear = legacyClear;\n}\n\n\n\n/**\n * Create a unique key-string identifier.\n * FIXME: This should be deprecated.\n */\nexport function nextKey() {\n    return (uniqueId++) + dataStoreKeyExpandoPropertyName;\n}\n\n\nexport { get, set, clear };","//\n// DOM node disposal\n//\n/* eslint no-cond-assign: 0 */\nimport * as domData from './data.js';\nimport {arrayRemoveItem, arrayPushAll} from '../array.js';\nimport {jQueryInstance} from '../jquery.js';\n\nvar domDataKey = domData.nextKey();\n// Node types:\n// 1: Element\n// 8: Comment\n// 9: Document\nvar cleanableNodeTypes = { 1: true, 8: true, 9: true };\nvar cleanableNodeTypesWithDescendants = { 1: true, 9: true };\n\nfunction getDisposeCallbacksCollection(node, createIfNotFound) {\n    var allDisposeCallbacks = domData.get(node, domDataKey);\n    if ((allDisposeCallbacks === undefined) && createIfNotFound) {\n        allDisposeCallbacks = [];\n        domData.set(node, domDataKey, allDisposeCallbacks);\n    }\n    return allDisposeCallbacks;\n}\nfunction destroyCallbacksCollection(node) {\n    domData.set(node, domDataKey, undefined);\n}\n\nfunction cleanSingleNode(node) {\n    // Run all the dispose callbacks\n    var callbacks = getDisposeCallbacksCollection(node, false);\n    if (callbacks) {\n        callbacks = callbacks.slice(0); // Clone, as the array may be modified during iteration (typically, callbacks will remove themselves)\n        for (var i = 0; i < callbacks.length; i++)\n            callbacks[i](node);\n    }\n\n    // Erase the DOM data\n    domData.clear(node);\n\n    // Perform cleanup needed by external libraries (currently only jQuery, but can be extended)\n    for (var i = 0, j = otherNodeCleanerFunctions.length; i < j; ++i) {\n        otherNodeCleanerFunctions[i](node);\n    }\n\n    // Clear any immediate-child comment nodes, as these wouldn't have been found by\n    // node.getElementsByTagName(\"*\") in cleanNode() (comment nodes aren't elements)\n    if (cleanableNodeTypesWithDescendants[node.nodeType])\n        cleanImmediateCommentTypeChildren(node);\n}\n\nfunction cleanImmediateCommentTypeChildren(nodeWithChildren) {\n    var child, nextChild = nodeWithChildren.firstChild;\n    while (child = nextChild) {\n        nextChild = child.nextSibling;\n        if (child.nodeType === 8)\n            cleanSingleNode(child);\n    }\n}\n\n// Exports\nexport function addDisposeCallback(node, callback) {\n    if (typeof callback != \"function\")\n        throw new Error(\"Callback must be a function\");\n    getDisposeCallbacksCollection(node, true).push(callback);\n}\n\nexport function removeDisposeCallback(node, callback) {\n    var callbacksCollection = getDisposeCallbacksCollection(node, false);\n    if (callbacksCollection) {\n        arrayRemoveItem(callbacksCollection, callback);\n        if (callbacksCollection.length == 0)\n            destroyCallbacksCollection(node);\n    }\n}\n\nexport function cleanNode(node) {\n    // First clean this node, where applicable\n    if (cleanableNodeTypes[node.nodeType]) {\n        cleanSingleNode(node);\n\n        // ... then its descendants, where applicable\n        if (cleanableNodeTypesWithDescendants[node.nodeType]) {\n            // Clone the descendants list in case it changes during iteration\n            var descendants = [];\n            arrayPushAll(descendants, node.getElementsByTagName(\"*\"));\n            for (var i = 0, j = descendants.length; i < j; i++)\n                cleanSingleNode(descendants[i]);\n        }\n    }\n    return node;\n}\n\nexport function removeNode(node) {\n    cleanNode(node);\n    if (node.parentNode)\n        node.parentNode.removeChild(node);\n}\n\n\n// Expose supplemental node cleaning functions.\nexport var otherNodeCleanerFunctions = [];\n\n\n// Special support for jQuery here because it's so commonly used.\n// Many jQuery plugins (including jquery.tmpl) store data using jQuery's equivalent of domData\n// so notify it to tear down any resources associated with the node & descendants here.\nexport function cleanjQueryData(node) {\n    var jQueryCleanNodeFn = jQueryInstance\n        ? jQueryInstance.cleanData : null;\n\n    if (jQueryCleanNodeFn) {\n        jQueryCleanNodeFn([node]);\n    }\n}\n\n\notherNodeCleanerFunctions.push(cleanjQueryData);\n","//\n// DOM Events\n//\n\nimport { objectForEach } from '../object.js';\nimport { jQueryInstance } from '../jquery.js';\nimport { ieVersion } from '../ie.js';\nimport { catchFunctionErrors } from '../error.js';\n\nimport { tagNameLower } from './info.js';\nimport { addDisposeCallback } from './disposal.js';\nimport options from '../options.js';\n\n\n// Represent the known event types in a compact way, then at runtime transform it into a hash with event name as key (for fast lookup)\nvar knownEvents = {},\n    knownEventTypesByEventName = {};\n\nvar keyEventTypeName = (navigator && /Firefox\\/2/i.test(navigator.userAgent)) ? 'KeyboardEvent' : 'UIEvents';\n\nknownEvents[keyEventTypeName] = ['keyup', 'keydown', 'keypress'];\n\nknownEvents['MouseEvents'] = [\n    'click', 'dblclick', 'mousedown', 'mouseup', 'mousemove', 'mouseover',\n    'mouseout', 'mouseenter', 'mouseleave'];\n\n\nobjectForEach(knownEvents, function(eventType, knownEventsForType) {\n    if (knownEventsForType.length) {\n        for (var i = 0, j = knownEventsForType.length; i < j; i++)\n            knownEventTypesByEventName[knownEventsForType[i]] = eventType;\n    }\n});\n\n\nfunction isClickOnCheckableElement(element, eventType) {\n    if ((tagNameLower(element) !== \"input\") || !element.type) return false;\n    if (eventType.toLowerCase() != \"click\") return false;\n    var inputType = element.type;\n    return (inputType == \"checkbox\") || (inputType == \"radio\");\n}\n\n\n// Workaround for an IE9 issue - https://github.com/SteveSanderson/knockout/issues/406\nvar eventsThatMustBeRegisteredUsingAttachEvent = { 'propertychange': true };\n\nexport function registerEventHandler(element, eventType, handler) {\n    var wrappedHandler = catchFunctionErrors(handler);\n\n    var mustUseAttachEvent = ieVersion && eventsThatMustBeRegisteredUsingAttachEvent[eventType];\n    if (!options.useOnlyNativeEvents && !mustUseAttachEvent && jQueryInstance) {\n        jQueryInstance(element).bind(eventType, wrappedHandler);\n    } else if (!mustUseAttachEvent && typeof element.addEventListener == \"function\")\n        element.addEventListener(eventType, wrappedHandler, false);\n    else if (typeof element.attachEvent !== \"undefined\") {\n        var attachEventHandler = function (event) { wrappedHandler.call(element, event); },\n            attachEventName = \"on\" + eventType;\n        element.attachEvent(attachEventName, attachEventHandler);\n\n        // IE does not dispose attachEvent handlers automatically (unlike with addEventListener)\n        // so to avoid leaks, we have to remove them manually. See bug #856\n        addDisposeCallback(element, function() {\n            element.detachEvent(attachEventName, attachEventHandler);\n        });\n    } else\n        throw new Error(\"Browser doesn't support addEventListener or attachEvent\");\n}\n\nexport function triggerEvent(element, eventType) {\n    if (!(element && element.nodeType))\n        throw new Error(\"element must be a DOM node when calling triggerEvent\");\n\n    // For click events on checkboxes and radio buttons, jQuery toggles the element checked state *after* the\n    // event handler runs instead of *before*. (This was fixed in 1.9 for checkboxes but not for radio buttons.)\n    // IE doesn't change the checked state when you trigger the click event using \"fireEvent\".\n    // In both cases, we'll use the click method instead.\n    var useClickWorkaround = isClickOnCheckableElement(element, eventType);\n\n    if (!options.useOnlyNativeEvents && jQueryInstance && !useClickWorkaround) {\n        jQueryInstance(element).trigger(eventType);\n    } else if (typeof document.createEvent == \"function\") {\n        if (typeof element.dispatchEvent == \"function\") {\n            var eventCategory = knownEventTypesByEventName[eventType] || \"HTMLEvents\";\n            var event = document.createEvent(eventCategory);\n            event.initEvent(eventType, true, true, window, 0, 0, 0, 0, 0, false, false, false, false, 0, element);\n            element.dispatchEvent(event);\n        }\n        else\n            throw new Error(\"The supplied element doesn't support dispatchEvent\");\n    } else if (useClickWorkaround && element.click) {\n        element.click();\n    } else if (typeof element.fireEvent != \"undefined\") {\n        element.fireEvent(\"on\" + eventType);\n    } else {\n        throw new Error(\"Browser doesn't support triggering events\");\n    }\n}\n","//\n//  DOM node manipulation\n//\nimport { ieVersion } from '../ie.js';\n\nexport function fixUpContinuousNodeArray(continuousNodeArray, parentNode) {\n    // Before acting on a set of nodes that were previously outputted by a template function, we have to reconcile\n    // them against what is in the DOM right now. It may be that some of the nodes have already been removed, or that\n    // new nodes might have been inserted in the middle, for example by a binding. Also, there may previously have been\n    // leading comment nodes (created by rewritten string-based templates) that have since been removed during binding.\n    // So, this function translates the old \"map\" output array into its best guess of the set of current DOM nodes.\n    //\n    // Rules:\n    //   [A] Any leading nodes that have been removed should be ignored\n    //       These most likely correspond to memoization nodes that were already removed during binding\n    //       See https://github.com/knockout/knockout/pull/440\n    //   [B] Any trailing nodes that have been remove should be ignored\n    //       This prevents the code here from adding unrelated nodes to the array while processing rule [C]\n    //       See https://github.com/knockout/knockout/pull/1903\n    //   [C] We want to output a continuous series of nodes. So, ignore any nodes that have already been removed,\n    //       and include any nodes that have been inserted among the previous collection\n\n    if (continuousNodeArray.length) {\n        // The parent node can be a virtual element; so get the real parent node\n        parentNode = (parentNode.nodeType === 8 && parentNode.parentNode) || parentNode;\n\n        // Rule [A]\n        while (continuousNodeArray.length && continuousNodeArray[0].parentNode !== parentNode)\n            continuousNodeArray.splice(0, 1);\n\n        // Rule [B]\n        while (continuousNodeArray.length > 1 && continuousNodeArray[continuousNodeArray.length - 1].parentNode !== parentNode)\n            continuousNodeArray.length--;\n\n        // Rule [C]\n        if (continuousNodeArray.length > 1) {\n            var current = continuousNodeArray[0], last = continuousNodeArray[continuousNodeArray.length - 1];\n            // Replace with the actual new continuous node set\n            continuousNodeArray.length = 0;\n            while (current !== last) {\n                continuousNodeArray.push(current);\n                current = current.nextSibling;\n            }\n            continuousNodeArray.push(last);\n        }\n    }\n    return continuousNodeArray;\n}\n\nexport function setOptionNodeSelectionState (optionNode, isSelected) {\n    // IE6 sometimes throws \"unknown error\" if you try to write to .selected directly, whereas Firefox struggles with setAttribute. Pick one based on browser.\n    if (ieVersion < 7)\n        optionNode.setAttribute(\"selected\", isSelected);\n    else\n        optionNode.selected = isSelected;\n}\n\n\nexport function forceRefresh(node) {\n    // Workaround for an IE9 rendering bug - https://github.com/SteveSanderson/knockout/issues/209\n    if (ieVersion >= 9) {\n        // For text nodes and comment nodes (most likely virtual elements), we will have to refresh the container\n        var elem = node.nodeType == 1 ? node : node.parentNode;\n        if (elem.style)\n            elem.style.zoom = elem.style.zoom;\n    }\n}\n\nexport function ensureSelectElementIsRenderedCorrectly(selectElement) {\n    // Workaround for IE9 rendering bug - it doesn't reliably display all the text in dynamically-added select boxes unless you force it to re-render by updating the width.\n    // (See https://github.com/SteveSanderson/knockout/issues/312, http://stackoverflow.com/questions/5908494/select-only-shows-first-char-of-selected-option)\n    // Also fixes IE7 and IE8 bug that causes selects to be zero width if enclosed by 'if' or 'with'. (See issue #839)\n    if (ieVersion) {\n        var originalWidth = selectElement.style.width;\n        selectElement.style.width = 0;\n        selectElement.style.width = originalWidth;\n    }\n}\n","/* eslint no-cond-assign: 0 */\n//\n// Virtual Elements\n//\n//\n// \"Virtual elements\" is an abstraction on top of the usual DOM API which understands the notion that comment nodes\n// may be used to represent hierarchy (in addition to the DOM's natural hierarchy).\n// If you call the DOM-manipulating functions on ko.virtualElements, you will be able to read and write the state\n// of that virtual hierarchy\n//\n// The point of all this is to support containerless templates (e.g., <!-- ko foreach:someCollection -->blah<!-- /ko -->)\n// without having to scatter special cases all over the binding and templating code.\n\n// IE 9 cannot reliably read the \"nodeValue\" property of a comment node (see https://github.com/SteveSanderson/knockout/issues/186)\n// but it does give them a nonstandard alternative property called \"text\" that it can read reliably. Other browsers don't have that property.\n// So, use node.text where available, and node.nodeValue elsewhere\nimport { emptyDomNode, setDomNodeChildren as setRegularDomNodeChildren } from './manipulation.js';\nimport { removeNode } from './disposal.js';\nimport { tagNameLower } from './info.js';\n\n\nvar commentNodesHaveTextProperty = document && document.createComment(\"test\").text === \"<!--test-->\";\n\nexport var startCommentRegex = commentNodesHaveTextProperty ? /^<!--\\s*ko(?:\\s+([\\s\\S]+))?\\s*-->$/ : /^\\s*ko(?:\\s+([\\s\\S]+))?\\s*$/;\nexport var endCommentRegex =   commentNodesHaveTextProperty ? /^<!--\\s*\\/ko\\s*-->$/ : /^\\s*\\/ko\\s*$/;\nvar htmlTagsWithOptionallyClosingChildren = { 'ul': true, 'ol': true };\n\nexport function isStartComment(node) {\n    return (node.nodeType == 8) && startCommentRegex.test(commentNodesHaveTextProperty ? node.text : node.nodeValue);\n}\n\nexport function isEndComment(node) {\n    return (node.nodeType == 8) && endCommentRegex.test(commentNodesHaveTextProperty ? node.text : node.nodeValue);\n}\n\nexport function getVirtualChildren(startComment, allowUnbalanced) {\n    var currentNode = startComment;\n    var depth = 1;\n    var children = [];\n    while (currentNode = currentNode.nextSibling) {\n        if (isEndComment(currentNode)) {\n            depth--;\n            if (depth === 0)\n                return children;\n        }\n\n        children.push(currentNode);\n\n        if (isStartComment(currentNode))\n            depth++;\n    }\n    if (!allowUnbalanced)\n        throw new Error(\"Cannot find closing comment tag to match: \" + startComment.nodeValue);\n    return null;\n}\n\nfunction getMatchingEndComment(startComment, allowUnbalanced) {\n    var allVirtualChildren = getVirtualChildren(startComment, allowUnbalanced);\n    if (allVirtualChildren) {\n        if (allVirtualChildren.length > 0)\n            return allVirtualChildren[allVirtualChildren.length - 1].nextSibling;\n        return startComment.nextSibling;\n    } else\n        return null; // Must have no matching end comment, and allowUnbalanced is true\n}\n\nfunction getUnbalancedChildTags(node) {\n    // e.g., from <div>OK</div><!-- ko blah --><span>Another</span>, returns: <!-- ko blah --><span>Another</span>\n    //       from <div>OK</div><!-- /ko --><!-- /ko -->,             returns: <!-- /ko --><!-- /ko -->\n    var childNode = node.firstChild, captureRemaining = null;\n    if (childNode) {\n        do {\n            if (captureRemaining)                   // We already hit an unbalanced node and are now just scooping up all subsequent nodes\n                captureRemaining.push(childNode);\n            else if (isStartComment(childNode)) {\n                var matchingEndComment = getMatchingEndComment(childNode, /* allowUnbalanced: */ true);\n                if (matchingEndComment)             // It's a balanced tag, so skip immediately to the end of this virtual set\n                    childNode = matchingEndComment;\n                else\n                    captureRemaining = [childNode]; // It's unbalanced, so start capturing from this point\n            } else if (isEndComment(childNode)) {\n                captureRemaining = [childNode];     // It's unbalanced (if it wasn't, we'd have skipped over it already), so start capturing\n            }\n        } while (childNode = childNode.nextSibling);\n    }\n    return captureRemaining;\n}\n\nexport var allowedBindings = {};\nexport var hasBindingValue = isStartComment;\n\nexport function childNodes(node) {\n    return isStartComment(node) ? getVirtualChildren(node) : node.childNodes;\n}\n\nexport function emptyNode(node) {\n    if (!isStartComment(node))\n        emptyDomNode(node);\n    else {\n        var virtualChildren = childNodes(node);\n        for (var i = 0, j = virtualChildren.length; i < j; i++)\n            removeNode(virtualChildren[i]);\n    }\n}\n\nexport function setDomNodeChildren(node, childNodes) {\n    if (!isStartComment(node))\n        setRegularDomNodeChildren(node, childNodes);\n    else {\n        emptyNode(node);\n        var endCommentNode = node.nextSibling; // Must be the next sibling, as we just emptied the children\n        for (var i = 0, j = childNodes.length; i < j; i++)\n            endCommentNode.parentNode.insertBefore(childNodes[i], endCommentNode);\n    }\n}\n\nexport function prepend(containerNode, nodeToPrepend) {\n    if (!isStartComment(containerNode)) {\n        if (containerNode.firstChild)\n            containerNode.insertBefore(nodeToPrepend, containerNode.firstChild);\n        else\n            containerNode.appendChild(nodeToPrepend);\n    } else {\n        // Start comments must always have a parent and at least one following sibling (the end comment)\n        containerNode.parentNode.insertBefore(nodeToPrepend, containerNode.nextSibling);\n    }\n}\n\nexport function insertAfter(containerNode, nodeToInsert, insertAfterNode) {\n    if (!insertAfterNode) {\n        prepend(containerNode, nodeToInsert);\n    } else if (!isStartComment(containerNode)) {\n        // Insert after insertion point\n        if (insertAfterNode.nextSibling)\n            containerNode.insertBefore(nodeToInsert, insertAfterNode.nextSibling);\n        else\n            containerNode.appendChild(nodeToInsert);\n    } else {\n        // Children of start comments must always have a parent and at least one following sibling (the end comment)\n        containerNode.parentNode.insertBefore(nodeToInsert, insertAfterNode.nextSibling);\n    }\n}\n\nexport function firstChild(node) {\n    if (!isStartComment(node)) {\n        return node.firstChild;\n    }\n    if (!node.nextSibling || isEndComment(node.nextSibling)) {\n        return null;\n    }\n    return node.nextSibling;\n}\n\n\nexport function lastChild(node) {\n    var nextChild = firstChild(node),\n        lastChildNode;\n\n    do {\n        lastChildNode = nextChild;\n    } while (nextChild = nextSibling(nextChild));\n\n    return lastChildNode;\n}\n\nexport function nextSibling(node) {\n    if (isStartComment(node))\n        node = getMatchingEndComment(node);\n    if (node.nextSibling && isEndComment(node.nextSibling))\n        return null;\n    return node.nextSibling;\n}\n\nexport function previousSibling(node) {\n    var depth = 0;\n    do {\n        if (node.nodeType === 8) {\n            if (isStartComment(node)) {\n                if (--depth === 0) {\n                    return node;\n                }\n            } else if (isEndComment(node)) {\n                depth++;\n            }\n        } else {\n            if (depth === 0) { return node; }\n        }\n    } while (node = node.previousSibling);\n    return;\n}\n\nexport function virtualNodeBindingValue(node) {\n    var regexMatch = (commentNodesHaveTextProperty ? node.text : node.nodeValue).match(startCommentRegex);\n    return regexMatch ? regexMatch[1] : null;\n}\n\nexport function normaliseVirtualElementDomStructure(elementVerified) {\n    // Workaround for https://github.com/SteveSanderson/knockout/issues/155\n    // (IE <= 8 or IE 9 quirks mode parses your HTML weirdly, treating closing </li> tags as if they don't exist, thereby moving comment nodes\n    // that are direct descendants of <ul> into the preceding <li>)\n    if (!htmlTagsWithOptionallyClosingChildren[tagNameLower(elementVerified)])\n        return;\n\n    // Scan immediate children to see if they contain unbalanced comment tags. If they do, those comment tags\n    // must be intended to appear *after* that child, so move them there.\n    var childNode = elementVerified.firstChild;\n    if (childNode) {\n        do {\n            if (childNode.nodeType === 1) {\n                var unbalancedTags = getUnbalancedChildTags(childNode);\n                if (unbalancedTags) {\n                    // Fix up the DOM by moving the unbalanced tags to where they most likely were intended to be placed - *after* the child\n                    var nodeToInsertBefore = childNode.nextSibling;\n                    for (var i = 0; i < unbalancedTags.length; i++) {\n                        if (nodeToInsertBefore)\n                            elementVerified.insertBefore(unbalancedTags[i], nodeToInsertBefore);\n                        else\n                            elementVerified.appendChild(unbalancedTags[i]);\n                    }\n                }\n            }\n        } while (childNode = childNode.nextSibling);\n    }\n}\n","//\n// DOM manipulation\n//\n/* eslint no-empty: 0 */\nimport { makeArray } from '../array.js';\nimport { ieVersion } from '../ie.js';\nimport { cleanNode, removeNode } from './disposal.js';\nimport { forceRefresh } from './fixes.js';\nimport * as virtualElements from './virtualElements.js';\n\nexport function moveCleanedNodesToContainerElement(nodes) {\n    // Ensure it's a real array, as we're about to reparent the nodes and\n    // we don't want the underlying collection to change while we're doing that.\n    var nodesArray = makeArray(nodes);\n    var templateDocument = (nodesArray[0] && nodesArray[0].ownerDocument) || document;\n\n    var container = templateDocument.createElement('div');\n    for (var i = 0, j = nodesArray.length; i < j; i++) {\n        container.appendChild(cleanNode(nodesArray[i]));\n    }\n    return container;\n}\n\nexport function cloneNodes (nodesArray, shouldCleanNodes) {\n    for (var i = 0, j = nodesArray.length, newNodesArray = []; i < j; i++) {\n        var clonedNode = nodesArray[i].cloneNode(true);\n        newNodesArray.push(shouldCleanNodes ? cleanNode(clonedNode) : clonedNode);\n    }\n    return newNodesArray;\n}\n\nexport function setDomNodeChildren (domNode, childNodes) {\n    emptyDomNode(domNode);\n    if (childNodes) {\n        for (var i = 0, j = childNodes.length; i < j; i++)\n            domNode.appendChild(childNodes[i]);\n    }\n}\n\nexport function replaceDomNodes (nodeToReplaceOrNodeArray, newNodesArray) {\n    var nodesToReplaceArray = nodeToReplaceOrNodeArray.nodeType ? [nodeToReplaceOrNodeArray] : nodeToReplaceOrNodeArray;\n    if (nodesToReplaceArray.length > 0) {\n        var insertionPoint = nodesToReplaceArray[0];\n        var parent = insertionPoint.parentNode;\n        for (var i = 0, j = newNodesArray.length; i < j; i++)\n            parent.insertBefore(newNodesArray[i], insertionPoint);\n        for (i = 0, j = nodesToReplaceArray.length; i < j; i++) {\n            removeNode(nodesToReplaceArray[i]);\n        }\n    }\n}\n\nexport function setElementName(element, name) {\n    element.name = name;\n\n    // Workaround IE 6/7 issue\n    // - https://github.com/SteveSanderson/knockout/issues/197\n    // - http://www.matts411.com/post/setting_the_name_attribute_in_ie_dom/\n    if (ieVersion <= 7) {\n        try {\n            element.mergeAttributes(document.createElement(\"<input name='\" + element.name + \"'/>\"), false);\n        }\n        catch(e) {} // For IE9 with doc mode \"IE9 Standards\" and browser mode \"IE9 Compatibility View\"\n    }\n}\n\nexport function setTextContent(element, textContent) {\n    var value = typeof textContent === 'function' ? textContent() : textContent;\n    if ((value === null) || (value === undefined))\n        value = \"\";\n\n    // We need there to be exactly one child: a text node.\n    // If there are no children, more than one, or if it's not a text node,\n    // we'll clear everything and create a single text node.\n    var innerTextNode = virtualElements.firstChild(element);\n    if (!innerTextNode || innerTextNode.nodeType != 3 || virtualElements.nextSibling(innerTextNode)) {\n        virtualElements.setDomNodeChildren(element, [element.ownerDocument.createTextNode(value)]);\n    } else {\n        innerTextNode.data = value;\n    }\n\n    forceRefresh(element);\n}\n\nexport function emptyDomNode (domNode) {\n    while (domNode.firstChild) {\n        removeNode(domNode.firstChild);\n    }\n}\n","//\n// HTML-based manipulation\n//\nimport { stringTrim } from '../string.js';\nimport { makeArray } from '../array.js';\nimport { emptyDomNode } from './manipulation.js';\nimport { jQueryInstance } from '../jquery.js';\nimport * as virtualElements from './virtualElements';\n\n\nvar none = [0, \"\", \"\"],\n    table = [1, \"<table>\", \"</table>\"],\n    tbody = [2, \"<table><tbody>\", \"</tbody></table>\"],\n    colgroup = [ 2, \"<table><tbody></tbody><colgroup>\", \"</colgroup></table>\"],\n    tr = [3, \"<table><tbody><tr>\", \"</tr></tbody></table>\"],\n    select = [1, \"<select multiple='multiple'>\", \"</select>\"],\n    fieldset = [1, \"<fieldset>\", \"</fieldset>\"],\n    map = [1, \"<map>\", \"</map>\"],\n    object = [1, \"<object>\", \"</object>\"],\n    lookup = {\n        'area': map,\n        'col': colgroup,\n        'colgroup': table,\n        'caption': table,\n        'legend': fieldset,\n        'thead': table,\n        'tbody': table,\n        'tfoot': table,\n        'tr': tbody,\n        'td': tr,\n        'th': tr,\n        'option': select,\n        'optgroup': select,\n        'param': object\n    },\n\n    // The canonical way to test that the HTML5 <template> tag is supported\n    supportsTemplateTag = 'content' in document.createElement('template');\n\n\nfunction getWrap(tags) {\n    var m = tags.match(/^<([a-z]+)[ >]/);\n    return (m && lookup[m[1]]) || none;\n}\n\n\nfunction simpleHtmlParse(html, documentContext) {\n    documentContext || (documentContext = document);\n    var windowContext = documentContext['parentWindow'] || documentContext['defaultView'] || window;\n\n    // Based on jQuery's \"clean\" function, but only accounting for table-related elements.\n    // If you have referenced jQuery, this won't be used anyway - KO will use jQuery's \"clean\" function directly\n\n    // Note that there's still an issue in IE < 9 whereby it will discard comment nodes that are the first child of\n    // a descendant node. For example: \"<div><!-- mycomment -->abc</div>\" will get parsed as \"<div>abc</div>\"\n    // This won't affect anyone who has referenced jQuery, and there's always the workaround of inserting a dummy node\n    // (possibly a text node) in front of the comment. So, KO does not attempt to workaround this IE issue automatically at present.\n\n    // Trim whitespace, otherwise indexOf won't work as expected\n    var tags = stringTrim(html).toLowerCase(), div = documentContext.createElement(\"div\"),\n        wrap = getWrap(tags),\n        depth = wrap[0];\n\n    // Go to html and back, then peel off extra wrappers\n    // Note that we always prefix with some dummy text, because otherwise, IE<9 will strip out leading comment nodes in descendants. Total madness.\n    var markup = \"ignored<div>\" + wrap[1] + html + wrap[2] + \"</div>\";\n    if (typeof windowContext['innerShiv'] == \"function\") {\n        // Note that innerShiv is deprecated in favour of html5shiv. We should consider adding\n        // support for html5shiv (except if no explicit support is needed, e.g., if html5shiv\n        // somehow shims the native APIs so it just works anyway)\n        div.appendChild(windowContext['innerShiv'](markup));\n    } else {\n        div.innerHTML = markup;\n    }\n\n    // Move to the right depth\n    while (depth--)\n        div = div.lastChild;\n\n    return makeArray(div.lastChild.childNodes);\n}\n\n\nfunction templateHtmlParse(html, documentContext) {\n    if (!documentContext) { documentContext = document; }\n    var template = documentContext.createElement('template');\n    template.innerHTML = html;\n    return makeArray(template.content.childNodes);\n}\n\n\nfunction jQueryHtmlParse(html, documentContext) {\n    // jQuery's \"parseHTML\" function was introduced in jQuery 1.8.0 and is a documented public API.\n    if (jQueryInstance.parseHTML) {\n        return jQueryInstance.parseHTML(html, documentContext) || []; // Ensure we always return an array and never null\n    } else {\n        // For jQuery < 1.8.0, we fall back on the undocumented internal \"clean\" function.\n        var elems = jQueryInstance.clean([html], documentContext);\n\n        // As of jQuery 1.7.1, jQuery parses the HTML by appending it to some dummy parent nodes held in an in-memory document fragment.\n        // Unfortunately, it never clears the dummy parent nodes from the document fragment, so it leaks memory over time.\n        // Fix this by finding the top-most dummy parent element, and detaching it from its owner fragment.\n        if (elems && elems[0]) {\n            // Find the top-most parent element that's a direct child of a document fragment\n            var elem = elems[0];\n            while (elem.parentNode && elem.parentNode.nodeType !== 11 /* i.e., DocumentFragment */)\n                elem = elem.parentNode;\n            // ... then detach it\n            if (elem.parentNode)\n                elem.parentNode.removeChild(elem);\n        }\n\n        return elems;\n    }\n}\n\n\n/**\n * parseHtmlFragment converts a string into an array of DOM Nodes.\n * If supported, it uses <template>-tag parsing, falling back on\n * jQuery parsing (if jQuery is present), and finally on a\n * straightforward parser.\n *\n * @param  {string} html            To be parsed.\n * @param  {Object} documentContext That owns the executing code.\n * @return {[DOMNode]}              Parsed DOM Nodes\n */\nexport function parseHtmlFragment(html, documentContext) {\n    // Prefer <template>-tag based HTML parsing.\n    return supportsTemplateTag ? templateHtmlParse(html, documentContext) :\n\n        // Benefit from jQuery's on old browsers, where possible\n        // NOTE: jQuery's HTML parsing fails on element names like tr-*.\n        // See: https://github.com/jquery/jquery/pull/1988\n        (jQueryInstance ? jQueryHtmlParse(html, documentContext) :\n\n        // ... otherwise, this simple logic will do in most common cases.\n        simpleHtmlParse(html, documentContext));\n}\n\n\n/**\n  * setHtml empties the node's contents, unwraps the HTML, and\n  * sets the node's HTML using jQuery.html or parseHtmlFragment\n  *\n  * @param {DOMNode} node Node in which HTML needs to be set\n  * @param {DOMNode} html HTML to be inserted in node\n  * @returns undefined\n  */\nexport function setHtml(node, html) {\n    emptyDomNode(node);\n\n    // There's few cases where we would want to display a stringified\n    // function, so we unwrap it.\n    if (typeof html === 'function') {\n        html = html();\n    }\n\n    if ((html !== null) && (html !== undefined)) {\n        if (typeof html !== 'string')\n            html = html.toString();\n\n        // If the browser supports <template> tags, prefer that, as\n        // it obviates all the complex workarounds of jQuery.\n        //\n        // However, jQuery contains a lot of sophisticated code to parse arbitrary HTML fragments,\n        // for example <tr> elements which are not normally allowed to exist on their own.\n        // If you've referenced jQuery (and template tags are not supported) we'll use that rather than duplicating its code.\n        if (jQueryInstance && !supportsTemplateTag) {\n            jQueryInstance(node).html(html);\n        } else {\n            // ... otherwise, use KO's own parsing logic.\n            var parsedNodes = parseHtmlFragment(html, node.ownerDocument);\n\n            if (node.nodeType === 8) {\n                if (html === null) {\n                    virtualElements.emptyNode(node);\n                } else {\n                    virtualElements.setDomNodeChildren(node, parsedNodes);\n                }\n            } else {\n                for (var i = 0; i < parsedNodes.length; i++)\n                    node.appendChild(parsedNodes[i]);\n            }\n        }\n    }\n}","//\n// Memoization\n//\nimport { arrayPushAll } from './array.js';\n\nvar memos = {};\n\nfunction randomMax8HexChars() {\n    return (((1 + Math.random()) * 0x100000000) | 0).toString(16).substring(1);\n}\n\nfunction generateRandomId() {\n    return randomMax8HexChars() + randomMax8HexChars();\n}\n\nfunction findMemoNodes(rootNode, appendToArray) {\n    if (!rootNode)\n        return;\n    if (rootNode.nodeType == 8) {\n        var memoId = parseMemoText(rootNode.nodeValue);\n        if (memoId != null)\n            appendToArray.push({ domNode: rootNode, memoId: memoId });\n    } else if (rootNode.nodeType == 1) {\n        for (var i = 0, childNodes = rootNode.childNodes, j = childNodes.length; i < j; i++)\n            findMemoNodes(childNodes[i], appendToArray);\n    }\n}\n\n\nexport function memoize(callback) {\n    if (typeof callback != \"function\")\n        throw new Error(\"You can only pass a function to memoization.memoize()\");\n    var memoId = generateRandomId();\n    memos[memoId] = callback;\n    return \"<!--[ko_memo:\" + memoId + \"]-->\";\n}\n\nexport function unmemoize(memoId, callbackParams) {\n    var callback = memos[memoId];\n    if (callback === undefined)\n        throw new Error(\"Couldn't find any memo with ID \" + memoId + \". Perhaps it's already been unmemoized.\");\n    try {\n        callback.apply(null, callbackParams || []);\n        return true;\n    }\n    finally { delete memos[memoId]; }\n}\n\nexport function unmemoizeDomNodeAndDescendants(domNode, extraCallbackParamsArray) {\n    var memos = [];\n    findMemoNodes(domNode, memos);\n    for (var i = 0, j = memos.length; i < j; i++) {\n        var node = memos[i].domNode;\n        var combinedParams = [node];\n        if (extraCallbackParamsArray)\n            arrayPushAll(combinedParams, extraCallbackParamsArray);\n        unmemoize(memos[i].memoId, combinedParams);\n        node.nodeValue = \"\"; // Neuter this node so we don't try to unmemoize it again\n        if (node.parentNode)\n            node.parentNode.removeChild(node); // If possible, erase it totally (not always possible - someone else might just hold a reference to it then call unmemoizeDomNodeAndDescendants again)\n    }\n}\n\nexport function parseMemoText(memoText) {\n    var match = memoText.match(/^\\[ko_memo\\:(.*?)\\]$/);\n    return match ? match[1] : null;\n}\n","//\n//  Tasks Micro-scheduler\n//  ===\n//\n/* eslint no-cond-assign: 0 */\nimport options from './options';\nimport { deferError } from './error.js';\n\nvar taskQueue = [],\n    taskQueueLength = 0,\n    nextHandle = 1,\n    nextIndexToProcess = 0;\n\nif (window.MutationObserver && !(window.navigator && window.navigator.standalone)) {\n    // Chrome 27+, Firefox 14+, IE 11+, Opera 15+, Safari 6.1+\n    // From https://github.com/petkaantonov/bluebird * Copyright (c) 2014 Petka Antonov * License: MIT\n    options.taskScheduler = (function (callback) {\n        var div = document.createElement(\"div\");\n        new MutationObserver(callback).observe(div, {attributes: true});\n        return function () { div.classList.toggle(\"foo\"); };\n    })(scheduledProcess);\n} else if (document && \"onreadystatechange\" in document.createElement(\"script\")) {\n    // IE 6-10\n    // From https://github.com/YuzuJS/setImmediate * Copyright (c) 2012 Barnesandnoble.com, llc, Donavon West, and Domenic Denicola * License: MIT\n    options.taskScheduler = function (callback) {\n        var script = document.createElement(\"script\");\n        script.onreadystatechange = function () {\n            script.onreadystatechange = null;\n            document.documentElement.removeChild(script);\n            script = null;\n            callback();\n        };\n        document.documentElement.appendChild(script);\n    };\n} else {\n    options.taskScheduler = function (callback) {\n        setTimeout(callback, 0);\n    };\n}\n\nfunction processTasks() {\n    if (taskQueueLength) {\n        // Each mark represents the end of a logical group of tasks and the number of these groups is\n        // limited to prevent unchecked recursion.\n        var mark = taskQueueLength, countMarks = 0;\n\n        // nextIndexToProcess keeps track of where we are in the queue; processTasks can be called recursively without issue\n        for (var task; nextIndexToProcess < taskQueueLength; ) {\n            if (task = taskQueue[nextIndexToProcess++]) {\n                if (nextIndexToProcess > mark) {\n                    if (++countMarks >= 5000) {\n                        nextIndexToProcess = taskQueueLength;   // skip all tasks remaining in the queue since any of them could be causing the recursion\n                        deferError(Error(\"'Too much recursion' after processing \" + countMarks + \" task groups.\"));\n                        break;\n                    }\n                    mark = taskQueueLength;\n                }\n                try {\n                    task();\n                } catch (ex) {\n                    deferError(ex);\n                }\n            }\n        }\n    }\n}\n\nfunction scheduledProcess() {\n    processTasks();\n\n    // Reset the queue\n    nextIndexToProcess = taskQueueLength = taskQueue.length = 0;\n}\n\nfunction scheduleTaskProcessing() {\n    options.taskScheduler(scheduledProcess);\n}\n\n\nexport function schedule(func) {\n    if (!taskQueueLength) {\n        scheduleTaskProcessing();\n    }\n\n    taskQueue[taskQueueLength++] = func;\n    return nextHandle++;\n}\n\nexport function cancel(handle) {\n    var index = handle - (nextHandle - taskQueueLength);\n    if (index >= nextIndexToProcess && index < taskQueueLength) {\n        taskQueue[index] = null;\n    }\n}\n\n// For testing only: reset the queue and return the previous queue length\nexport function resetForTesting() {\n    var length = taskQueueLength - nextIndexToProcess;\n    nextIndexToProcess = taskQueueLength = taskQueue.length = 0;\n    return length;\n}\n\nexport {processTasks as runEarly};\n","/*\n  tko.util\n  ===\n\n\n*/\n\nexport * from './src/array.js';\nexport * from './src/async.js';\nexport * from './src/error.js';\nexport * from './src/ie.js';\nexport * from './src/object.js';\nexport * from './src/proto.js';\nexport * from './src/string.js';\nexport * from './src/symbol.js';\nexport * from './src/css.js';\nexport { jQuerySetInstance } from './src/jquery.js';\nexport { default as options } from './src/options.js';\n\n// DOM;\nexport * from './src/dom/event.js';\nexport * from './src/dom/info.js';\nexport * from './src/dom/manipulation.js';\nexport * from './src/dom/fixes.js';\nexport * from './src/dom/html.js';\nexport * from './src/dom/disposal.js';\n\n// Sub-Modules;\nimport * as memoization from './src/memoization';\nimport * as tasks from './src/tasks.js';\nimport * as virtualElements from './src/dom/virtualElements.js';\nimport * as domData from './src/dom/data.js';\n\nexport {tasks, virtualElements, domData, memoization};\n","//\n//  Defer Updates\n//  ===\n//\nimport { tasks } from 'tko.utils';\n\n\nexport function deferUpdates(target) {\n    if (!target._deferUpdates) {\n        target._deferUpdates = true;\n        target.limit(function (callback) {\n            var handle;\n            return function () {\n                tasks.cancel(handle);\n                handle = tasks.schedule(callback);\n                target.notifySubscribers(undefined, 'dirty');\n            };\n        });\n    }\n}\n","//\n// Observable extenders\n// ---\n//\nimport {\n    options, objectForEach,\n    throttle as throttleFn, debounce as debounceFn\n} from 'tko.utils';\n\nimport { deferUpdates } from './defer.js';\n\nvar primitiveTypes = {\n    'undefined': 1, 'boolean': 1, 'number': 1, 'string': 1\n};\n\n\nexport function valuesArePrimitiveAndEqual(a, b) {\n    var oldValueIsPrimitive = (a === null) || (typeof(a) in primitiveTypes);\n    return oldValueIsPrimitive ? (a === b) : false;\n}\n\n\nexport function applyExtenders(requestedExtenders) {\n    var target = this;\n    if (requestedExtenders) {\n        objectForEach(requestedExtenders, function(key, value) {\n            var extenderHandler = extenders[key];\n            if (typeof extenderHandler == 'function') {\n                target = extenderHandler(target, value) || target;\n            } else {\n                options.onError(new Error(\"Extender not found: \" + key));\n            }\n        });\n    }\n    return target;\n}\n\n/*\n                --- DEFAULT EXTENDERS ---\n */\n\n\n// Change when notifications are published.\nexport function notify(target, notifyWhen) {\n    target.equalityComparer = notifyWhen == \"always\" ?\n        null :  // null equalityComparer means to always notify\n        valuesArePrimitiveAndEqual;\n}\n\n\nexport function deferred(target, option) {\n    if (option !== true) {\n        throw new Error('The \\'deferred\\' extender only accepts the value \\'true\\', because it is not supported to turn deferral off once enabled.');\n    }\n    deferUpdates(target);\n}\n\n\nexport function rateLimit(target, options) {\n    var timeout, method, limitFunction;\n\n    if (typeof options == 'number') {\n        timeout = options;\n    } else {\n        timeout = options.timeout;\n        method = options.method;\n    }\n\n    // rateLimit supersedes deferred updates\n    target._deferUpdates = false;\n\n    limitFunction = method == 'notifyWhenChangesStop' ? debounceFn : throttleFn;\n\n    target.limit(function(callback) {\n        return limitFunction(callback, timeout);\n    });\n}\n\n\nexport var extenders = {\n    notify: notify,\n    deferred: deferred,\n    rateLimit: rateLimit\n};\n","/* eslint no-cond-assign: 0 */\nimport {\n    setPrototypeOfOrExtend, arrayRemoveItem, objectForEach,\n    canSetPrototype, setPrototypeOf\n} from 'tko.utils';\n\nimport { applyExtenders } from './extenders.js';\nimport * as dependencyDetection from './dependencyDetection.js';\n\n\nexport function subscription(target, callback, disposeCallback) {\n    this._target = target;\n    this.callback = callback;\n    this.disposeCallback = disposeCallback;\n    this.isDisposed = false;\n}\n\nsubscription.prototype.dispose = function () {\n    this.isDisposed = true;\n    this.disposeCallback();\n};\n\nexport function subscribable() {\n    setPrototypeOfOrExtend(this, ko_subscribable_fn);\n    ko_subscribable_fn.init(this);\n}\n\nexport var defaultEvent = \"change\";\n\n\nvar ko_subscribable_fn = {\n    init: function(instance) {\n        instance._subscriptions = {};\n        instance._versionNumber = 1;\n    },\n\n    subscribe: function (callback, callbackTarget, event) {\n        var self = this;\n\n        event = event || defaultEvent;\n        var boundCallback = callbackTarget ? callback.bind(callbackTarget) : callback;\n\n        var subscriptionInstance = new subscription(self, boundCallback, function () {\n            arrayRemoveItem(self._subscriptions[event], subscriptionInstance);\n            if (self.afterSubscriptionRemove)\n                self.afterSubscriptionRemove(event);\n        });\n\n        if (self.beforeSubscriptionAdd)\n            self.beforeSubscriptionAdd(event);\n\n        if (!self._subscriptions[event])\n            self._subscriptions[event] = [];\n        self._subscriptions[event].push(subscriptionInstance);\n\n        return subscriptionInstance;\n    },\n\n    notifySubscribers: function (valueToNotify, event) {\n        event = event || defaultEvent;\n        if (event === defaultEvent) {\n            this.updateVersion();\n        }\n        if (this.hasSubscriptionsForEvent(event)) {\n            try {\n                dependencyDetection.begin(); // Begin suppressing dependency detection (by setting the top frame to undefined)\n                for (var a = this._subscriptions[event].slice(0), i = 0, subscriptionInstance; subscriptionInstance = a[i]; ++i) {\n                    // In case a subscription was disposed during the arrayForEach cycle, check\n                    // for isDisposed on each subscription before invoking its callback\n                    if (!subscriptionInstance.isDisposed)\n                        subscriptionInstance.callback(valueToNotify);\n                }\n            } finally {\n                dependencyDetection.end(); // End suppressing dependency detection\n            }\n        }\n    },\n\n    getVersion: function () {\n        return this._versionNumber;\n    },\n\n    hasChanged: function (versionToCheck) {\n        return this.getVersion() !== versionToCheck;\n    },\n\n    updateVersion: function () {\n        ++this._versionNumber;\n    },\n\n    hasSubscriptionsForEvent: function(event) {\n        return this._subscriptions[event] && this._subscriptions[event].length;\n    },\n\n    getSubscriptionsCount: function (event) {\n        if (event) {\n            return this._subscriptions[event] && this._subscriptions[event].length || 0;\n        } else {\n            var total = 0;\n            objectForEach(this._subscriptions, function(eventName, subscriptions) {\n                if (eventName !== 'dirty')\n                    total += subscriptions.length;\n            });\n            return total;\n        }\n    },\n\n    isDifferent: function(oldValue, newValue) {\n        return !this.equalityComparer ||\n               !this.equalityComparer(oldValue, newValue);\n    },\n\n    extend: applyExtenders\n};\n\n\n// For browsers that support proto assignment, we overwrite the prototype of each\n// observable instance. Since observables are functions, we need Function.prototype\n// to still be in the prototype chain.\nif (canSetPrototype) {\n    setPrototypeOf(ko_subscribable_fn, Function.prototype);\n}\n\nsubscribable.fn = ko_subscribable_fn;\n\n\nexport function isSubscribable(instance) {\n    return instance != null && typeof instance.subscribe == \"function\" && typeof instance.notifySubscribers == \"function\";\n}\n","//\n// dependencyDetection\n// ---\n//\n// In KO 3.x, dependencyDetection was also known as computedContext.\n//\nimport { isSubscribable } from './subscribable.js';\n\n\nvar outerFrames = [],\n    currentFrame,\n    lastId = 0;\n\n// Return a unique ID that can be assigned to an observable for dependency tracking.\n// Theoretically, you could eventually overflow the number storage size, resulting\n// in duplicate IDs. But in JavaScript, the largest exact integral value is 2^53\n// or 9,007,199,254,740,992. If you created 1,000,000 IDs per second, it would\n// take over 285 years to reach that number.\n// Reference http://blog.vjeux.com/2010/javascript/javascript-max_int-number-limits.html\nfunction getId() {\n    return ++lastId;\n}\n\nexport function begin(options) {\n    outerFrames.push(currentFrame);\n    currentFrame = options;\n}\n\nexport function end() {\n    currentFrame = outerFrames.pop();\n}\n\n\nexport function registerDependency(subscribable) {\n    if (currentFrame) {\n        if (!isSubscribable(subscribable))\n            throw new Error(\"Only subscribable things can act as dependencies\");\n        currentFrame.callback.call(currentFrame.callbackTarget, subscribable, subscribable._id || (subscribable._id = getId()));\n    }\n}\n\nexport function ignore(callback, callbackTarget, callbackArgs) {\n    try {\n        begin();\n        return callback.apply(callbackTarget, callbackArgs || []);\n    } finally {\n        end();\n    }\n}\n\nexport function getDependenciesCount() {\n    if (currentFrame)\n        return currentFrame.computed.getDependenciesCount();\n}\n\nexport function isInitial() {\n    if (currentFrame)\n        return currentFrame.isInitial;\n}\n\nexport { ignore as ignoreDependencies };\n","//\n//  Observable values\n//  ---\n//\nimport {\n    createSymbolOrString, canSetPrototype, extend, setPrototypeOfOrExtend,\n    setPrototypeOf, hasPrototype, options\n} from 'tko.utils';\n\nimport * as dependencyDetection from './dependencyDetection.js';\nimport { deferUpdates } from './defer.js';\nimport { subscribable, defaultEvent } from './subscribable.js';\nimport { valuesArePrimitiveAndEqual } from './extenders.js';\n\nvar observableLatestValue = createSymbolOrString('_latestValue');\n\n\nexport function observable(initialValue) {\n    function Observable() {\n        if (arguments.length > 0) {\n            // Write\n\n            // Ignore writes if the value hasn't changed\n            if (Observable.isDifferent(Observable[observableLatestValue], arguments[0])) {\n                Observable.valueWillMutate();\n                Observable[observableLatestValue] = arguments[0];\n                Observable.valueHasMutated();\n            }\n            return this; // Permits chained assignments\n        }\n        else {\n            // Read\n            dependencyDetection.registerDependency(Observable); // The caller only needs to be notified of changes if they did a \"read\" operation\n            return Observable[observableLatestValue];\n        }\n    }\n\n    Observable[observableLatestValue] = initialValue;\n\n    // Inherit from 'subscribable'\n    if (!canSetPrototype) {\n        // 'subscribable' won't be on the prototype chain unless we put it there directly\n        extend(Observable, subscribable.fn);\n    }\n    subscribable.fn.init(Observable);\n\n    // Inherit from 'observable'\n    setPrototypeOfOrExtend(Observable, observable.fn);\n\n    if (options.deferUpdates) {\n        deferUpdates(Observable);\n    }\n\n    return Observable;\n}\n\n// Define prototype for observables\nobservable.fn = {\n    equalityComparer: valuesArePrimitiveAndEqual,\n    peek: function() { return this[observableLatestValue]; },\n    valueHasMutated: function () { this.notifySubscribers(this[observableLatestValue]); },\n    valueWillMutate: function () {\n        this.notifySubscribers(this[observableLatestValue], 'beforeChange');\n    }\n};\n\n\n\n// Moved out of \"limit\" to avoid the extra closure\nfunction limitNotifySubscribers(value, event) {\n    if (!event || event === defaultEvent) {\n        this._limitChange(value);\n    } else if (event === 'beforeChange') {\n        this._limitBeforeChange(value);\n    } else {\n        this._origNotifySubscribers(value, event);\n    }\n}\n\n// Add `limit` function to the subscribable prototype\nsubscribable.fn.limit = function limit(limitFunction) {\n    var self = this, selfIsObservable = isObservable(self),\n        ignoreBeforeChange, previousValue, pendingValue, beforeChange = 'beforeChange';\n\n    if (!self._origNotifySubscribers) {\n        self._origNotifySubscribers = self.notifySubscribers;\n        self.notifySubscribers = limitNotifySubscribers;\n    }\n\n    var finish = limitFunction(function() {\n        self._notificationIsPending = false;\n\n        // If an observable provided a reference to itself, access it to get the latest value.\n        // This allows computed observables to delay calculating their value until needed.\n        if (selfIsObservable && pendingValue === self) {\n            pendingValue = self();\n        }\n        ignoreBeforeChange = false;\n        if (self.isDifferent(previousValue, pendingValue)) {\n            self._origNotifySubscribers(previousValue = pendingValue);\n        }\n    });\n\n    self._limitChange = function(value) {\n        self._notificationIsPending = ignoreBeforeChange = true;\n        pendingValue = value;\n        finish();\n    };\n    self._limitBeforeChange = function(value) {\n        if (!ignoreBeforeChange) {\n            previousValue = value;\n            self._origNotifySubscribers(value, beforeChange);\n        }\n    };\n};\n\n\n// Note that for browsers that don't support proto assignment, the\n// inheritance chain is created manually in the observable constructor\nif (canSetPrototype) {\n    setPrototypeOf(observable.fn, subscribable.fn);\n}\n\nvar protoProperty = observable.protoProperty = options.protoProperty;\nobservable.fn[protoProperty] = observable;\n\nexport function isObservable(instance) {\n    return hasPrototype(instance, observable);\n}\n\nexport function unwrap(value) {\n    return isObservable(value) ? value() : value;\n}\n\nexport function peek(value) {\n    return isObservable(value) ? value.peek() : value;\n}\n\nexport function isWriteableObservable(instance) {\n    // Observable\n    if ((typeof instance == 'function') && instance[protoProperty] === observable)\n        return true;\n    // Writeable dependent observable\n    if ((typeof instance == 'function') /* && (instance[protoProperty] === ko.dependentObservable)*/ && (instance.hasWriteFunction))\n        return true;\n    // Anything else\n    return false;\n}\n\nexport { isWriteableObservable as isWritableObservable };\n","//\n// Observable Array - Change Tracking Extender\n// ---\n//\n/* eslint no-fallthrough: 0*/\n\nimport {\n    extend, compareArrays, findMovesInArrayComparison\n} from 'tko.utils';\n\nimport { defaultEvent } from './subscribable.js';\nimport { extenders } from './extenders.js';\n\n\nexport var arrayChangeEventName = 'arrayChange';\n\n\nexport function trackArrayChanges(target, options) {\n    // Use the provided options--each call to trackArrayChanges overwrites the previously set options\n    target.compareArrayOptions = {};\n    if (options && typeof options == \"object\") {\n        extend(target.compareArrayOptions, options);\n    }\n    target.compareArrayOptions.sparse = true;\n\n    // Only modify the target observable once\n    if (target.cacheDiffForKnownOperation) {\n        return;\n    }\n    var trackingChanges = false,\n        cachedDiff = null,\n        arrayChangeSubscription,\n        pendingNotifications = 0,\n        underlyingBeforeSubscriptionAddFunction = target.beforeSubscriptionAdd,\n        underlyingAfterSubscriptionRemoveFunction = target.afterSubscriptionRemove;\n\n    // Watch \"subscribe\" calls, and for array change events, ensure change tracking is enabled\n    target.beforeSubscriptionAdd = function (event) {\n        if (underlyingBeforeSubscriptionAddFunction)\n            underlyingBeforeSubscriptionAddFunction.call(target, event);\n        if (event === arrayChangeEventName) {\n            trackChanges();\n        }\n    };\n\n    // Watch \"dispose\" calls, and for array change events, ensure change tracking is disabled when all are disposed\n    target.afterSubscriptionRemove = function (event) {\n        if (underlyingAfterSubscriptionRemoveFunction)\n            underlyingAfterSubscriptionRemoveFunction.call(target, event);\n        if (event === arrayChangeEventName && !target.hasSubscriptionsForEvent(arrayChangeEventName)) {\n            if (arrayChangeSubscription) {\n                arrayChangeSubscription.dispose();\n            }\n            arrayChangeSubscription = null;\n            trackingChanges = false;\n        }\n    };\n\n    function trackChanges() {\n        // Calling 'trackChanges' multiple times is the same as calling it once\n        if (trackingChanges) {\n            return;\n        }\n\n        trackingChanges = true;\n\n        // Intercept \"notifySubscribers\" to track how many times it was called.\n        var underlyingNotifySubscribersFunction = target['notifySubscribers'];\n        target['notifySubscribers'] = function(valueToNotify, event) {\n            if (!event || event === defaultEvent) {\n                ++pendingNotifications;\n            }\n            return underlyingNotifySubscribersFunction.apply(this, arguments);\n        };\n\n        // Each time the array changes value, capture a clone so that on the next\n        // change it's possible to produce a diff\n        var previousContents = [].concat(target.peek() || []);\n        cachedDiff = null;\n        arrayChangeSubscription = target.subscribe(function(currentContents) {\n            // Make a copy of the current contents and ensure it's an array\n            currentContents = [].concat(currentContents || []);\n\n            // Compute the diff and issue notifications, but only if someone is listening\n            if (target.hasSubscriptionsForEvent(arrayChangeEventName)) {\n                var changes = getChanges(previousContents, currentContents);\n            }\n\n            // Eliminate references to the old, removed items, so they can be GCed\n            previousContents = currentContents;\n            cachedDiff = null;\n            pendingNotifications = 0;\n\n            if (changes && changes.length) {\n                target['notifySubscribers'](changes, arrayChangeEventName);\n            }\n        });\n    }\n\n    function getChanges(previousContents, currentContents) {\n        // We try to re-use cached diffs.\n        // The scenarios where pendingNotifications > 1 are when using rate-limiting or the Deferred Updates\n        // plugin, which without this check would not be compatible with arrayChange notifications. Normally,\n        // notifications are issued immediately so we wouldn't be queueing up more than one.\n        if (!cachedDiff || pendingNotifications > 1) {\n            cachedDiff = trackArrayChanges.compareArrays(previousContents, currentContents, target.compareArrayOptions);\n        }\n\n        return cachedDiff;\n    }\n\n    target.cacheDiffForKnownOperation = function(rawArray, operationName, args) {\n        var index, argsIndex;\n        // Only run if we're currently tracking changes for this observable array\n        // and there aren't any pending deferred notifications.\n        if (!trackingChanges || pendingNotifications) {\n            return;\n        }\n        var diff = [],\n            arrayLength = rawArray.length,\n            argsLength = args.length,\n            offset = 0;\n\n        function pushDiff(status, value, index) {\n            return diff[diff.length] = { 'status': status, 'value': value, 'index': index };\n        }\n        switch (operationName) {\n        case 'push':\n            offset = arrayLength;\n        case 'unshift':\n            for (index = 0; index < argsLength; index++) {\n                pushDiff('added', args[index], offset + index);\n            }\n            break;\n\n        case 'pop':\n            offset = arrayLength - 1;\n        case 'shift':\n            if (arrayLength) {\n                pushDiff('deleted', rawArray[offset], offset);\n            }\n            break;\n\n        case 'splice':\n            // Negative start index means 'from end of array'. After that we clamp to [0...arrayLength].\n            // See https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/splice\n            var startIndex = Math.min(Math.max(0, args[0] < 0 ? arrayLength + args[0] : args[0]), arrayLength),\n                endDeleteIndex = argsLength === 1 ? arrayLength : Math.min(startIndex + (args[1] || 0), arrayLength),\n                endAddIndex = startIndex + argsLength - 2,\n                endIndex = Math.max(endDeleteIndex, endAddIndex),\n                additions = [], deletions = [];\n            for (index = startIndex, argsIndex = 2; index < endIndex; ++index, ++argsIndex) {\n                if (index < endDeleteIndex)\n                    deletions.push(pushDiff('deleted', rawArray[index], index));\n                if (index < endAddIndex)\n                    additions.push(pushDiff('added', args[argsIndex], index));\n            }\n            findMovesInArrayComparison(deletions, additions);\n            break;\n\n        default:\n            return;\n        }\n        cachedDiff = diff;\n    };\n}\n\n\n// Expose compareArrays for testing.\ntrackArrayChanges.compareArrays = compareArrays;\n\n\n// Add the trackArrayChanges extender so we can use\n// obs.extend({ trackArrayChanges: true })\nextenders.trackArrayChanges = trackArrayChanges;","//\n// Observable Arrays\n// ===\n//\nimport {\n    setPrototypeOfOrExtend, arrayIndexOf, canSetPrototype, setPrototypeOf,\n    arrayForEach\n} from 'tko.utils';\n\nimport { observable, isObservable } from './observable.js';\n\nimport { trackArrayChanges } from './observableArray.changeTracking.js';\n\nexport function observableArray(initialValues) {\n    initialValues = initialValues || [];\n\n    if (typeof initialValues != 'object' || !('length' in initialValues))\n        throw new Error(\"The argument passed when initializing an observable array must be an array, or null, or undefined.\");\n\n    var result = observable(initialValues);\n    setPrototypeOfOrExtend(result, observableArray.fn);\n    trackArrayChanges(result);\n        // ^== result.extend({ trackArrayChanges: true })\n    return result;\n}\n\nobservableArray.fn = {\n    remove: function (valueOrPredicate) {\n        var underlyingArray = this.peek();\n        var removedValues = [];\n        var predicate = typeof valueOrPredicate == \"function\" && !isObservable(valueOrPredicate) ? valueOrPredicate : function (value) { return value === valueOrPredicate; };\n        for (var i = 0; i < underlyingArray.length; i++) {\n            var value = underlyingArray[i];\n            if (predicate(value)) {\n                if (removedValues.length === 0) {\n                    this.valueWillMutate();\n                }\n                removedValues.push(value);\n                underlyingArray.splice(i, 1);\n                i--;\n            }\n        }\n        if (removedValues.length) {\n            this.valueHasMutated();\n        }\n        return removedValues;\n    },\n\n    removeAll: function (arrayOfValues) {\n        // If you passed zero args, we remove everything\n        if (arrayOfValues === undefined) {\n            var underlyingArray = this.peek();\n            var allValues = underlyingArray.slice(0);\n            this.valueWillMutate();\n            underlyingArray.splice(0, underlyingArray.length);\n            this.valueHasMutated();\n            return allValues;\n        }\n        // If you passed an arg, we interpret it as an array of entries to remove\n        if (!arrayOfValues)\n            return [];\n        return this['remove'](function (value) {\n            return arrayIndexOf(arrayOfValues, value) >= 0;\n        });\n    },\n\n    destroy: function (valueOrPredicate) {\n        var underlyingArray = this.peek();\n        var predicate = typeof valueOrPredicate == \"function\" && !isObservable(valueOrPredicate) ? valueOrPredicate : function (value) { return value === valueOrPredicate; };\n        this.valueWillMutate();\n        for (var i = underlyingArray.length - 1; i >= 0; i--) {\n            var value = underlyingArray[i];\n            if (predicate(value))\n                underlyingArray[i][\"_destroy\"] = true;\n        }\n        this.valueHasMutated();\n    },\n\n    destroyAll: function (arrayOfValues) {\n        // If you passed zero args, we destroy everything\n        if (arrayOfValues === undefined)\n            return this.destroy(function() { return true; });\n\n        // If you passed an arg, we interpret it as an array of entries to destroy\n        if (!arrayOfValues)\n            return [];\n        return this.destroy(function (value) {\n            return arrayIndexOf(arrayOfValues, value) >= 0;\n        });\n    },\n\n    indexOf: function (item) {\n        var underlyingArray = this();\n        return arrayIndexOf(underlyingArray, item);\n    },\n\n    replace: function(oldItem, newItem) {\n        var index = this.indexOf(oldItem);\n        if (index >= 0) {\n            this.valueWillMutate();\n            this.peek()[index] = newItem;\n            this.valueHasMutated();\n        }\n    }\n};\n\n\n// Note that for browsers that don't support proto assignment, the\n// inheritance chain is created manually in the ko.observableArray constructor\nif (canSetPrototype) {\n    setPrototypeOf(observableArray.fn, observable.fn);\n}\n\n// Populate ko.observableArray.fn with read/write functions from native arrays\n// Important: Do not add any additional functions here that may reasonably be used to *read* data from the array\n// because we'll eval them without causing subscriptions, so ko.computed output could end up getting stale\narrayForEach([\"pop\", \"push\", \"reverse\", \"shift\", \"sort\", \"splice\", \"unshift\"], function (methodName) {\n    observableArray.fn[methodName] = function () {\n        // Use \"peek\" to avoid creating a subscription in any computed that we're executing in the context of\n        // (for consistency with mutating regular observables)\n        var underlyingArray = this.peek();\n        this.valueWillMutate();\n        this.cacheDiffForKnownOperation(underlyingArray, methodName, arguments);\n        var methodCallResult = underlyingArray[methodName].apply(underlyingArray, arguments);\n        this.valueHasMutated();\n        // The native sort and reverse methods return a reference to the array, but it makes more sense to return the observable array instead.\n        return methodCallResult === underlyingArray ? this : methodCallResult;\n    };\n});\n\n// Populate ko.observableArray.fn with read-only functions from native arrays\narrayForEach([\"slice\"], function (methodName) {\n    observableArray.fn[methodName] = function () {\n        var underlyingArray = this();\n        return underlyingArray[methodName].apply(underlyingArray, arguments);\n    };\n});\n","//\n// Helpers\n// ---\n// toJS & toJSON\n//\nimport {\n    stringifyJson, arrayIndexOf\n} from 'tko.utils';\n\nimport { isObservable } from './observable.js';\n\n\nvar maxNestedObservableDepth = 10; // Escape the (unlikely) pathalogical case where an observable's current value is itself (or similar reference cycle)\n\nexport function toJS(rootObject) {\n    if (arguments.length == 0)\n        throw new Error(\"When calling ko.toJS, pass the object you want to convert.\");\n\n    // We just unwrap everything at every level in the object graph\n    return mapJsObjectGraph(rootObject, function(valueToMap) {\n        // Loop because an observable's value might in turn be another observable wrapper\n        for (var i = 0; isObservable(valueToMap) && (i < maxNestedObservableDepth); i++)\n            valueToMap = valueToMap();\n        return valueToMap;\n    });\n}\n\nexport function toJSON(rootObject, replacer, space) {     // replacer and space are optional\n    var plainJavaScriptObject = toJS(rootObject);\n    return stringifyJson(plainJavaScriptObject, replacer, space);\n}\n\nfunction mapJsObjectGraph(rootObject, mapInputCallback, visitedObjects) {\n    visitedObjects = visitedObjects || new objectLookup();\n\n    rootObject = mapInputCallback(rootObject);\n    var canHaveProperties = (typeof rootObject == \"object\") && (rootObject !== null) && (rootObject !== undefined) && (!(rootObject instanceof RegExp)) && (!(rootObject instanceof Date)) && (!(rootObject instanceof String)) && (!(rootObject instanceof Number)) && (!(rootObject instanceof Boolean));\n    if (!canHaveProperties)\n        return rootObject;\n\n    var outputProperties = rootObject instanceof Array ? [] : {};\n    visitedObjects.save(rootObject, outputProperties);\n\n    visitPropertiesOrArrayEntries(rootObject, function(indexer) {\n        var propertyValue = mapInputCallback(rootObject[indexer]);\n\n        switch (typeof propertyValue) {\n        case \"boolean\":\n        case \"number\":\n        case \"string\":\n        case \"function\":\n            outputProperties[indexer] = propertyValue;\n            break;\n        case \"object\":\n        case \"undefined\":\n            var previouslyMappedValue = visitedObjects.get(propertyValue);\n            outputProperties[indexer] = (previouslyMappedValue !== undefined)\n                ? previouslyMappedValue\n                : mapJsObjectGraph(propertyValue, mapInputCallback, visitedObjects);\n            break;\n        }\n    });\n\n    return outputProperties;\n}\n\nfunction visitPropertiesOrArrayEntries(rootObject, visitorCallback) {\n    if (rootObject instanceof Array) {\n        for (var i = 0; i < rootObject.length; i++)\n            visitorCallback(i);\n\n        // For arrays, also respect toJSON property for custom mappings (fixes #278)\n        if (typeof rootObject['toJSON'] == 'function')\n            visitorCallback('toJSON');\n    } else {\n        for (var propertyName in rootObject) {\n            visitorCallback(propertyName);\n        }\n    }\n}\n\nfunction objectLookup() {\n    this.keys = [];\n    this.values = [];\n}\n\nobjectLookup.prototype = {\n    constructor: objectLookup,\n    save: function(key, value) {\n        var existingIndex = arrayIndexOf(this.keys, key);\n        if (existingIndex >= 0)\n            this.values[existingIndex] = value;\n        else {\n            this.keys.push(key);\n            this.values.push(value);\n        }\n    },\n    get: function(key) {\n        var existingIndex = arrayIndexOf(this.keys, key);\n        return (existingIndex >= 0) ? this.values[existingIndex] : undefined;\n    }\n};\n","//\n// Observables.\n// ---\n//\n// The following are added to the root `[t]ko` object.\n//\n\nexport {\n    observable, isObservable, unwrap, peek,\n    isWriteableObservable, isWritableObservable\n} from './src/observable';\nexport { isSubscribable, subscribable } from './src/subscribable';\nexport { observableArray } from './src/observableArray';\nexport { trackArrayChanges, arrayChangeEventName } from './src/observableArray.changeTracking';\nexport { toJS, toJSON } from './src/mappingHelpers';\nexport { deferUpdates } from './src/defer.js';\n\nexport { valuesArePrimitiveAndEqual, applyExtenders, extenders } from './src/extenders';\nimport * as dependencyDetection from './src/dependencyDetection';\n\nexport { dependencyDetection };\n","//\n// Computed Observable Values\n//\n// (before tko, `computed` was also known as `dependentObservable`)\n//\nimport {\n    addDisposeCallback,\n    arrayForEach,\n    canSetPrototype,\n    createSymbolOrString,\n    domNodeIsAttachedToDocument,\n    extend,\n    objectForEach,\n    options as koOptions,\n    removeDisposeCallback,\n    safeSetTimeout,\n    setPrototypeOf,\n    hasPrototype,\n    setPrototypeOfOrExtend\n} from 'tko.utils';\n\nimport {\n    dependencyDetection,\n    extenders,\n    valuesArePrimitiveAndEqual,\n    observable,\n    subscribable\n} from 'tko.observable';\n\n\nvar computedState = createSymbolOrString('_state');\n\nexport function computed(evaluatorFunctionOrOptions, evaluatorFunctionTarget, options) {\n    if (typeof evaluatorFunctionOrOptions === \"object\") {\n        // Single-parameter syntax - everything is on this \"options\" param\n        options = evaluatorFunctionOrOptions;\n    } else {\n        // Multi-parameter syntax - construct the options according to the params passed\n        options = options || {};\n        if (evaluatorFunctionOrOptions) {\n            options.read = evaluatorFunctionOrOptions;\n        }\n    }\n    if (typeof options.read != \"function\")\n        throw Error(\"Pass a function that returns the value of the computed\");\n\n    var writeFunction = options.write;\n    var state = {\n        latestValue: undefined,\n        isStale: true,\n        isBeingEvaluated: false,\n        suppressDisposalUntilDisposeWhenReturnsFalse: false,\n        isDisposed: false,\n        pure: false,\n        isSleeping: false,\n        readFunction: options.read,\n        evaluatorFunctionTarget: evaluatorFunctionTarget || options.owner,\n        disposeWhenNodeIsRemoved: options.disposeWhenNodeIsRemoved || options.disposeWhenNodeIsRemoved || null,\n        disposeWhen: options.disposeWhen || options.disposeWhen,\n        domNodeDisposalCallback: null,\n        dependencyTracking: {},\n        dependenciesCount: 0,\n        evaluationTimeoutInstance: null\n    };\n\n    function computedObservable() {\n        if (arguments.length > 0) {\n            if (typeof writeFunction === \"function\") {\n                // Writing a value\n                writeFunction.apply(state.evaluatorFunctionTarget, arguments);\n            } else {\n                throw new Error(\"Cannot write a value to a computed unless you specify a 'write' option. If you wish to read the current value, don't pass any parameters.\");\n            }\n            return this; // Permits chained assignments\n        } else {\n            // Reading the value\n            dependencyDetection.registerDependency(computedObservable);\n            if (state.isStale || (state.isSleeping && computedObservable.haveDependenciesChanged())) {\n                computedObservable.evaluateImmediate();\n            }\n            return state.latestValue;\n        }\n    }\n\n    computedObservable[computedState] = state;\n    computedObservable.hasWriteFunction = typeof writeFunction === \"function\";\n\n    // Inherit from 'subscribable'\n    if (!canSetPrototype) {\n        // 'subscribable' won't be on the prototype chain unless we put it there directly\n        extend(computedObservable, subscribable.fn);\n    }\n    subscribable.fn.init(computedObservable);\n\n    // Inherit from 'computed'\n    setPrototypeOfOrExtend(computedObservable, computed.fn);\n\n    if (options.pure) {\n        state.pure = true;\n        state.isSleeping = true;     // Starts off sleeping; will awake on the first subscription\n        extend(computedObservable, pureComputedOverrides);\n    } else if (options.deferEvaluation) {\n        extend(computedObservable, deferEvaluationOverrides);\n    }\n\n    if (koOptions.deferUpdates) {\n        extenders.deferred(computedObservable, true);\n    }\n\n    if (koOptions.debug) {\n        // #1731 - Aid debugging by exposing the computed's options\n        computedObservable._options = options;\n    }\n\n    if (state.disposeWhenNodeIsRemoved) {\n        // Since this computed is associated with a DOM node, and we don't want to dispose the computed\n        // until the DOM node is *removed* from the document (as opposed to never having been in the document),\n        // we'll prevent disposal until \"disposeWhen\" first returns false.\n        state.suppressDisposalUntilDisposeWhenReturnsFalse = true;\n\n        // disposeWhenNodeIsRemoved: true can be used to opt into the \"only dispose after first false result\"\n        // behaviour even if there's no specific node to watch. In that case, clear the option so we don't try\n        // to watch for a non-node's disposal. This technique is intended for KO's internal use only and shouldn't\n        // be documented or used by application code, as it's likely to change in a future version of KO.\n        if (!state.disposeWhenNodeIsRemoved.nodeType) {\n            state.disposeWhenNodeIsRemoved = null;\n        }\n    }\n\n    // Evaluate, unless sleeping or deferEvaluation is true\n    if (!state.isSleeping && !options.deferEvaluation) {\n        computedObservable.evaluateImmediate();\n    }\n\n    // Attach a DOM node disposal callback so that the computed will be proactively disposed as soon as the node is\n    // removed using ko.removeNode. But skip if isActive is false (there will never be any dependencies to dispose).\n    if (state.disposeWhenNodeIsRemoved && computedObservable.isActive()) {\n        addDisposeCallback(state.disposeWhenNodeIsRemoved, state.domNodeDisposalCallback = function () {\n            computedObservable.dispose();\n        });\n    }\n\n    return computedObservable;\n}\n\n// Utility function that disposes a given dependencyTracking entry\nfunction computedDisposeDependencyCallback(id, entryToDispose) {\n    if (entryToDispose !== null && entryToDispose.dispose) {\n        entryToDispose.dispose();\n    }\n}\n\n// This function gets called each time a dependency is detected while evaluating a computed.\n// It's factored out as a shared function to avoid creating unnecessary function instances during evaluation.\nfunction computedBeginDependencyDetectionCallback(subscribable, id) {\n    var computedObservable = this.computedObservable,\n        state = computedObservable[computedState];\n    if (!state.isDisposed) {\n        if (this.disposalCount && this.disposalCandidates[id]) {\n            // Don't want to dispose this subscription, as it's still being used\n            computedObservable.addDependencyTracking(id, subscribable, this.disposalCandidates[id]);\n            this.disposalCandidates[id] = null; // No need to actually delete the property - disposalCandidates is a transient object anyway\n            --this.disposalCount;\n        } else if (!state.dependencyTracking[id]) {\n            // Brand new subscription - add it\n            computedObservable.addDependencyTracking(id, subscribable, state.isSleeping ? { _target: subscribable } : computedObservable.subscribeToDependency(subscribable));\n        }\n    }\n}\n\ncomputed.fn = {\n    equalityComparer: valuesArePrimitiveAndEqual,\n    getDependenciesCount: function () {\n        return this[computedState].dependenciesCount;\n    },\n    addDependencyTracking: function (id, target, trackingObj) {\n        if (this[computedState].pure && target === this) {\n            throw Error(\"A 'pure' computed must not be called recursively\");\n        }\n\n        this[computedState].dependencyTracking[id] = trackingObj;\n        trackingObj._order = this[computedState].dependenciesCount++;\n        trackingObj._version = target.getVersion();\n    },\n    haveDependenciesChanged: function () {\n        var id, dependency, dependencyTracking = this[computedState].dependencyTracking;\n        for (id in dependencyTracking) {\n            if (dependencyTracking.hasOwnProperty(id)) {\n                dependency = dependencyTracking[id];\n                if (dependency._target.hasChanged(dependency._version)) {\n                    return true;\n                }\n            }\n        }\n    },\n    markDirty: function () {\n        // Process \"dirty\" events if we can handle delayed notifications\n        if (this._evalDelayed && !this[computedState].isBeingEvaluated) {\n            this._evalDelayed();\n        }\n    },\n    isActive: function () {\n        return this[computedState].isStale || this[computedState].dependenciesCount > 0;\n    },\n    respondToChange: function () {\n        // Ignore \"change\" events if we've already scheduled a delayed notification\n        if (!this._notificationIsPending) {\n            this.evaluatePossiblyAsync();\n        }\n    },\n    subscribeToDependency: function (target) {\n        if (target._deferUpdates && !this[computedState].disposeWhenNodeIsRemoved) {\n            var dirtySub = target.subscribe(this.markDirty, this, 'dirty'),\n                changeSub = target.subscribe(this.respondToChange, this);\n            return {\n                _target: target,\n                dispose: function () {\n                    dirtySub.dispose();\n                    changeSub.dispose();\n                }\n            };\n        } else {\n            return target.subscribe(this.evaluatePossiblyAsync, this);\n        }\n    },\n    evaluatePossiblyAsync: function () {\n        var computedObservable = this,\n            throttleEvaluationTimeout = computedObservable.throttleEvaluation;\n        if (throttleEvaluationTimeout && throttleEvaluationTimeout >= 0) {\n            clearTimeout(this[computedState].evaluationTimeoutInstance);\n            this[computedState].evaluationTimeoutInstance = safeSetTimeout(function () {\n                computedObservable.evaluateImmediate(true /*notifyChange*/);\n            }, throttleEvaluationTimeout);\n        } else if (computedObservable._evalDelayed) {\n            computedObservable._evalDelayed();\n        } else {\n            computedObservable.evaluateImmediate(true /*notifyChange*/);\n        }\n    },\n    evaluateImmediate: function (notifyChange) {\n        var computedObservable = this,\n            state = computedObservable[computedState],\n            disposeWhen = state.disposeWhen;\n\n        if (state.isBeingEvaluated) {\n            // If the evaluation of a ko.computed causes side effects, it's possible that it will trigger its own re-evaluation.\n            // This is not desirable (it's hard for a developer to realise a chain of dependencies might cause this, and they almost\n            // certainly didn't intend infinite re-evaluations). So, for predictability, we simply prevent ko.computeds from causing\n            // their own re-evaluation. Further discussion at https://github.com/SteveSanderson/knockout/pull/387\n            return;\n        }\n\n        // Do not evaluate (and possibly capture new dependencies) if disposed\n        if (state.isDisposed) {\n            return;\n        }\n\n        if (state.disposeWhenNodeIsRemoved && !domNodeIsAttachedToDocument(state.disposeWhenNodeIsRemoved) || disposeWhen && disposeWhen()) {\n            // See comment above about suppressDisposalUntilDisposeWhenReturnsFalse\n            if (!state.suppressDisposalUntilDisposeWhenReturnsFalse) {\n                computedObservable.dispose();\n                return;\n            }\n        } else {\n            // It just did return false, so we can stop suppressing now\n            state.suppressDisposalUntilDisposeWhenReturnsFalse = false;\n        }\n\n        state.isBeingEvaluated = true;\n        try {\n            this.evaluateImmediate_CallReadWithDependencyDetection(notifyChange);\n        } finally {\n            state.isBeingEvaluated = false;\n        }\n\n        if (!state.dependenciesCount) {\n            computedObservable.dispose();\n        }\n    },\n    evaluateImmediate_CallReadWithDependencyDetection: function (notifyChange) {\n        // This function is really just part of the evaluateImmediate logic. You would never call it from anywhere else.\n        // Factoring it out into a separate function means it can be independent of the try/catch block in evaluateImmediate,\n        // which contributes to saving about 40% off the CPU overhead of computed evaluation (on V8 at least).\n\n        var computedObservable = this,\n            state = computedObservable[computedState];\n\n        // Initially, we assume that none of the subscriptions are still being used (i.e., all are candidates for disposal).\n        // Then, during evaluation, we cross off any that are in fact still being used.\n        var isInitial = state.pure ? undefined : !state.dependenciesCount,   // If we're evaluating when there are no previous dependencies, it must be the first time\n            dependencyDetectionContext = {\n                computedObservable: computedObservable,\n                disposalCandidates: state.dependencyTracking,\n                disposalCount: state.dependenciesCount\n            };\n\n        dependencyDetection.begin({\n            callbackTarget: dependencyDetectionContext,\n            callback: computedBeginDependencyDetectionCallback,\n            computed: computedObservable,\n            isInitial: isInitial\n        });\n\n        state.dependencyTracking = {};\n        state.dependenciesCount = 0;\n\n        var newValue = this.evaluateImmediate_CallReadThenEndDependencyDetection(state, dependencyDetectionContext);\n\n        if (computedObservable.isDifferent(state.latestValue, newValue)) {\n            if (!state.isSleeping) {\n                computedObservable.notifySubscribers(state.latestValue, \"beforeChange\");\n            }\n\n            state.latestValue = newValue;\n\n            if (state.isSleeping) {\n                computedObservable.updateVersion();\n            } else if (notifyChange) {\n                computedObservable.notifySubscribers(state.latestValue);\n            }\n        }\n\n        if (isInitial) {\n            computedObservable.notifySubscribers(state.latestValue, \"awake\");\n        }\n    },\n    evaluateImmediate_CallReadThenEndDependencyDetection: function (state, dependencyDetectionContext) {\n        // This function is really part of the evaluateImmediate_CallReadWithDependencyDetection logic.\n        // You'd never call it from anywhere else. Factoring it out means that evaluateImmediate_CallReadWithDependencyDetection\n        // can be independent of try/finally blocks, which contributes to saving about 40% off the CPU\n        // overhead of computed evaluation (on V8 at least).\n\n        try {\n            var readFunction = state.readFunction;\n            return state.evaluatorFunctionTarget ? readFunction.call(state.evaluatorFunctionTarget) : readFunction();\n        } finally {\n            dependencyDetection.end();\n\n            // For each subscription no longer being used, remove it from the active subscriptions list and dispose it\n            if (dependencyDetectionContext.disposalCount && !state.isSleeping) {\n                objectForEach(dependencyDetectionContext.disposalCandidates, computedDisposeDependencyCallback);\n            }\n\n            state.isStale = false;\n        }\n    },\n    peek: function () {\n        // Peek won't re-evaluate, except while the computed is sleeping or to get the initial value when \"deferEvaluation\" is set.\n        var state = this[computedState];\n        if ((state.isStale && !state.dependenciesCount) || (state.isSleeping && this.haveDependenciesChanged())) {\n            this.evaluateImmediate();\n        }\n        return state.latestValue;\n    },\n    limit: function (limitFunction) {\n        // Override the limit function with one that delays evaluation as well\n        subscribable.fn.limit.call(this, limitFunction);\n        this._evalDelayed = function () {\n            this._limitBeforeChange(this[computedState].latestValue);\n\n            this[computedState].isStale = true; // Mark as dirty\n\n            // Pass the observable to the \"limit\" code, which will access it when\n            // it's time to do the notification.\n            this._limitChange(this);\n        };\n    },\n    dispose: function () {\n        var state = this[computedState];\n        if (!state.isSleeping && state.dependencyTracking) {\n            objectForEach(state.dependencyTracking, function (id, dependency) {\n                if (dependency.dispose)\n                    dependency.dispose();\n            });\n        }\n        if (state.disposeWhenNodeIsRemoved && state.domNodeDisposalCallback) {\n            removeDisposeCallback(state.disposeWhenNodeIsRemoved, state.domNodeDisposalCallback);\n        }\n        state.dependencyTracking = null;\n        state.dependenciesCount = 0;\n        state.isDisposed = true;\n        state.isStale = false;\n        state.isSleeping = false;\n        state.disposeWhenNodeIsRemoved = null;\n        state.readFunction = null;\n        if (koOptions.debug) {\n            this._options = null;\n        }\n    }\n};\n\nvar pureComputedOverrides = {\n    beforeSubscriptionAdd: function (event) {\n        // If asleep, wake up the computed by subscribing to any dependencies.\n        var computedObservable = this,\n            state = computedObservable[computedState];\n        if (!state.isDisposed && state.isSleeping && event == 'change') {\n            state.isSleeping = false;\n            if (state.isStale || computedObservable.haveDependenciesChanged()) {\n                state.dependencyTracking = null;\n                state.dependenciesCount = 0;\n                state.isStale = true;\n                computedObservable.evaluateImmediate();\n            } else {\n                // First put the dependencies in order\n                var dependeciesOrder = [];\n                objectForEach(state.dependencyTracking, function (id, dependency) {\n                    dependeciesOrder[dependency._order] = id;\n                });\n                // Next, subscribe to each one\n                arrayForEach(dependeciesOrder, function (id, order) {\n                    var dependency = state.dependencyTracking[id],\n                        subscription = computedObservable.subscribeToDependency(dependency._target);\n                    subscription._order = order;\n                    subscription._version = dependency._version;\n                    state.dependencyTracking[id] = subscription;\n                });\n            }\n            if (!state.isDisposed) {     // test since evaluating could trigger disposal\n                computedObservable.notifySubscribers(state.latestValue, \"awake\");\n            }\n        }\n    },\n    afterSubscriptionRemove: function (event) {\n        var state = this[computedState];\n        if (!state.isDisposed && event == 'change' && !this.hasSubscriptionsForEvent('change')) {\n            objectForEach(state.dependencyTracking, function (id, dependency) {\n                if (dependency.dispose) {\n                    state.dependencyTracking[id] = {\n                        _target: dependency._target,\n                        _order: dependency._order,\n                        _version: dependency._version\n                    };\n                    dependency.dispose();\n                }\n            });\n            state.isSleeping = true;\n            this.notifySubscribers(undefined, \"asleep\");\n        }\n    },\n    getVersion: function () {\n        // Because a pure computed is not automatically updated while it is sleeping, we can't\n        // simply return the version number. Instead, we check if any of the dependencies have\n        // changed and conditionally re-evaluate the computed observable.\n        var state = this[computedState];\n        if (state.isSleeping && (state.isStale || this.haveDependenciesChanged())) {\n            this.evaluateImmediate();\n        }\n        return subscribable.fn.getVersion.call(this);\n    }\n};\n\nvar deferEvaluationOverrides = {\n    beforeSubscriptionAdd: function (event) {\n        // This will force a computed with deferEvaluation to evaluate when the first subscription is registered.\n        if (event == 'change' || event == 'beforeChange') {\n            this.peek();\n        }\n    }\n};\n\n// Note that for browsers that don't support proto assignment, the\n// inheritance chain is created manually in the ko.computed constructor\nif (canSetPrototype) {\n    setPrototypeOf(computed.fn, subscribable.fn);\n}\n\n// Set the proto chain values for ko.hasPrototype\nvar protoProp = observable.protoProperty; // == \"__ko_proto__\"\ncomputed[protoProp] = observable;\ncomputed.fn[protoProp] = computed;\n\nexport function isComputed(instance) {\n    return hasPrototype(instance, computed);\n}\n\nexport function isPureComputed(instance) {\n    return hasPrototype(instance, computed)\n        && instance[computedState] && instance[computedState].pure;\n}\n\nexport function pureComputed(evaluatorFunctionOrOptions, evaluatorFunctionTarget) {\n    if (typeof evaluatorFunctionOrOptions === 'function') {\n        return computed(evaluatorFunctionOrOptions, evaluatorFunctionTarget, {'pure':true});\n    } else {\n        evaluatorFunctionOrOptions = extend({}, evaluatorFunctionOrOptions);   // make a copy of the parameter object\n        evaluatorFunctionOrOptions.pure = true;\n        return computed(evaluatorFunctionOrOptions, evaluatorFunctionTarget);\n    }\n}\n","import {\n    extenders\n} from 'tko.observable';\n\nimport {\n    computed\n} from './computed.js';\n\nexport function throttleExtender(target, timeout) {\n    // Throttling means two things:\n\n    // (1) For dependent observables, we throttle *evaluations* so that, no matter how fast its dependencies\n    //     notify updates, the target doesn't re-evaluate (and hence doesn't notify) faster than a certain rate\n    target.throttleEvaluation = timeout;\n\n    // (2) For writable targets (observables, or writable dependent observables), we throttle *writes*\n    //     so the target cannot change value synchronously or faster than a certain rate\n    var writeTimeoutInstance = null;\n    return computed({\n        read: target,\n        write: function(value) {\n            clearTimeout(writeTimeoutInstance);\n            writeTimeoutInstance = setTimeout(function() {\n                target(value);\n            }, timeout);\n        }\n    });\n}\n\n\nextenders.throttle = throttleExtender;\n","//\n// tko.computed - Exports\n//\n// knockout -> tko changes:\n//      Deprecates `dependentObservable` (use `computed`)\n//\n\nexport {\n    computed,\n    isComputed,\n    isPureComputed,\n    pureComputed\n} from './src/computed.js';\n\n\nexport {\n    throttleExtender\n} from './src/throttleExtender';\n","import {\n  stringTrim\n} from 'tko.utils';\n\n/* eslint no-cond-assign: 0 */\n\n// The following regular expressions will be used to split an object-literal string into tokens\n\n// These two match strings, either with double quotes or single quotes\nvar stringDouble = '\"(?:[^\"\\\\\\\\]|\\\\\\\\.)*\"',\n  stringSingle = \"'(?:[^'\\\\\\\\]|\\\\\\\\.)*'\",\n  // Matches a regular expression (text enclosed by slashes), but will also match sets of divisions\n  // as a regular expression (this is handled by the parsing loop below).\n  stringRegexp = '/(?:[^/\\\\\\\\]|\\\\\\\\.)*/\\w*',\n  // These characters have special meaning to the parser and must not appear in the middle of a\n  // token, except as part of a string.\n  specials = ',\"\\'{}()/:[\\\\]',\n  // Match text (at least two characters) that does not contain any of the above special characters,\n  // although some of the special characters are allowed to start it (all but the colon and comma).\n  // The text can contain spaces, but leading or trailing spaces are skipped.\n  everyThingElse = '[^\\\\s:,/][^' + specials + ']*[^\\\\s' + specials + ']',\n  // Match any non-space character not matched already. This will match colons and commas, since they're\n  // not matched by \"everyThingElse\", but will also match any other single character that wasn't already\n  // matched (for example: in \"a: 1, b: 2\", each of the non-space characters will be matched by oneNotSpace).\n  oneNotSpace = '[^\\\\s]',\n\n  // Create the actual regular expression by or-ing the above strings. The order is important.\n  bindingToken = RegExp(stringDouble + '|' + stringSingle + '|' + stringRegexp + '|' + everyThingElse + '|' + oneNotSpace, 'g'),\n\n  // Match end of previous token to determine whether a slash is a division or regex.\n  divisionLookBehind = /[\\])\"'A-Za-z0-9_$]+$/,\n  keywordRegexLookBehind = {\n    'in': 1,\n    'return': 1,\n    'typeof': 1\n  };\n\n/**\n * Break a binding string (data-bind='x: val, y: ..') into a stable array\n * of {key: value}.\n */\nexport default function parseObjectLiteral(objectLiteralString) {\n  // Trim leading and trailing spaces from the string\n  var str = stringTrim(objectLiteralString);\n\n  // Trim braces '{' surrounding the whole object literal\n  if (str.charCodeAt(0) === 123) str = str.slice(1, -1);\n\n  // Split into tokens\n  var result = [],\n    toks = str.match(bindingToken),\n    key, values = [],\n    depth = 0;\n\n  if (!toks) { return [] }\n\n  // Append a comma so that we don't need a separate code block to deal with the last item\n  toks.push(',');\n\n  for (var i = 0, tok; tok = toks[i]; ++i) {\n    var c = tok.charCodeAt(0);\n    // A comma signals the end of a key/value pair if depth is zero\n    if (c === 44) { // \",\"\n      if (depth <= 0) {\n        result.push((key && values.length) ? {\n          key: key,\n          value: values.join('')\n        } : {\n          'unknown': key || values.join('')\n        });\n        key = depth = 0;\n        values = [];\n        continue;\n      }\n      // Simply skip the colon that separates the name and value\n    } else if (c === 58) { // \":\"\n      if (!depth && !key && values.length === 1) {\n        key = values.pop();\n        continue;\n      }\n      // A set of slashes is initially matched as a regular expression, but could be division\n    } else if (c === 47 && i && tok.length > 1) { // \"/\"\n      // Look at the end of the previous token to determine if the slash is actually division\n      var match = toks[i - 1].match(divisionLookBehind);\n      if (match && !keywordRegexLookBehind[match[0]]) {\n        // The slash is actually a division punctuator; re-parse the remainder of the string (not including the slash)\n        str = str.substr(str.indexOf(tok) + 1);\n        toks = str.match(bindingToken);\n        toks.push(',');\n        i = -1;\n        // Continue with just the slash\n        tok = '/';\n      }\n      // Increment depth for parentheses, braces, and brackets so that interior commas are ignored\n    } else if (c === 40 || c === 123 || c === 91) { // '(', '{', '['\n      ++depth;\n    } else if (c === 41 || c === 125 || c === 93) { // ')', '}', ']'\n      --depth;\n      // The key will be the first token; if it's a string, trim the quotes\n    } else if (!key && !values.length && (c === 34 || c === 39)) { // '\"', \"'\"\n      tok = tok.slice(1, -1);\n    }\n    values.push(tok);\n  }\n\n  return result;\n}\n","\nimport {\n  createSymbolOrString\n} from 'tko.utils';\n\nimport {\n  unwrap\n} from 'tko.observable';\n\n\nexport default function Node(lhs, op, rhs) {\n  this.lhs = lhs;\n  this.op = op;\n  this.rhs = rhs;\n}\n\n\n/* Just a placeholder */\nfunction LAMBDA() {}\n\n/**\n * @ operator - recursively call the identifier if it's a function\n * @param  {operand} a ignored\n * @param  {operand} b The variable to be called (if a function) and unwrapped\n * @return {value}   The result.\n */\nfunction unwrapOrCall(a, b) {\n  while (typeof b === 'function') { b = b(); }\n  return b;\n}\n\n\nvar operators = {\n  // unary\n  '@': unwrapOrCall,\n  '=>': LAMBDA,\n  '!': function not(a, b) { return !b; },\n  '!!': function notnot(a, b) { return !!b; },\n  '++': function preinc(a, b) { return ++b; },\n  '--': function preinc(a, b) { return --b; },\n  // mul/div\n  '*': function mul(a, b) { return a * b; },\n  '/': function div(a, b) { return a / b; },\n  '%': function mod(a, b) { return a % b; },\n  // sub/add\n  '+': function add(a, b) { return a + b; },\n  '-': function sub(a, b) { return (a || 0) - (b || 0); },\n  '&-': function neg(a, b) { return -1 * b; },\n  // relational\n  '<': function lt(a, b) { return a < b; },\n  '<=': function le(a, b) { return a <= b; },\n  '>': function gt(a, b) { return a > b; },\n  '>=': function ge(a, b) { return a >= b; },\n  //    TODO: 'in': function (a, b) { return a in b; },\n  //    TODO: 'instanceof': function (a, b) { return a instanceof b; },\n  // equality\n  '==': function equal(a, b) { return a === b; },\n  '!=': function ne(a, b) { return a !== b; },\n  '===': function sequal(a, b) { return a === b; },\n  '!==': function sne(a, b) { return a !== b; },\n  // Fuzzy (bad) equality\n  '~==': function equal(a, b) { return a == b; },\n  '~!=': function ne(a, b) { return a != b; },\n  // bitwise\n  '&': function bit_and(a, b) { return a & b; },\n  '^': function xor(a, b) { return a ^ b; },\n  '|': function bit_or(a, b) { return a | b; },\n  // logic\n  '&&': function logic_and(a, b) { return a && b; },\n  '||': function logic_or(a, b) { return a || b; },\n  // Access\n  '.': function member(a, b) { return a[b]; },\n  '[': function member(a, b) { return a[b]; },\n  // conditional/ternary\n  '?': function ternary(a, b) { return Node.value_of(a ? b.yes : b.no); },\n\n  // Function-Call\n  'call': function (a, b) { return a.apply(null, b); },\n};\n\n/* Order of precedence from:\nhttps://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Operator_Precedence#Table\n*/\n\n  // Our operator - unwrap/call\noperators['@'].precedence = 21;\n\n  // lambda\noperators['=>'].precedence = 20;\n\n  // Member\noperators['.'].precedence = 19;\noperators['['].precedence = 19;\n\n  // Logical not\noperators['!'].precedence = 16;\noperators['!!'].precedence = 16; // explicit double-negative\n\n  // Prefix inc/dec\noperators['++'].precedence = 16;\noperators['--'].precedence = 16;\noperators['&-'].precedence = 16;\n\n  // mul/div/remainder\noperators['%'].precedence = 14;\noperators['*'].precedence = 14;\noperators['/'].precedence = 14;\n\n  // add/sub\noperators['+'].precedence = 13;\noperators['-'].precedence = 13;\n\n  // bitwise\noperators['|'].precedence = 12;\noperators['^'].precedence = 11;\noperators['&'].precedence = 10;\n\n  // comparison\noperators['<'].precedence = 11;\noperators['<='].precedence = 11;\noperators['>'].precedence = 11;\noperators['>='].precedence = 11;\n\n  // operators['in'].precedence = 8;\n  // operators['instanceof'].precedence = 8;\n  // equality\noperators['=='].precedence = 10;\noperators['!='].precedence = 10;\noperators['==='].precedence = 10;\noperators['!=='].precedence = 10;\n\n  // Fuzzy operators for backwards compat with the \"evil twins\"\n  //    http://stackoverflow.com/questions/359494\noperators['~=='].precedence = 10;\noperators['~!='].precedence = 10;\n\n  // logic\noperators['&&'].precedence = 6;\noperators['||'].precedence = 5;\n\n  // Conditional/ternary\noperators['?'].precedence = 4;\n\n  // Call a function\noperators['call'].precedence = 1;\n\n\n\nNode.operators = operators;\n\n\nNode.prototype.get_leaf_value = function (leaf, member_of) {\n  if (typeof(leaf) === 'function') {\n    // Expressions on observables are nonsensical, so we unwrap any\n    // function values (e.g. identifiers).\n    return unwrap(leaf());\n  }\n\n  // primitives\n  if (typeof(leaf) !== 'object') {\n    return member_of ? member_of[leaf] : leaf;\n  }\n\n  if (leaf === null) { return leaf; }\n\n  // Identifiers and Expressions\n  if (leaf[Node.isExpressionOrIdentifierSymbol]) {\n    // lhs is passed in as the parent of the leaf. It will be defined in\n    // cases like a.b.c as 'a' for 'b' then as 'b' for 'c'.\n    return unwrap(leaf.get_value(member_of));\n  }\n\n  if (leaf instanceof Node) {\n    return leaf.get_node_value(member_of);\n  }\n\n  // Plain object/class.\n  return leaf;\n  // throw new Error(\"Invalid type of leaf node: \" + leaf);\n};\n\n/**\n * Return a function that calculates and returns an expression's value\n * when called.\n * @param  {array} ops  The operations to perform\n * @return {function}   The function that calculates the expression.\n *\n * Note that for a lambda, we do not evaluate the RHS expression until\n * the lambda is called.\n */\nNode.prototype.get_node_value = function () {\n  var node = this;\n\n  if (node.op === LAMBDA) {\n    return function () { return node.get_leaf_value(node.rhs); };\n  }\n\n  return node.op(node.get_leaf_value(node.lhs),\n                 node.get_leaf_value(node.rhs));\n};\n\n\n//\n// Class variables.\n//\nNode.isExpressionOrIdentifierSymbol = createSymbolOrString(\"isExpressionOrIdentifierSymbol\");\n\n\nNode.value_of = function value_of(item) {\n  if (item && item[Node.isExpressionOrIdentifierSymbol]) {\n    return item.get_value();\n  } else if (item instanceof Node) {\n    return item.get_node_value();\n  }\n  return item;\n};\n\n\n/**\n*  Convert an array of nodes to an executable tree.\n*  @return {object} An object with a `lhs`, `rhs` and `op` key, corresponding\n*                      to the left hand side, right hand side, and\n*                      operation function.\n*/\nNode.create_root = function create_root(nodes) {\n  var root, leaf, op, value;\n\n  // Prime the leaf = root node.\n  leaf = root = new Node(nodes.shift(), nodes.shift(), nodes.shift());\n\n  while (nodes) {\n    op = nodes.shift();\n    value = nodes.shift();\n    if (!op) {\n      break;\n    }\n    if (op.precedence < root.op.precedence) {\n      // rebase\n      root = new Node(root, op, value);\n      leaf = root;\n    } else {\n      leaf.rhs = new Node(leaf.rhs, op, value);\n      leaf = leaf.rhs;\n    }\n  }\n  // console.log(\"tree\", root)\n  return root;\n};","\nimport Node from './node';\n\nexport default function Expression(nodes) {\n  this.nodes = nodes;\n  this.root = Node.create_root(nodes);\n}\n\n// Exports for testing.\nExpression.operators = Node.operators;\nExpression.Node = Node;\n\n\n/**\n * Return the value of `this` Expression instance.\n *\n */\nExpression.prototype.get_value = function () {\n  if (!this.root) {\n    this.root = Node.create_root(this.nodes);\n  }\n  return this.root.get_node_value();\n};\n\n\nExpression.prototype[Node.isExpressionOrIdentifierSymbol] = true;","\nimport Node from './node';\n\n\nexport default function Arguments(parser, args) {\n  this.parser = parser;\n  this.args = args;\n}\n\n\nArguments.prototype.get_value = function get_value(/* parent */) {\n  var dereffed_args = [];\n  for (var i = 0, j = this.args.length; i < j; ++i) {\n    dereffed_args.push(Node.value_of(this.args[i]));\n  }\n  return dereffed_args;\n};\n\n\nArguments.prototype[Node.isExpressionOrIdentifierSymbol] = true;\n","\nimport Node from './node';\nimport Arguments from './arguments';\n\nimport {\n  isWriteableObservable, isObservable\n} from 'tko.observable';\n\n\nexport default function Identifier(parser, token, dereferences) {\n  this.token = token;\n  this.dereferences = dereferences;\n  this.parser = parser;\n}\n\n\n\n/**\n * Return the value of the given\n *\n * @param  {Object} parent  (optional) source of the identifier e.g. for\n *                          membership. e.g. `a.b`, one would pass `a` in as\n *                          the parent when calling lookup_value for `b`.\n * @return {Mixed}          The value of the token for this Identifier.\n */\nIdentifier.prototype.lookup_value = function (parent) {\n  var token = this.token,\n    parser = this.parser,\n    $context = parser.context,\n    $data = $context.$data || {},\n    globals = parser.globals || {};\n\n  if (parent) {\n    return Node.value_of(parent)[token];\n  }\n\n  // short circuits\n  switch (token) {\n  case '$element': return parser.node;\n  case '$context': return $context;\n  case 'this': case '$data': return $context.$data;\n  default:\n  }\n  // instanceof Object covers 1. {}, 2. [], 3. function() {}, 4. new *;  it excludes undefined, null, primitives.\n  if ($data instanceof Object && token in $data) { return $data[token]; }\n  if (token in $context) { return $context[token]; }\n  if (token in globals) { return globals[token]; }\n\n  throw new Error(\"The variable \\\"\" + token + \"\\\" was not found on $data, $context, or knockout options.bindingGlobals.\");\n};\n\n/**\n * Apply all () and [] functions on the identifier to the lhs value e.g.\n * a()[3] has deref functions that are essentially this:\n *     [_deref_call, _deref_this where this=3]\n *\n * @param  {mixed} value  Should be an object.\n * @return {mixed}        The dereferenced value.\n *\n * [1] We want to bind any function that is a method of an object, but not\n *     corrupt any values (e.g. computed()s).   e.g. Running x.bind(obj) where\n *     we're given `data-bind='binding: obj.x'` and x is a computed will\n *     break the computed's `this` and it will stop working as expected.\n *\n *     The test `!last_value.hasOwnProperty(member)`\n *     distinguishes between functions on the prototype chain (prototypal\n *     members) and value-members added directly to the object.  This may\n *     not be the canonical test for this relationship, but it succeeds\n *     in the known test cases.\n *\n *     See: `this` tests of our dereference function.\n */\nIdentifier.prototype.dereference = function (value) {\n  var member,\n    refs = this.dereferences || [],\n    parser = this.parser,\n    $context = parser.context || {},\n    $data = $context.$data || {},\n    last_value,  // becomes `this` in function calls to object properties.\n    i, n;\n\n  for (i = 0, n = refs.length; i < n; ++i) {\n    member = Node.value_of(refs[i]);\n\n    if (typeof value === 'function' && refs[i] instanceof Arguments) {\n      // fn(args)\n      value = value.apply(last_value || $data, member);\n      last_value = value;\n    } else {\n      // obj[x] or obj.x dereference.  Note that obj may be a function.\n      last_value = value;\n      value = Node.value_of(value[member]);\n    }\n  }\n\n  // [1] See note above.\n  if (typeof value === 'function' && n > 0 && last_value !== value &&\n      !last_value.hasOwnProperty(member)) {\n    return value.bind(last_value);\n  }\n\n  return value;\n};\n\n/**\n * Return the value as one would get it from the top-level i.e.\n * $data.token/$context.token/globals.token; this does not return intermediate\n * values on a chain of members i.e. $data.hello.there -- requesting the\n * Identifier('there').value will return $data/$context/globals.there.\n *\n * This will dereference using () or [arg] member.\n * @param  {object | Identifier | Expression} parent\n * @return {mixed}  Return the primitive or an accessor.\n */\nIdentifier.prototype.get_value = function (parent) {\n  return this.dereference(this.lookup_value(parent));\n};\n\n\nIdentifier.prototype.assign = function assign(object, property, value) {\n  if (isWriteableObservable(object[property])) {\n    object[property](value);\n  } else if (!isObservable(object[property])) {\n    object[property] = value;\n  }\n};\n\n\n/**\n * Set the value of the Identifier.\n *\n * @param {Mixed} new_value The value that Identifier is to be set to.\n */\nIdentifier.prototype.set_value = function (new_value) {\n  var parser = this.parser,\n    $context = parser.context,\n    $data = $context.$data || {},\n    globals = parser.globals || {},\n    refs = this.dereferences || [],\n    leaf = this.token,\n    i, n, root;\n\n  if (Object.hasOwnProperty.call($data, leaf)) {\n    root = $data;\n  } else if (Object.hasOwnProperty.call($context, leaf)) {\n    root = $context;\n  } else if (Object.hasOwnProperty.call(globals, leaf)) {\n    root = globals;\n  } else {\n    throw new Error(\"Identifier::set_value -- \" +\n      \"The property '\" + leaf + \"' does not exist \" +\n      \"on the $data, $context, or globals.\");\n  }\n\n  // Degenerate case. {$data|$context|global}[leaf] = something;\n  n = refs.length;\n  if (n === 0) {\n    this.assign(root, leaf, new_value);\n    return;\n  }\n\n  // First dereference is {$data|$context|global}[token].\n  root = root[leaf];\n\n  // We cannot use this.dereference because that gives the leaf; to evoke\n  // the ES5 setter we have to call `obj[leaf] = new_value`\n  for (i = 0; i < n - 1; ++i) {\n    leaf = refs[i];\n    if (leaf instanceof Arguments) {\n      root = root();\n    } else {\n      root = root[Node.value_of(leaf)];\n    }\n  }\n\n  // We indicate that a dereference is a function when it is `true`.\n  if (refs[i] === true) {\n    throw new Error(\"Cannot assign a value to a function.\");\n  }\n\n  // Call the setter for the leaf.\n  if (refs[i]) {\n    this.assign(root, Node.value_of(refs[i]), new_value);\n  }\n};\n\n/**\n * The following regular expressions were generated by\n *  https://mathiasbynens.be/demo/javascript-identifier-regex\n */\nIdentifier.ID_Start = /[\\$A-Z_a-z\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0370-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0620-\\u064A\\u066E\\u066F\\u0671-\\u06D3\\u06D5\\u06E5\\u06E6\\u06EE\\u06EF\\u06FA-\\u06FC\\u06FF\\u0710\\u0712-\\u072F\\u074D-\\u07A5\\u07B1\\u07CA-\\u07EA\\u07F4\\u07F5\\u07FA\\u0800-\\u0815\\u081A\\u0824\\u0828\\u0840-\\u0858\\u08A0-\\u08B4\\u0904-\\u0939\\u093D\\u0950\\u0958-\\u0961\\u0971-\\u0980\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BD\\u09CE\\u09DC\\u09DD\\u09DF-\\u09E1\\u09F0\\u09F1\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A59-\\u0A5C\\u0A5E\\u0A72-\\u0A74\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABD\\u0AD0\\u0AE0\\u0AE1\\u0AF9\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3D\\u0B5C\\u0B5D\\u0B5F-\\u0B61\\u0B71\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BD0\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D\\u0C58-\\u0C5A\\u0C60\\u0C61\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBD\\u0CDE\\u0CE0\\u0CE1\\u0CF1\\u0CF2\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D\\u0D4E\\u0D5F-\\u0D61\\u0D7A-\\u0D7F\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0E01-\\u0E30\\u0E32\\u0E33\\u0E40-\\u0E46\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB0\\u0EB2\\u0EB3\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EDC-\\u0EDF\\u0F00\\u0F40-\\u0F47\\u0F49-\\u0F6C\\u0F88-\\u0F8C\\u1000-\\u102A\\u103F\\u1050-\\u1055\\u105A-\\u105D\\u1061\\u1065\\u1066\\u106E-\\u1070\\u1075-\\u1081\\u108E\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u1380-\\u138F\\u13A0-\\u13F5\\u13F8-\\u13FD\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176C\\u176E-\\u1770\\u1780-\\u17B3\\u17D7\\u17DC\\u1820-\\u1877\\u1880-\\u18A8\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1950-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19B0-\\u19C9\\u1A00-\\u1A16\\u1A20-\\u1A54\\u1AA7\\u1B05-\\u1B33\\u1B45-\\u1B4B\\u1B83-\\u1BA0\\u1BAE\\u1BAF\\u1BBA-\\u1BE5\\u1C00-\\u1C23\\u1C4D-\\u1C4F\\u1C5A-\\u1C7D\\u1CE9-\\u1CEC\\u1CEE-\\u1CF1\\u1CF5\\u1CF6\\u1D00-\\u1DBF\\u1E00-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u2071\\u207F\\u2090-\\u209C\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CEE\\u2CF2\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D80-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2E2F\\u3005-\\u3007\\u3021-\\u3029\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FD5\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA61F\\uA62A\\uA62B\\uA640-\\uA66E\\uA67F-\\uA69D\\uA6A0-\\uA6EF\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA7AD\\uA7B0-\\uA7B7\\uA7F7-\\uA801\\uA803-\\uA805\\uA807-\\uA80A\\uA80C-\\uA822\\uA840-\\uA873\\uA882-\\uA8B3\\uA8F2-\\uA8F7\\uA8FB\\uA8FD\\uA90A-\\uA925\\uA930-\\uA946\\uA960-\\uA97C\\uA984-\\uA9B2\\uA9CF\\uA9E0-\\uA9E4\\uA9E6-\\uA9EF\\uA9FA-\\uA9FE\\uAA00-\\uAA28\\uAA40-\\uAA42\\uAA44-\\uAA4B\\uAA60-\\uAA76\\uAA7A\\uAA7E-\\uAAAF\\uAAB1\\uAAB5\\uAAB6\\uAAB9-\\uAABD\\uAAC0\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEA\\uAAF2-\\uAAF4\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB65\\uAB70-\\uABE2\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D\\uFB1F-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF21-\\uFF3A\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]/;\n\nIdentifier.ID_Continue = /[\\$0-9A-Z_a-z\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0300-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u0483-\\u0487\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u0591-\\u05BD\\u05BF\\u05C1\\u05C2\\u05C4\\u05C5\\u05C7\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0610-\\u061A\\u0620-\\u0669\\u066E-\\u06D3\\u06D5-\\u06DC\\u06DF-\\u06E8\\u06EA-\\u06FC\\u06FF\\u0710-\\u074A\\u074D-\\u07B1\\u07C0-\\u07F5\\u07FA\\u0800-\\u082D\\u0840-\\u085B\\u08A0-\\u08B4\\u08E3-\\u0963\\u0966-\\u096F\\u0971-\\u0983\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BC-\\u09C4\\u09C7\\u09C8\\u09CB-\\u09CE\\u09D7\\u09DC\\u09DD\\u09DF-\\u09E3\\u09E6-\\u09F1\\u0A01-\\u0A03\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A3C\\u0A3E-\\u0A42\\u0A47\\u0A48\\u0A4B-\\u0A4D\\u0A51\\u0A59-\\u0A5C\\u0A5E\\u0A66-\\u0A75\\u0A81-\\u0A83\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABC-\\u0AC5\\u0AC7-\\u0AC9\\u0ACB-\\u0ACD\\u0AD0\\u0AE0-\\u0AE3\\u0AE6-\\u0AEF\\u0AF9\\u0B01-\\u0B03\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3C-\\u0B44\\u0B47\\u0B48\\u0B4B-\\u0B4D\\u0B56\\u0B57\\u0B5C\\u0B5D\\u0B5F-\\u0B63\\u0B66-\\u0B6F\\u0B71\\u0B82\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BBE-\\u0BC2\\u0BC6-\\u0BC8\\u0BCA-\\u0BCD\\u0BD0\\u0BD7\\u0BE6-\\u0BEF\\u0C00-\\u0C03\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D-\\u0C44\\u0C46-\\u0C48\\u0C4A-\\u0C4D\\u0C55\\u0C56\\u0C58-\\u0C5A\\u0C60-\\u0C63\\u0C66-\\u0C6F\\u0C81-\\u0C83\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBC-\\u0CC4\\u0CC6-\\u0CC8\\u0CCA-\\u0CCD\\u0CD5\\u0CD6\\u0CDE\\u0CE0-\\u0CE3\\u0CE6-\\u0CEF\\u0CF1\\u0CF2\\u0D01-\\u0D03\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D-\\u0D44\\u0D46-\\u0D48\\u0D4A-\\u0D4E\\u0D57\\u0D5F-\\u0D63\\u0D66-\\u0D6F\\u0D7A-\\u0D7F\\u0D82\\u0D83\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0DCA\\u0DCF-\\u0DD4\\u0DD6\\u0DD8-\\u0DDF\\u0DE6-\\u0DEF\\u0DF2\\u0DF3\\u0E01-\\u0E3A\\u0E40-\\u0E4E\\u0E50-\\u0E59\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB9\\u0EBB-\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EC8-\\u0ECD\\u0ED0-\\u0ED9\\u0EDC-\\u0EDF\\u0F00\\u0F18\\u0F19\\u0F20-\\u0F29\\u0F35\\u0F37\\u0F39\\u0F3E-\\u0F47\\u0F49-\\u0F6C\\u0F71-\\u0F84\\u0F86-\\u0F97\\u0F99-\\u0FBC\\u0FC6\\u1000-\\u1049\\u1050-\\u109D\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u135D-\\u135F\\u1380-\\u138F\\u13A0-\\u13F5\\u13F8-\\u13FD\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1714\\u1720-\\u1734\\u1740-\\u1753\\u1760-\\u176C\\u176E-\\u1770\\u1772\\u1773\\u1780-\\u17D3\\u17D7\\u17DC\\u17DD\\u17E0-\\u17E9\\u180B-\\u180D\\u1810-\\u1819\\u1820-\\u1877\\u1880-\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1920-\\u192B\\u1930-\\u193B\\u1946-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19B0-\\u19C9\\u19D0-\\u19D9\\u1A00-\\u1A1B\\u1A20-\\u1A5E\\u1A60-\\u1A7C\\u1A7F-\\u1A89\\u1A90-\\u1A99\\u1AA7\\u1AB0-\\u1ABD\\u1B00-\\u1B4B\\u1B50-\\u1B59\\u1B6B-\\u1B73\\u1B80-\\u1BF3\\u1C00-\\u1C37\\u1C40-\\u1C49\\u1C4D-\\u1C7D\\u1CD0-\\u1CD2\\u1CD4-\\u1CF6\\u1CF8\\u1CF9\\u1D00-\\u1DF5\\u1DFC-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u200C\\u200D\\u203F\\u2040\\u2054\\u2071\\u207F\\u2090-\\u209C\\u20D0-\\u20DC\\u20E1\\u20E5-\\u20F0\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D7F-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2DE0-\\u2DFF\\u2E2F\\u3005-\\u3007\\u3021-\\u302F\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u3099\\u309A\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FD5\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA62B\\uA640-\\uA66F\\uA674-\\uA67D\\uA67F-\\uA6F1\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA7AD\\uA7B0-\\uA7B7\\uA7F7-\\uA827\\uA840-\\uA873\\uA880-\\uA8C4\\uA8D0-\\uA8D9\\uA8E0-\\uA8F7\\uA8FB\\uA8FD\\uA900-\\uA92D\\uA930-\\uA953\\uA960-\\uA97C\\uA980-\\uA9C0\\uA9CF-\\uA9D9\\uA9E0-\\uA9FE\\uAA00-\\uAA36\\uAA40-\\uAA4D\\uAA50-\\uAA59\\uAA60-\\uAA76\\uAA7A-\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEF\\uAAF2-\\uAAF6\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB65\\uAB70-\\uABEA\\uABEC\\uABED\\uABF0-\\uABF9\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE00-\\uFE0F\\uFE20-\\uFE2F\\uFE33\\uFE34\\uFE4D-\\uFE4F\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF10-\\uFF19\\uFF21-\\uFF3A\\uFF3F\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]/;\n\n/**\n * Determine if a character is a valid item in an identifier.\n * Note that we do not check whether the first item is a number, nor do we\n * support unicode identifiers here.\n *\n * From:  http://stackoverflow.com/a/9337047\n * @param  {String}  ch  The character\n * @return {Boolean}     True if this is a valid identifier\n */\n// function is_identifier_char(ch) {\n//   return (ch >= 'A' && ch <= 'Z') ||\n//          (ch >= 'a' && ch <= 'z') ||\n//          (ch >= '0' && ch <= 9) ||\n//           ch === '_' || ch === '$';\n// }\nIdentifier.is_valid_start_char = function(ch) {\n  return Identifier.ID_Start.test(ch);\n};\n\nIdentifier.is_valid_continue_char = function(ch) {\n  return Identifier.ID_Continue.test(ch);\n};\n\n\nIdentifier.prototype[Node.isExpressionOrIdentifierSymbol] = true;","\nimport Node from './node';\n\nexport default function Ternary(yes, no) {\n  this.yes = yes;\n  this.no = no;\n}\n\nTernary.prototype[Node.isExpressionOrIdentifierSymbol] = true;\nTernary.prototype.get_value = function () { return this; };\n","/**\n * Originally based on (public domain):\n * https://github.com/douglascrockford/JSON-js/blob/master/json_parse.js\n */\n\nimport {\n  options, objectForEach, clonePlainObjectDeep, extend\n} from 'tko.utils';\n\nimport Expression from './expression';\nimport Identifier from './identifier';\nimport Arguments from './arguments';\nimport Ternary from './ternary';\nimport Node from './node';\n\nvar escapee = {\n    \"'\": \"'\",\n    '\"':  '\"',\n    \"`\":  \"`\",\n    '\\\\': '\\\\',\n    '/':  '/',\n    '$':  '$',\n    b:    '\\b',\n    f:    '\\f',\n    n:    '\\n',\n    r:    '\\r',\n    t:    '\\t'\n  },\n  operators = Node.operators;\n\n/**\n * Construct a new Parser instance with new Parser(node, context)\n * @param {Node} node    The DOM element from which we parsed the\n *                         content.\n * @param {object} context The Knockout context.\n * @param {object} globals An object containing any desired globals.\n */\nexport default function Parser(node, context, globals) {\n  this.node = node;\n  this.context = context;\n  this.globals = globals || {};\n}\n\n// Exposed for testing.\nParser.Expression = Expression;\nParser.Identifier = Identifier;\nParser.Arguments = Arguments;\nParser.Node = Node;\n\nParser.prototype.white = function () {\n  var ch = this.ch;\n  while (ch && ch <= ' ') {\n    ch = this.next();\n  }\n  return this.comment(ch);\n};\n\n/**\n * Slurp any C or C++ style comments\n */\nParser.prototype.comment = function (ch) {\n  if (ch !== '/') { return ch; }\n  var p = this.at;\n  var second = this.lookahead();\n  if (second === '/') {\n    while(ch) {\n      ch = this.next();\n      if (ch === '\\n' || ch === '\\r') { break; }\n    }\n    ch = this.next();\n  } else if (second === '*') {\n    while(ch) {\n      ch = this.next();\n      if (ch === '*' && this.lookahead() === '/') {\n        this.next();\n        break;\n      }\n    }\n    if (!ch) {\n      this.error(\"Unclosed comment, starting at character \" + p);\n    }\n    this.next();\n    return this.white();\n  }\n  return ch;\n};\n\nParser.prototype.next = function (c) {\n  if (c && c !== this.ch) {\n    this.error(\"Expected '\" + c + \"' but got '\" + this.ch + \"'\");\n  }\n  this.ch = this.text.charAt(this.at);\n  this.at += 1;\n  return this.ch;\n};\n\nParser.prototype.lookahead = function() {\n  return this.text[this.at];\n};\n\nParser.prototype.error = function (m) {\n  throw {\n    name:    'SyntaxError',\n    message: m,\n    at:      this.at,\n    text:    this.text\n  };\n};\n\nParser.prototype.name = function () {\n  // A name of a binding\n  var name = '',\n    enclosed_by;\n  this.white();\n\n  var ch = this.ch;\n\n  if (ch === \"'\" || ch === '\"') {\n    enclosed_by = ch;\n    ch = this.next();\n  }\n\n  while (ch) {\n    if (enclosed_by && ch === enclosed_by) {\n      this.white();\n      ch = this.next();\n      if (ch !== ':' && ch !== ',') {\n        this.error(\n          \"Object name: \" + name + \" missing closing \" + enclosed_by\n        );\n      }\n      return name;\n    } else if (ch === ':' || ch <= ' ' || ch === ',' || ch === '|') {\n      return name;\n    }\n    name += ch;\n    ch = this.next();\n  }\n\n  return name;\n};\n\nParser.prototype.number = function () {\n  var number,\n    string = '',\n    ch = this.ch;\n\n  if (ch === '-') {\n    string = '-';\n    ch = this.next('-');\n  }\n  while (ch >= '0' && ch <= '9') {\n    string += ch;\n    ch = this.next();\n  }\n  if (ch === '.') {\n    string += '.';\n    ch = this.next();\n    while (ch && ch >= '0' && ch <= '9') {\n      string += ch;\n      ch = this.next();\n    }\n  }\n  if (ch === 'e' || ch === 'E') {\n    string += ch;\n    ch = this.next();\n    if (ch === '-' || ch === '+') {\n      string += ch;\n      ch = this.next();\n    }\n    while (ch >= '0' && ch <= '9') {\n      string += ch;\n      ch = this.next();\n    }\n  }\n  number = +string;\n  if (!isFinite(number)) {\n    options.onError(new Error(\"Bad number: \" + number + \" in \" + string));\n  } else {\n    return number;\n  }\n};\n\n/**\n * Add a property to 'object' that equals the given value.\n * @param  {Object} object The object to add the value to.\n * @param  {String} key    object[key] is set to the given value.\n * @param  {mixed}  value  The value, may be a primitive or a function. If a\n *                         function it is unwrapped as a property.\n */\nParser.prototype.object_add_value = function (object, key, value) {\n  if (value && value[Node.isExpressionOrIdentifierSymbol]) {\n    Object.defineProperty(object, key, {\n      get: function () { return value.get_value(); },\n      enumerable: true\n    });\n  } else if (value instanceof Node) {\n    Object.defineProperty(object, key, {\n      get: function () { return value.get_node_value(); },\n      enumerable: true\n    });\n  } else {\n    // primitives\n    object[key] = value;\n  }\n};\n\nParser.prototype.object = function () {\n  var key,\n    object = {},\n    ch = this.ch;\n\n  if (ch === '{') {\n    this.next('{');\n    ch = this.white();\n    if (ch === '}') {\n      ch = this.next('}');\n      return object;\n    }\n    while (ch) {\n      if (ch === '\"' || ch === \"'\" || ch === \"`\") {\n        key = this.string();\n      } else {\n        key = this.name();\n      }\n      this.white();\n      ch = this.next(':');\n      if (Object.hasOwnProperty.call(object, key)) {\n        this.error('Duplicate key \"' + key + '\"');\n      }\n\n      this.object_add_value(object, key, this.expression());\n\n      ch = this.white();\n      if (ch === '}') {\n        ch = this.next('}');\n        return object;\n      }\n\n      this.next(',');\n      ch = this.white();\n    }\n  }\n  this.error(\"Bad object\");\n};\n\n\n/**\n * Read up to delim and return the string\n * @param  {string} delim The delimiter, either ' or \"\n * @return {string}       The string read.\n */\nParser.prototype.read_string = function (delim) {\n  var string = '',\n    nodes = [''],\n    plus_op = operators['+'],\n    hex,\n    i,\n    uffff,\n    interpolate = delim === \"`\",\n    ch = this.next();\n\n  while (ch) {\n    if (ch === delim) {\n      ch = this.next();\n      if (interpolate) { nodes.push(plus_op); }\n      nodes.push(string);\n      return nodes;\n    }\n    if (ch === '\\\\') {\n      ch = this.next();\n      if (ch === 'u') {\n        uffff = 0;\n        for (i = 0; i < 4; i += 1) {\n          hex = parseInt(ch = this.next(), 16);\n          if (!isFinite(hex)) {\n            break;\n          }\n          uffff = uffff * 16 + hex;\n        }\n        string += String.fromCharCode(uffff);\n      } else if (typeof escapee[ch] === 'string') {\n        string += escapee[ch];\n      } else {\n        break;\n      }\n    } else if (interpolate && ch === \"$\") {\n      ch = this.next();\n      if (ch === '{') {\n        this.next('{');\n        nodes.push(plus_op);\n        nodes.push(string);\n        nodes.push(plus_op);\n        nodes.push(this.expression());\n        string = '';\n        // this.next('}');\n      } else {\n        string += \"$\" + ch;\n      }\n    } else {\n      string += ch;\n    }\n    ch = this.next();\n  }\n\n  this.error(\"Bad string\");\n};\n\n\nParser.prototype.string = function () {\n  var ch = this.ch;\n  if (ch === '\"') {\n    return this.read_string('\"').join('');\n  } else if (ch === \"'\") {\n    return this.read_string(\"'\").join('');\n  } else if (ch === \"`\") {\n    return Node.create_root(this.read_string(\"`\"));\n  }\n\n  this.error(\"Bad string\");\n};\n\nParser.prototype.array = function () {\n  var array = [],\n    ch = this.ch;\n\n  if (ch === '[') {\n    ch = this.next('[');\n    this.white();\n    if (ch === ']') {\n      ch = this.next(']');\n      return array;\n    }\n    while (ch) {\n      array.push(this.expression());\n      ch = this.white();\n      if (ch === ']') {\n        ch = this.next(']');\n        return array;\n      }\n      this.next(',');\n      ch = this.white();\n    }\n  }\n  this.error(\"Bad array\");\n};\n\nParser.prototype.value = function () {\n  var ch;\n  this.white();\n  ch = this.ch;\n  switch (ch) {\n  case '{': return this.object();\n  case '[': return this.array();\n  case '\"': case \"'\": case \"`\": return this.string();\n  case '-': return this.number();\n  default:\n    return ch >= '0' && ch <= '9' ? this.number() : this.identifier();\n  }\n};\n\n/**\n * Get the function for the given operator.\n * A `.precedence` value is added to the function, with increasing\n * precedence having a higher number.\n * @return {function} The function that performs the infix operation\n */\nParser.prototype.operator = function (opts) {\n  var op = '',\n    op_fn,\n    ch = this.white(),\n    is_identifier_char = Identifier.is_valid_start_char;\n\n  while (ch) {\n    if (is_identifier_char(ch) || ch <= ' ' || ch === '' ||\n        ch === '\"' || ch === \"'\" || ch === '{' || ch === '(' ||\n        ch === \"`\" || ch === ')' || (ch <= '9' && ch >= '0')) {\n      break;\n    }\n\n    if (!opts.not_an_array && ch === '[') {\n      break;\n    }\n\n    op += ch;\n    ch = this.next();\n\n    // An infix followed by the prefix e.g. a + @b\n    // TODO: other prefix unary operators\n    if (ch === '@') {\n      break;\n    }\n\n    is_identifier_char = Identifier.is_valid_continue_char;\n  }\n\n  if (op !== '') {\n    if (opts.prefix && op === '-') { op = '&-'; }\n    op_fn = operators[op];\n\n    if (!op_fn) {\n      this.error(\"Bad operator: '\" + op + \"'.\");\n    }\n  }\n\n  return op_fn;\n};\n\n/**\n * Filters\n * Returns what the Node interprets as an \"operator\".\n * e.g.\n *   <span data-bind=\"text: name | fit:20 | uppercase\"></span>\n */\nParser.prototype.filter = function() {\n  var ch = this.next(),\n    args = [],\n    next_filter = function(v) { return v; },\n    name = this.name();\n\n  if (!options.filters[name]) {\n    options.onError(\"Cannot find filter by the name of: \" + name);\n  }\n\n  ch = this.white();\n\n  while (ch) {\n    if (ch === ':') {\n      ch = this.next();\n      args.push(this.expression('|'));\n    }\n\n    if (ch === '|') {\n      next_filter = this.filter();\n      break;\n    }\n\n    if (ch === ',') { break; }\n\n    ch = this.white();\n  }\n\n  var filter = function filter(value) {\n    var arg_values = [value];\n\n    for (var i = 0, j = args.length; i < j; ++i) {\n      arg_values.push(Node.value_of(args[i]));\n    }\n\n    return next_filter(options.filters[name].apply(null, arg_values));\n  };\n\n  // Lowest precedence.\n  filter.precedence = 1;\n  return filter;\n};\n\n\n/**\n * Parse an expression  builds an operator tree, in something like\n * Shunting-Yard.\n *   See: http://en.wikipedia.org/wiki/Shunting-yard_algorithm\n *\n * @return {function}   A function that computes the value of the expression\n *                      when called or a primitive.\n */\nParser.prototype.expression = function (filterable) {\n  var op,\n    nodes = [],\n    ch = this.white();\n\n  while (ch) {\n    // unary prefix operators\n    op = this.operator({ prefix: true });\n    if (op) {\n      nodes.push(undefined);  // LHS Tree node.\n      nodes.push(op);\n      ch = this.white();\n    }\n\n    if (ch === '(') {\n      this.next();\n      nodes.push(this.expression());\n      this.next(')');\n    } else {\n      nodes.push(this.value());\n    }\n    ch = this.white();\n\n    if (ch === ':' || ch === '}' || ch === ',' || ch === ']' ||\n        ch === ')' || ch === '' || ch === '`' || (ch === '|' && filterable === '|')) {\n      break;\n    }\n\n    // filters\n    if (ch === '|' && this.lookahead() !== '|' && filterable) {\n      nodes.push(this.filter());\n      nodes.push(undefined);\n      break;\n    }\n\n    // infix or postfix operators\n    op = this.operator({ not_an_array: true });\n\n    if (op === operators['?']) {\n      this.ternary(nodes);\n      break;\n    } else if (op === operators['.']) {\n      nodes.push(op);\n      nodes.push(this.member());\n      op = null;\n    } else if (op === operators['[']) {\n      nodes.push(op);\n      nodes.push(this.expression());\n      ch = this.next(']');\n      op = null;\n    } else if (op) {\n      nodes.push(op);\n    }\n\n    ch = this.white();\n\n    if (ch === ']' || (!op && ch === '(')) { break; }\n  }\n\n  if (nodes.length === 0) {\n    return undefined;\n  }\n\n  var dereferences = this.dereferences();\n\n  if (nodes.length === 1 && !dereferences.length) {\n    return nodes[0];\n  }\n\n  for (var i = 0, j = dereferences.length; i < j; ++i) {\n    var deref = dereferences[i];\n    if (deref.constructor === Arguments) {\n      nodes.push(operators.call);\n    } else {\n      nodes.push(operators['.']);\n    }\n    nodes.push(deref);\n  }\n\n  return new Expression(nodes);\n};\n\n\nParser.prototype.ternary = function(nodes) {\n  var ternary = new Ternary();\n  ternary.yes = this.expression();\n  this.next(\":\");\n  ternary.no = this.expression();\n  nodes.push(operators['?']);\n  nodes.push(ternary);\n};\n\n/**\n * Parse the arguments to a function, returning an Array.\n *\n */\nParser.prototype.func_arguments = function () {\n  var args = [],\n    ch = this.next('(');\n\n  while(ch) {\n    ch = this.white();\n    if (ch === ')') {\n      this.next(')');\n      return new Arguments(this, args);\n    } else {\n      args.push(this.expression());\n      ch = this.white();\n    }\n    if (ch !== ')') { this.next(','); }\n  }\n\n  this.error(\"Bad arguments to function\");\n};\n\n\n/**\n * The literal string reference `abc` in an `x.abc` expression.\n */\nParser.prototype.member = function () {\n  var member = '',\n    ch = this.white(),\n    is_identifier_char = Identifier.is_valid_start_char;\n\n  while (ch) {\n    if (!is_identifier_char(ch)) {\n      break;\n    }\n    member += ch;\n    ch = this.next();\n    is_identifier_char = Identifier.is_valid_continue_char;\n  }\n  return member;\n};\n\n\n/**\n * A dereference applies to an identifer, being either a function\n * call \"()\" or a membership lookup with square brackets \"[member]\".\n * @return {fn or undefined}  Dereference function to be applied to the\n *                            Identifier\n */\nParser.prototype.dereference = function () {\n  var member,\n    ch = this.white();\n\n  while (ch) {\n    if (ch === '(') {\n      // a(...) function call\n      return this.func_arguments();\n    } else if (ch === '[') {\n      // a[x] membership\n      this.next('[');\n      member = this.expression();\n      this.white();\n      this.next(']');\n\n      return member;\n    } else if (ch === '.') {\n      // a.x membership\n      this.next('.');\n      return this.member();\n    } else {\n      break;\n    }\n  }\n  return;\n};\n\nParser.prototype.dereferences = function () {\n  var ch = this.white(),\n    dereferences = [],\n    deref;\n\n  while (ch) {\n    deref = this.dereference();\n    if (deref !== undefined) {\n      dereferences.push(deref);\n    } else {\n      break;\n    }\n  }\n  return dereferences;\n};\n\n\nParser.prototype.identifier = function () {\n  var token = '',\n    ch,\n    is_identifier_char = Identifier.is_valid_start_char;\n\n  ch = this.white();\n  while (ch) {\n    if (!is_identifier_char(ch)) {\n      break;\n    }\n    token += ch;\n    ch = this.next();\n    is_identifier_char = Identifier.is_valid_continue_char;\n  }\n  switch (token) {\n  case 'true': return true;\n  case 'false': return false;\n  case 'null': return null;\n  case 'undefined': return void 0;\n  case 'function':\n    throw new Error(\"Knockout: Anonymous functions are no longer supported, but `=>` lambas are.\");\n    //return this.anonymous_fn();\n  }\n  return new Identifier(this, token, this.dereferences());\n};\n\n\n/* Parse an anomymous function () {} ...\n\n NOTE: Anonymous functions are not supported, primarily because\n this is not a full Javascript parser.  While a subset of anonymous\n functions can (and may) be supported, notably lambda-like (a single\n statement), at this time an error is raised to indiate that the binding\n has failed and the => lambda workaround.\n\nParser.prototype.anonymous_fn = function () {\n  var expr;\n  this.white();\n  this.next(\"(\");\n  this.white();\n  this.next(\")\");\n  this.white();\n  this.next(\"{\");\n  this.white();\n  if (this.text.substr(this.at - 1, 6) === 'return') {\n    this.at = this.at + 5;\n  }\n  this.next();\n  expr = this.expression();\n  this.next(\"}\");\n  return function () { return expr.get_value(); };\n};\n*/\n\nParser.prototype.read_bindings = function () {\n  var key,\n    bindings = {},\n    sep,\n    expr,\n    ch = this.ch;\n\n  while (ch) {\n    key = this.name();\n    sep = this.white();\n\n    if (!sep || sep === ',') {\n      if (sep) {\n        ch = this.next(',');\n      } else {\n        ch = '';\n      }\n      // A \"bare\" binding e.g. \"text\"; substitute value of 'null'\n      // so it becomes \"text: null\".\n      bindings[key] = null;\n\n    } else {\n\n      if (key.indexOf('.') !== -1) {\n        // Namespaced  i.e.\n        //    `attr.css: x` becomes `attr: { css: x }`\n        //     ^^^ - key\n        key = key.split('.');\n        bindings[key[0]] = bindings[key[0]] || {};\n\n        if (key.length !== 2) {\n          options.onError(\"Binding \" + key + \" should have two parts (a.b).\");\n        } else if (bindings[key[0]].constructor !== Object) {\n          options.onError(\"Binding \" + key[0] + \".\" + key[1] + \" paired with a non-object.\");\n        }\n\n        ch = this.next(':');\n        this.object_add_value(bindings[key[0]], key[1], this.expression(true));\n\n      } else {\n        ch = this.next(':');\n        if (bindings[key] && typeof bindings[key] === 'object' && bindings[key].constructor === Object) {\n          // Extend a namespaced bindings e.g. we've previously seen\n          // on.x, now we're seeing on: { 'abc' }.\n          expr = this.expression(true);\n          if (typeof expr !== 'object' || expr.constructor !== Object) {\n            options.onError(\"Expected plain object for \" + key + \" value.\");\n          } else {\n            extend(bindings[key], expr);\n          }\n        } else {\n          bindings[key] = this.expression(true);\n        }\n      }\n\n      this.white();\n      if (this.ch) {\n        ch = this.next(',');\n      } else {\n        ch = '';\n      }\n    }\n  }\n  return bindings;\n};\n\n\n/**\n* Convert result[name] from a value to a function (i.e. `valueAccessor()`)\n* @param  {object} result [Map of top-level names to values]\n* @return {object}        [Map of top-level names to functions]\n*\n* Accessors may be one of (below) constAccessor, identifierAccessor,\n* expressionAccessor, or nodeAccessor.\n*/\nParser.prototype.convert_to_accessors = function (result) {\n\n  objectForEach(result, function (name, value) {\n    if (value instanceof Identifier) {\n      // Return a function that, with no arguments returns\n      // the value of the identifier, otherwise sets the\n      // value of the identifier to the first given argument.\n      Object.defineProperty(result, name, {\n        value: function (optionalValue, options) {\n          if (arguments.length === 0) {\n            return value.get_value();\n          }\n          if (options && options.onlyIfChanged && optionalValue === value.get_value()) {\n            return;\n          }\n          return value.set_value(optionalValue);\n        }\n      });\n    } else if (value instanceof Expression) {\n      result[name] = function expressionAccessor() {\n        return value.get_value();\n      };\n    } else if (value instanceof Node) {\n      result[name] = function nodeAccessor() {\n        return value.get_node_value();\n      };\n    } else if (Array.isArray(value)) {\n      result[name] = function arrayAccessor() {\n        return value.map(function(v/*, i*/) { return Node.value_of(v); });\n      };\n    } else if (typeof(value) !== 'function') {\n      result[name] = function constAccessor() {\n        return clonePlainObjectDeep(value);\n      };\n    } else if (typeof value === 'function') {\n      result[name] = value;\n    }\n  });\n\n  return result;\n};\n\n/**\n * Get the bindings as name: accessor()\n * @param  {string} source The binding string to parse.\n * @return {object}        Map of name to accessor function.\n */\nParser.prototype.parse = function (source) {\n  this.text = (source || '').trim();\n  this.at = 0;\n  this.ch = ' ';\n\n  if (!this.text) {\n    return null;\n  }\n\n  try {\n    var result = this.read_bindings();\n  } catch (e) {\n    // `e` may be 1.) a proper Error; 2.) a parsing error; or 3.) a string.\n    var emsg = typeof e === Error ?\n          \"\\nMessage: <\" + e.name + \"> \" + e.message :\n        typeof e === 'object' && 'at' in e ?\n          \"\\n\" + e.name + \" \" + e.message + \" of \\n\"\n          + \"   \" + e.text + \"\\n\"\n          + Array(e.at).join(\" \") + \"_/  \\\\_\\n\"\n        : e;\n    options.onError(new Error(emsg));\n  }\n\n  this.white();\n  if (this.ch) {\n    this.error(\"Syntax Error\");\n  }\n\n  return this.convert_to_accessors(result);\n};","\nimport {\n  extend, virtualElements, arrayForEach, options, objectForEach\n} from 'tko.utils';\n\nimport Parser from './parser.js';\nimport parseObjectLiteral from './preparse';\n\n\nexport default function Provider(options) {\n  options = options || {};\n  this.otherProviders = options.otherProviders || [];\n  this.bindingPreProcessors = options.bindingPreProcessors || [];\n  this.nodePreProcessors = options.preprocessors || [];\n\n  // the binding classes -- defaults to the bind's\n  // bindingsHandlers\n  var bindingHandlers = this.bindingHandlers = {};\n\n  addGetterSetter(bindingHandlers);\n\n  // Cache the result of parsing binding strings.\n  // TODO\n  // this.cache = {};\n}\n\n\n/** Add non-enumerable `get` and `set` properties.\n */\n// bindingHandlers.set(nameOrObject, value)\n// ---\n// Examples:\n//\n// bindingHandlers.set('name', bindingDefinition)\n// bindingHandlers.set({ text: textBinding, input: inputBinding })\nfunction addGetterSetter(bindingHandlersObject) {\n  Object.defineProperties(bindingHandlersObject, {\n    'set': {\n      configurable: true,\n      value: function setBindingHandler(nameOrObject, value) {\n        if (typeof nameOrObject === 'string') {\n          bindingHandlersObject[nameOrObject] = value;\n        } else if (typeof nameOrObject === 'object') {\n          if (value !== undefined) {\n            options.onError(\n              new Error(\"Given extraneous `value` parameter (first param should be a string, but it was an object).\" + nameOrObject));\n          }\n          extend(bindingHandlersObject, nameOrObject);\n        } else {\n          options.onError(\n            new Error(\"Given a bad binding handler type: \" + nameOrObject));\n        }\n      }\n    },\n    'get': {\n      configurable: true,\n      value: function getBindingHandler(name) {\n        // NOTE: Strict binding checking ought to occur here.\n        return bindingHandlersObject[name];\n      }\n    }\n  });\n}\n\n\n\nfunction nodeHasBindings(node) {\n  if (node.nodeType === node.ELEMENT_NODE) {\n    if (node.getAttribute(options.defaultBindingAttribute)) { return true; }\n  } else if (node.nodeType === node.COMMENT_NODE) {\n    if (options.allowVirtualElements &&\n        virtualElements.isStartComment(node)) {\n      return true;\n    }\n  }\n\n  for (var i = 0, j = this.otherProviders.length; i < j; i++) {\n    if (this.otherProviders[i].nodeHasBindings(node)) { return true; }\n  }\n\n  return false;\n}\n\n\nfunction getBindingsString(node) {\n  switch (node.nodeType) {\n  case node.ELEMENT_NODE:\n    return node.getAttribute(options.defaultBindingAttribute);\n  case node.COMMENT_NODE:\n    return virtualElements.virtualNodeBindingValue(node);\n  default:\n    return null;\n  }\n}\n\n\n// Note we do not seem to need both getBindings and getBindingAccessors; just\n// the latter appears to suffice.\n//\n// Return the name/valueAccessor pairs.\n// (undocumented replacement for getBindings)\n// see https://github.com/knockout/knockout/pull/742\nfunction getBindingAccessors(node, context) {\n  var bindings = {},\n    parser = new Parser(node, context, options.bindingGlobals),\n    binding_string = this.getBindingsString(node);\n\n  if (binding_string) {\n    binding_string = this.preProcessBindings(binding_string);\n    bindings = parser.parse(binding_string || '');\n  }\n\n  arrayForEach(this.otherProviders, function(p) {\n    extend(bindings, p.getBindingAccessors(node, context, parser, bindings));\n  });\n\n  objectForEach(bindings, this.preProcessBindings.bind(this));\n\n  return bindings;\n}\n\n\n/** Call bindingHandler.preprocess on each respective binding string.\n *\n * The `preprocess` property of bindingHandler must be a static\n * function (i.e. on the object or constructor).\n */\nfunction preProcessBindings(bindingString) {\n  var results = [];\n  var bindingHandlers = this.bindingHandlers;\n  var preprocessed;\n\n  // Check for a Provider.preprocessNode property\n  if (typeof this.preprocessNode === 'function') {\n    preprocessed = this.preprocessNode(bindingString, this);\n    if (preprocessed) { bindingString = preprocessed; }\n  }\n\n  for (var i = 0, j = this.bindingPreProcessors.length; i < j; ++i) {\n    preprocessed = this.bindingPreProcessors[i](bindingString, this);\n    if (preprocessed) { bindingString = preprocessed; }\n  }\n\n  function addBinding(name, value) {\n    results.push(\"'\" + name + \"':\" + value);\n  }\n\n  function processBinding(key, value) {\n    // Get the \"on\" binding from \"on.click\"\n    var handler = bindingHandlers.get(key.split('.')[0]);\n\n    if (handler && typeof handler.preprocess === 'function') {\n      value = handler.preprocess(value, key, processBinding);\n    }\n\n    addBinding(key, value);\n  }\n\n  arrayForEach(parseObjectLiteral(bindingString), function(keyValueItem) {\n    processBinding(\n      keyValueItem.key || keyValueItem.unknown,\n      keyValueItem.value\n    );\n  });\n\n  return results.join(',');\n}\n\n\n/**\n * Run the preprocessors on a given node\n * @param  {HTMLElement} node The node to be modified/preprocessed.\n * @return {Array<HTMLElement>}     An array of nodes.\n *\n * FIXME: This only lets one node preprocessor modify the nodes; more\n * generically we want to be able to have a nested node->nodes for each\n * preprocessor, eventually flattening a tree-like result.\n */\nfunction preprocessNode(node, startingPreprocessorIndex) {\n  var newNodes;\n  for (var i = startingPreprocessorIndex || 0, j = this.nodePreProcessors.length; i < j; i++) {\n    newNodes = this.nodePreProcessors[i].call(this, node, this);\n    if (newNodes) { return newNodes; }\n  }\n  return;\n}\n\n\n// addProvider(provider instance)\n// ---\n//\n// Other providers (such as ko.components) can be added with the `addProvider`\n// call.  Each provider is expected to have a `nodeHasBindings` and a\n// `getBindingAccessors` function.\n//\nfunction addProvider(p) { this.otherProviders.push(p); }\nfunction clearProviders() { this.otherProviders.length = 0; }\n\nfunction addBindingPreprocessor(fn) { this.bindingPreProcessors.push(fn); }\nfunction clearBindingPreprocessors() { this.bindingPreProcessors.length = 0; }\n\nfunction addNodePreprocessor(fn) { this.nodePreProcessors.push(fn); }\nfunction clearNodePreprocessors() { this.nodePreProcessors.length = 0; }\n\n\nextend(Provider.prototype, {\n  nodeHasBindings: nodeHasBindings,\n  getBindingAccessors: getBindingAccessors,\n  getBindingsString: getBindingsString,\n  Parser: Parser,\n  preProcessBindings: preProcessBindings,\n  preprocessNode: preprocessNode,\n\n  addProvider: addProvider,\n  addBindingPreprocessor: addBindingPreprocessor,\n  clearProviders: clearProviders,\n  clearBindingPreprocessors: clearBindingPreprocessors,\n  addNodePreprocessor: addNodePreprocessor,\n  clearNodePreprocessors: clearNodePreprocessors,\n});\n","import {\n    extend, options, anyDomNodeIsAttachedToDocument, addDisposeCallback,\n    arrayRemoveItem, domData\n} from 'tko.utils';\n\nimport {\n    computed\n} from 'tko.computed';\n\nimport {\n    unwrap, isObservable\n} from 'tko.observable';\n\n\nvar storedBindingContextDomDataKey = domData.nextKey();\n\n\n\n// The bindingContext constructor is only called directly to create the root context. For child\n// contexts, use bindingContext.createChildContext or bindingContext.extend.\nexport function bindingContext(dataItemOrAccessor, parentContext, dataItemAlias, extendCallback, settings) {\n\n    var self = this,\n        isFunc = typeof(dataItemOrAccessor) == \"function\" && !isObservable(dataItemOrAccessor),\n        nodes,\n        subscribable;\n\n    // The binding context object includes static properties for the current, parent, and root view models.\n    // If a view model is actually stored in an observable, the corresponding binding context object, and\n    // any child contexts, must be updated when the view model is changed.\n    function updateContext() {\n        // Most of the time, the context will directly get a view model object, but if a function is given,\n        // we call the function to retrieve the view model. If the function accesses any observables or returns\n        // an observable, the dependency is tracked, and those observables can later cause the binding\n        // context to be updated.\n        var dataItemOrObservable = isFunc ? dataItemOrAccessor() : dataItemOrAccessor,\n            dataItem = unwrap(dataItemOrObservable);\n\n        if (parentContext) {\n            // When a \"parent\" context is given, register a dependency on the parent context. Thus whenever the\n            // parent context is updated, this context will also be updated.\n            if (parentContext._subscribable)\n                parentContext._subscribable();\n\n            // Copy $root and any custom properties from the parent context\n            extend(self, parentContext);\n\n            // Because the above copy overwrites our own properties, we need to reset them.\n            self._subscribable = subscribable;\n        } else {\n            self.$parents = [];\n            self.$root = dataItem;\n\n            // Export 'ko' in the binding context so it will be available in bindings and templates\n            // even if 'ko' isn't exported as a global, such as when using an AMD loader.\n            // See https://github.com/SteveSanderson/knockout/issues/490\n            self.ko = options.knockoutInstance;\n        }\n        self.$rawData = dataItemOrObservable;\n        self.$data = dataItem;\n        if (dataItemAlias)\n            self[dataItemAlias] = dataItem;\n\n        // The extendCallback function is provided when creating a child context or extending a context.\n        // It handles the specific actions needed to finish setting up the binding context. Actions in this\n        // function could also add dependencies to this binding context.\n        if (extendCallback)\n            extendCallback(self, parentContext, dataItem);\n\n        return self.$data;\n    }\n\n    function disposeWhen() {\n        return nodes && !anyDomNodeIsAttachedToDocument(nodes);\n    }\n\n    if (settings && settings.exportDependencies) {\n        // The \"exportDependencies\" option means that the calling code will track any dependencies and re-create\n        // the binding context when they change.\n        updateContext();\n        return;\n    }\n\n    subscribable = computed(updateContext, null, { disposeWhen: disposeWhen, disposeWhenNodeIsRemoved: true });\n\n    // At this point, the binding context has been initialized, and the \"subscribable\" computed observable is\n    // subscribed to any observables that were accessed in the process. If there is nothing to track, the\n    // computed will be inactive, and we can safely throw it away. If it's active, the computed is stored in\n    // the context object.\n    if (subscribable.isActive()) {\n        self._subscribable = subscribable;\n\n        // Always notify because even if the model ($data) hasn't changed, other context properties might have changed\n        subscribable.equalityComparer = null;\n\n        // We need to be able to dispose of this computed observable when it's no longer needed. This would be\n        // easy if we had a single node to watch, but binding contexts can be used by many different nodes, and\n        // we cannot assume that those nodes have any relation to each other. So instead we track any node that\n        // the context is attached to, and dispose the computed when all of those nodes have been cleaned.\n\n        // Add properties to *subscribable* instead of *self* because any properties added to *self* may be overwritten on updates\n        nodes = [];\n        subscribable._addNode = function(node) {\n            nodes.push(node);\n            addDisposeCallback(node, function(node) {\n                arrayRemoveItem(nodes, node);\n                if (!nodes.length) {\n                    subscribable.dispose();\n                    self._subscribable = subscribable = undefined;\n                }\n            });\n        };\n    }\n}\n\n// Extend the binding context hierarchy with a new view model object. If the parent context is watching\n// any observables, the new child context will automatically get a dependency on the parent context.\n// But this does not mean that the $data value of the child context will also get updated. If the child\n// view model also depends on the parent view model, you must provide a function that returns the correct\n// view model on each update.\nbindingContext.prototype.createChildContext = function (dataItemOrAccessor, dataItemAlias, extendCallback, settings) {\n    return new bindingContext(dataItemOrAccessor, this, dataItemAlias, function(self, parentContext) {\n        // Extend the context hierarchy by setting the appropriate pointers\n        self.$parentContext = parentContext;\n        self.$parent = parentContext.$data;\n        self.$parents = (parentContext.$parents || []).slice(0);\n        self.$parents.unshift(self.$parent);\n        if (extendCallback)\n            extendCallback(self);\n    }, settings);\n};\n\n// Extend the binding context with new custom properties. This doesn't change the context hierarchy.\n// Similarly to \"child\" contexts, provide a function here to make sure that the correct values are set\n// when an observable view model is updated.\nbindingContext.prototype.extend = function(properties) {\n    // If the parent context references an observable view model, \"_subscribable\" will always be the\n    // latest view model object. If not, \"_subscribable\" isn't set, and we can use the static \"$data\" value.\n    return new bindingContext(this._subscribable || this.$data, this, null, function(self, parentContext) {\n        // This \"child\" context doesn't directly track a parent observable view model,\n        // so we need to manually set the $rawData value to match the parent.\n        self.$rawData = parentContext.$rawData;\n        extend(self, typeof(properties) === \"function\" ? properties() : properties);\n    });\n};\n\nbindingContext.prototype.createStaticChildContext = function (dataItemOrAccessor, dataItemAlias) {\n    return this.createChildContext(dataItemOrAccessor, dataItemAlias, null, { \"exportDependencies\": true });\n};\n\n\nexport function storedBindingContextForNode(node, bindingContext) {\n    if (arguments.length == 2) {\n        domData.set(node, storedBindingContextDomDataKey, bindingContext);\n        if (bindingContext._subscribable)\n            bindingContext._subscribable._addNode(node);\n    } else {\n        return domData.get(node, storedBindingContextDomDataKey);\n    }\n}\n\n\n// Retrieving binding context from arbitrary nodes\nexport function contextFor(node) {\n    // We can only do something meaningful for elements and comment nodes (in particular, not text nodes, as IE can't store domdata for them)\n    switch (node.nodeType) {\n    case 1:\n    case 8:\n        var context = storedBindingContextForNode(node);\n        if (context) return context;\n        if (node.parentNode) return contextFor(node.parentNode);\n        break;\n    }\n    return undefined;\n}\n\n\nexport function dataFor(node) {\n    var context = contextFor(node);\n    return context ? context.$data : undefined;\n}\n","'use strict'\n\n\nimport {\n    addDisposeCallback, createSymbolOrString\n} from 'tko.utils'\n\nimport {\n    computed\n} from 'tko.computed'\n\n\nconst SUBSCRIPTIONS = createSymbolOrString('LifeCycle Subscriptions List')\nconst ANCHOR_NODE = createSymbolOrString('LifeCycle Anchor Node')\n\n\nexport default class LifeCycle {\n  // NOTE: For more advanced integration as an ES6 mixin, see e.g.:\n  // http://justinfagnani.com/2015/12/21/real-mixins-with-javascript-classes/\n\n  static mixInto(Constructor) {\n    Object.assign(Constructor.prototype || Constructor, LifeCycle.prototype)\n  }\n\n  subscribe(observable, action) {\n    if (typeof action === 'string') { action = this[action].bind(this) }\n    this.addDisposable(observable.subscribe(action))\n  }\n\n  computed(params) {\n    if (typeof params === 'string') {\n      params = { read: this[params], write: this[params], owner: this }\n    } else if (typeof params === 'object') {\n      // Pass directly.\n    } else if (typeof params === 'function') {\n      params = { read: params, write: params }\n    } else {\n      throw new Error(\"LifeCycle::computed not given a valid type.\")\n    }\n    params.disposeWhenNodeIsRemoved = this[ANCHOR_NODE]\n    return this.addDisposable(computed(params))\n  }\n\n  addEventListener(...args) {\n    const node = args[0].nodeType ? args.shift() : this[ANCHOR_NODE]\n    const [type, act, options] = args\n    const handler = typeof act === 'string' ? this[act].bind(this) : act\n    this.__addEventListener(node, type, handler, options)\n  }\n\n  __addEventListener(node, event_type, handler, options) {\n    node.addEventListener(event_type, handler, options)\n    function dispose() { node.removeEventListener(event_type, handler) }\n    addDisposeCallback(node, dispose)\n    this.addDisposable({ dispose })\n  }\n\n  anchorTo(node) {\n    addDisposeCallback(node, () => this.dispose())\n    this[ANCHOR_NODE] = node\n  }\n\n  dispose() {\n    const subscriptions = this[SUBSCRIPTIONS] || []\n    subscriptions.forEach(s => s.dispose())\n    this[SUBSCRIPTIONS] = []\n    this[ANCHOR_NODE] = null\n\n  }\n\n  addDisposable(subscription) {\n    const subscriptions = this[SUBSCRIPTIONS] || []\n    if (!this[SUBSCRIPTIONS]) { this[SUBSCRIPTIONS] = subscriptions }\n    if (typeof subscription.dispose !== 'function') {\n      throw new Error(\"Lifecycle::addDisposable argument missing `dispose`.\")\n    }\n    subscriptions.push(subscription)\n    return subscription\n  }\n\n}","\nimport {\n    domData, virtualElements, options\n} from 'tko.utils';\n\nimport {\n    LifeCycle\n} from 'tko.lifecycle'\n\nimport {\n    dependencyDetection\n} from 'tko.observable';\n\n\nexport class BindingHandler extends LifeCycle {\n    constructor(params) {\n        super()\n        const {$element, valueAccessor, allBindings, $context} = params\n        Object.assign(this, {\n            valueAccessor,\n            allBindings,\n            $element,\n            $context,\n            $data: $context.$data,\n        })\n\n        this.anchorTo($element)\n\n        if (this.onValueChange) {\n            this.subscribe(this.computed(() => this.value), 'onValueChange')\n        }\n    }\n\n    get value() { return this.valueAccessor() }\n    set value(v) { return this.valueAccessor(v) }\n\n    get controlsDescendants() { return false }\n\n    static get allowVirtualElements() { return false }\n\n    static registerAs(name, provider=options.bindingProviderInstance) {\n        provider.bindingHandlers.set(name, this)\n    }\n}\n\n\nclass LegacyBindingHandler extends BindingHandler {\n    constructor(params) {\n        super(params)\n        const handler = this.handler\n\n        this.after = handler.after\n\n        if (typeof handler.dispose === 'function') {\n            this.addDisposable(handler)\n        }\n\n        try {\n            dependencyDetection.ignore(() =>\n                this.initReturn = handler.init && handler.init(...this.legacyArgs)\n            )\n        } catch(e) {\n            handler.onError('init', e)\n        }\n\n        if (typeof handler.update === 'function') {\n            this.computed(() => {try {\n                handler.update(...this.legacyArgs)\n            } catch(e) {\n                handler.onError('update', e)\n            }})\n        }\n    }\n\n    get legacyArgs() {\n        return [\n            this.$element, this.valueAccessor, this.allBindings,\n            this.$data, this.$context\n        ]\n    }\n\n    get controlsDescendants() {\n        const objectToTest = this.initReturn || this.handler || {}\n        return objectToTest.controlsDescendantBindings\n    }\n}\n\n\n/**\n * Create a handler instance from the `origin`, which may be:\n *\n * 1. a class descended from BindingHandler\n * 2. an object (becomes ObjectBindingHandler)\n * 3. a function (becomes FunctionBindingHandler)\n *\n * If given an object (the only kind supported in knockout 3.x and before), it\n * shall draw the `init`, `update`, and `allowVirtualElements` properties\n */\nexport function getBindingHandlerClass(handler, key, onError) {\n    if (handler.prototype instanceof BindingHandler) {\n        return handler\n    }\n\n    if (typeof handler === 'function') {\n        const [initFn, disposeFn] = [handler, handler.dispose]\n        return class extends LegacyBindingHandler {\n            get handler() {\n                const init = initFn.bind(this)\n                const dispose = disposeFn ? disposeFn.bind(this) : null\n                return { init, dispose, onError }\n            }\n            static get allowVirtualElements() {\n                return handler.allowVirtualElements || virtualElements.allowedBindings[key]\n            }\n        }\n    }\n\n    if (typeof handler === 'object') {\n        return class extends LegacyBindingHandler {\n            get handler() { return Object.assign({onError}, handler) }\n            static get allowVirtualElements() {\n                return handler.allowVirtualElements || virtualElements.allowedBindings[key]\n            }\n        }\n    }\n\n    throw new Error(\"The given handler is not an appropriate type.\")\n}","\n/* eslint no-cond-assign: 0 */\n\nimport {\n    extend, objectMap, virtualElements,\n    addDisposeCallback, tagNameLower, domData, objectForEach,\n    arrayIndexOf, arrayForEach, options\n} from 'tko.utils';\n\nimport {\n    dependencyDetection\n} from 'tko.observable';\n\nimport {\n    computed\n} from 'tko.computed';\n\nimport {\n    bindingContext, storedBindingContextForNode\n} from './bindingContext';\n\nimport {\n    getBindingHandlerClass\n} from './BindingHandler'\n\n\n// The following element types will not be recursed into during binding.\nvar bindingDoesNotRecurseIntoElementTypes = {\n    // Don't want bindings that operate on text nodes to mutate <script> and <textarea> contents,\n    // because it's unexpected and a potential XSS issue.\n    // Also bindings should not operate on <template> elements since this breaks in Internet Explorer\n    // and because such elements' contents are always intended to be bound in a different context\n    // from where they appear in the document.\n    'script': true,\n    'textarea': true,\n    'template': true\n};\n\n// Use an overridable method for retrieving binding handlers so that a plugins may support dynamically created handlers\nexport function getBindingHandler(bindingKey) {\n    return options.bindingProviderInstance.bindingHandlers.get(bindingKey);\n}\n\n\n// Returns the valueAccesor function for a binding value\nfunction makeValueAccessor(value) {\n    return function() {\n        return value;\n    };\n}\n\n// Returns the value of a valueAccessor function\nfunction evaluateValueAccessor(valueAccessor) {\n    return valueAccessor();\n}\n\n// Given a function that returns bindings, create and return a new object that contains\n// binding value-accessors functions. Each accessor function calls the original function\n// so that it always gets the latest value and all dependencies are captured. This is used\n// by ko.applyBindingsToNode and getBindingsAndMakeAccessors.\nfunction makeAccessorsFromFunction(callback) {\n    return objectMap(dependencyDetection.ignore(callback), function(value, key) {\n        return function() {\n            return callback()[key];\n        };\n    });\n}\n\n// Given a bindings function or object, create and return a new object that contains\n// binding value-accessors functions. This is used by ko.applyBindingsToNode.\nfunction makeBindingAccessors(bindings, context, node) {\n    if (typeof bindings === 'function') {\n        return makeAccessorsFromFunction(bindings.bind(null, context, node));\n    } else {\n        return objectMap(bindings, makeValueAccessor);\n    }\n}\n\n// This function is used if the binding provider doesn't include a getBindingAccessors function.\n// It must be called with 'this' set to the provider instance.\nfunction getBindingsAndMakeAccessors(node, context) {\n    return makeAccessorsFromFunction(this.getBindings.bind(this, node, context));\n}\n\n\nfunction applyBindingsToDescendantsInternal (bindingContext, elementOrVirtualElement, bindingContextsMayDifferFromDomParentElement) {\n    var currentChild,\n        nextInQueue = virtualElements.firstChild(elementOrVirtualElement),\n        provider = options.bindingProviderInstance,\n        preprocessNode = provider.preprocessNode;\n\n    // Preprocessing allows a binding provider to mutate a node before bindings are applied to it. For example it's\n    // possible to insert new siblings after it, and/or replace the node with a different one. This can be used to\n    // implement custom binding syntaxes, such as {{ value }} for string interpolation, or custom element types that\n    // trigger insertion of <template> contents at that point in the document.\n    if (preprocessNode) {\n        while (currentChild = nextInQueue) {\n            nextInQueue = virtualElements.nextSibling(currentChild);\n            preprocessNode.call(provider, currentChild);\n        }\n        // Reset nextInQueue for the next loop\n        nextInQueue = virtualElements.firstChild(elementOrVirtualElement);\n    }\n\n    while (currentChild = nextInQueue) {\n        // Keep a record of the next child *before* applying bindings, in case the binding removes the current child from its position\n        nextInQueue = virtualElements.nextSibling(currentChild);\n        applyBindingsToNodeAndDescendantsInternal(bindingContext, currentChild, bindingContextsMayDifferFromDomParentElement);\n    }\n}\n\nfunction applyBindingsToNodeAndDescendantsInternal (bindingContext, nodeVerified, bindingContextMayDifferFromDomParentElement) {\n    var shouldBindDescendants = true;\n\n    // Perf optimisation: Apply bindings only if...\n    // (1) We need to store the binding context on this node (because it may differ from the DOM parent node's binding context)\n    //     Note that we can't store binding contexts on non-elements (e.g., text nodes), as IE doesn't allow expando properties for those\n    // (2) It might have bindings (e.g., it has a data-bind attribute, or it's a marker for a containerless template)\n    var isElement = (nodeVerified.nodeType === 1);\n    if (isElement) // Workaround IE <= 8 HTML parsing weirdness\n        virtualElements.normaliseVirtualElementDomStructure(nodeVerified);\n\n    var shouldApplyBindings = (isElement && bindingContextMayDifferFromDomParentElement)             // Case (1)\n                           || options.bindingProviderInstance.nodeHasBindings(nodeVerified);       // Case (2)\n    if (shouldApplyBindings)\n        shouldBindDescendants = applyBindingsToNodeInternal(nodeVerified, null, bindingContext, bindingContextMayDifferFromDomParentElement).shouldBindDescendants;\n\n    if (shouldBindDescendants && !bindingDoesNotRecurseIntoElementTypes[tagNameLower(nodeVerified)]) {\n        // We're recursing automatically into (real or virtual) child nodes without changing binding contexts. So,\n        //  * For children of a *real* element, the binding context is certainly the same as on their DOM .parentNode,\n        //    hence bindingContextsMayDifferFromDomParentElement is false\n        //  * For children of a *virtual* element, we can't be sure. Evaluating .parentNode on those children may\n        //    skip over any number of intermediate virtual elements, any of which might define a custom binding context,\n        //    hence bindingContextsMayDifferFromDomParentElement is true\n        applyBindingsToDescendantsInternal(bindingContext, nodeVerified, /* bindingContextsMayDifferFromDomParentElement: */ !isElement);\n    }\n}\n\nvar boundElementDomDataKey = domData.nextKey();\n\n\nfunction topologicalSortBindings(bindings) {\n    // Depth-first sort\n    var result = [],                // The list of key/handler pairs that we will return\n        bindingsConsidered = {},    // A temporary record of which bindings are already in 'result'\n        cyclicDependencyStack = []; // Keeps track of a depth-search so that, if there's a cycle, we know which bindings caused it\n    objectForEach(bindings, function pushBinding(bindingKey) {\n        if (!bindingsConsidered[bindingKey]) {\n            const binding = getBindingHandler(bindingKey);\n            if (!binding) { return }\n            // First add dependencies (if any) of the current binding\n            if (binding.after) {\n                cyclicDependencyStack.push(bindingKey);\n                arrayForEach(binding.after, function(bindingDependencyKey) {\n                    if (!bindings[bindingDependencyKey]) { return }\n                    if (arrayIndexOf(cyclicDependencyStack, bindingDependencyKey) !== -1) {\n                        throw Error(\"Cannot combine the following bindings, because they have a cyclic dependency: \" + cyclicDependencyStack.join(\", \"));\n                    } else {\n                        pushBinding(bindingDependencyKey);\n                    }\n                });\n                cyclicDependencyStack.length--;\n            }\n            // Next add the current binding\n            result.push({ key: bindingKey, handler: binding });\n        }\n        bindingsConsidered[bindingKey] = true;\n    });\n\n    return result;\n}\n\n\nfunction applyBindingsToNodeInternal(node, sourceBindings, bindingContext, bindingContextMayDifferFromDomParentElement) {\n\n    // Prevent multiple applyBindings calls for the same node, except when a binding value is specified\n    var alreadyBound = domData.get(node, boundElementDomDataKey);\n    if (!sourceBindings) {\n        if (alreadyBound) {\n            onBindingError({\n                during: 'apply',\n                errorCaptured: new Error(\"You cannot apply bindings multiple times to the same element.\"),\n                element: node,\n                bindingContext: bindingContext\n            });\n            return false;\n        }\n        domData.set(node, boundElementDomDataKey, true);\n    }\n\n    // Optimization: Don't store the binding context on this node if it's definitely the same as on node.parentNode, because\n    // we can easily recover it just by scanning up the node's ancestors in the DOM\n    // (note: here, parent node means \"real DOM parent\" not \"virtual parent\", as there's no O(1) way to find the virtual parent)\n    if (!alreadyBound && bindingContextMayDifferFromDomParentElement)\n        storedBindingContextForNode(node, bindingContext);\n\n    // Use bindings if given, otherwise fall back on asking the bindings provider to give us some bindings\n    var bindings;\n    if (sourceBindings && typeof sourceBindings !== 'function') {\n        bindings = sourceBindings;\n    } else {\n        var provider = options.bindingProviderInstance,\n            getBindings = provider.getBindingAccessors || getBindingsAndMakeAccessors;\n\n        // Get the binding from the provider within a computed observable so that we can update the bindings whenever\n        // the binding context is updated or if the binding provider accesses observables.\n        var bindingsUpdater = computed(\n            function() {\n                bindings = sourceBindings ? sourceBindings(bindingContext, node) : getBindings.call(provider, node, bindingContext);\n                // Register a dependency on the binding context to support observable view models.\n                if (bindings && bindingContext._subscribable)\n                    bindingContext._subscribable();\n                return bindings;\n            },\n            null, { disposeWhenNodeIsRemoved: node }\n        );\n\n        if (!bindings || !bindingsUpdater.isActive())\n            bindingsUpdater = null;\n    }\n\n    var bindingHandlerThatControlsDescendantBindings;\n    if (bindings) {\n        const allBindingHandlers = {}\n        domData.set(node, 'bindingHandlers', allBindingHandlers)\n\n        // Return the value accessor for a given binding. When bindings are static (won't be updated because of a binding\n        // context update), just return the value accessor from the binding. Otherwise, return a function that always gets\n        // the latest binding value and registers a dependency on the binding updater.\n        const getValueAccessor = bindingsUpdater\n            ? (bindingKey) => function (optionalValue) {\n                var valueAccessor = bindingsUpdater()[bindingKey];\n                if (arguments.length === 0) {\n                    return evaluateValueAccessor(valueAccessor);\n                } else {\n                    return valueAccessor(optionalValue);\n                }\n            } : (bindingKey) => bindings[bindingKey]\n\n        // Use of allBindings as a function is maintained for backwards compatibility, but its use is deprecated\n        function allBindings() {\n            return objectMap(bindingsUpdater ? bindingsUpdater() : bindings, evaluateValueAccessor);\n        }\n        // The following is the 3.x allBindings API\n        allBindings.has = (key) => key in bindings\n        allBindings.get = (key) => bindings[key] && evaluateValueAccessor(getValueAccessor(key))\n\n\n        // Go through the sorted bindings, calling init and update for each\n        topologicalSortBindings(bindings).forEach((bindingKeyAndHandler) => {\n            function reportBindingError(during, errorCaptured) {\n                onBindingError({\n                    during, errorCaptured, bindingKey, bindings, allBindings,\n                    bindingContext,\n                    element: node,\n                    valueAccessor: getValueAccessor(key),\n                });\n            }\n\n            const {handler, key} = bindingKeyAndHandler,\n                bindingKey = key,\n                BindingHandlerClass = getBindingHandlerClass(handler, key, reportBindingError)\n\n\n            if (node.nodeType === 8 && !BindingHandlerClass.allowVirtualElements) {\n                throw new Error(`The binding [${key}] cannot be used with virtual elements`);\n            }\n\n            try {\n                const bindingHandler = new BindingHandlerClass({\n                    allBindings,\n                    $element: node,\n                    $context: bindingContext,\n                    valueAccessor(...v) { return getValueAccessor(key)(...v) }\n                })\n\n                // Expose the bindings via domData.\n                allBindingHandlers[key] = bindingHandler\n\n                if (bindingHandler.controlsDescendants) {\n                    if (bindingHandlerThatControlsDescendantBindings !== undefined)\n                        throw new Error(\"Multiple bindings (\" + bindingHandlerThatControlsDescendantBindings + \" and \" + key + \") are trying to control descendant bindings of the same element. You cannot use these bindings together on the same element.\");\n                    bindingHandlerThatControlsDescendantBindings = key;\n                }\n            } catch (err) {\n                reportBindingError('creation', err)\n            }\n        });\n    }\n\n    return {\n        'shouldBindDescendants': bindingHandlerThatControlsDescendantBindings === undefined\n    };\n}\n\n\nfunction getBindingContext(viewModelOrBindingContext) {\n    return viewModelOrBindingContext && (viewModelOrBindingContext instanceof bindingContext)\n        ? viewModelOrBindingContext\n        : new bindingContext(viewModelOrBindingContext);\n}\n\nexport function applyBindingAccessorsToNode(node, bindings, viewModelOrBindingContext) {\n    if (node.nodeType === 1) // If it's an element, workaround IE <= 8 HTML parsing weirdness\n        virtualElements.normaliseVirtualElementDomStructure(node);\n    return applyBindingsToNodeInternal(node, bindings, getBindingContext(viewModelOrBindingContext), true);\n}\n\nexport function applyBindingsToNode(node, bindings, viewModelOrBindingContext) {\n    var context = getBindingContext(viewModelOrBindingContext);\n    return applyBindingAccessorsToNode(node, makeBindingAccessors(bindings, context, node), context);\n}\n\nexport function applyBindingsToDescendants(viewModelOrBindingContext, rootNode) {\n    if (rootNode.nodeType === 1 || rootNode.nodeType === 8)\n        applyBindingsToDescendantsInternal(getBindingContext(viewModelOrBindingContext), rootNode, true);\n}\n\nexport function applyBindings(viewModelOrBindingContext, rootNode) {\n    // If jQuery is loaded after Knockout, we won't initially have access to it. So save it here.\n    if (!options.jQuery === undefined && window.jQuery) {\n        options.jQuery = window.jQuery;\n    }\n\n    if (rootNode && (rootNode.nodeType !== 1) && (rootNode.nodeType !== 8))\n        throw new Error(\"ko.applyBindings: first parameter should be your view model; second parameter should be a DOM node\");\n    rootNode = rootNode || window.document.body; // Make \"rootNode\" parameter optional\n\n    applyBindingsToNodeAndDescendantsInternal(getBindingContext(viewModelOrBindingContext), rootNode, true);\n}\n\nfunction onBindingError(spec) {\n    var error, bindingText;\n    if (spec.bindingKey) {\n        // During: 'init' or initial 'update'\n        error = spec.errorCaptured;\n        bindingText = options.bindingProviderInstance.getBindingsString(spec.element);\n        spec.message = \"Unable to process binding \\\"\" + spec.bindingKey\n            + \"\\\" in binding \\\"\" + bindingText\n            + \"\\\"\\nMessage: \" + (error.message ? error.message : error);\n    } else {\n        // During: 'apply'\n        error = spec.errorCaptured;\n    }\n    try {\n        extend(error, spec);\n    } catch (e) {\n        // Read-only error e.g. a DOMEXception.\n        spec.stack = error.stack;\n        error = new Error(error.message ? error.message : error);\n        extend(error, spec);\n    }\n    options.onError(error);\n}","/* eslint no-cond-assign: 0 */\nimport {\n    fixUpContinuousNodeArray, replaceDomNodes, arrayPushAll,\n    anyDomNodeIsAttachedToDocument, domData, arrayMap, arrayForEach,\n    virtualElements, extend, cleanNode, removeNode, compareArrays\n} from 'tko.utils';\n\nimport {\n    dependencyDetection, observable\n} from 'tko.observable';\n\nimport { computed } from 'tko.computed';\n\n\n// Objective:\n// * Given an input array, a container DOM node, and a function from array elements to arrays of DOM nodes,\n//   map the array elements to arrays of DOM nodes, concatenate together all these arrays, and use them to populate the container DOM node\n// * Next time we're given the same combination of things (with the array possibly having mutated), update the container DOM node\n//   so that its children is again the concatenation of the mappings of the array elements, but don't re-map any array elements that we\n//   previously mapped - retain those nodes, and just insert/delete other ones\n\n// \"callbackAfterAddingNodes\" will be invoked after any \"mapping\"-generated nodes are inserted into the container node\n// You can use this, for example, to activate bindings on those nodes.\n\nfunction mapNodeAndRefreshWhenChanged(containerNode, mapping, valueToMap, callbackAfterAddingNodes, index) {\n    // Map this array value inside a dependentObservable so we re-map when any dependency changes\n    var mappedNodes = [];\n    var dependentObservable = computed(function() {\n        var newMappedNodes = mapping(valueToMap, index, fixUpContinuousNodeArray(mappedNodes, containerNode)) || [];\n\n        // On subsequent evaluations, just replace the previously-inserted DOM nodes\n        if (mappedNodes.length > 0) {\n            replaceDomNodes(mappedNodes, newMappedNodes);\n            if (callbackAfterAddingNodes)\n                dependencyDetection.ignore(callbackAfterAddingNodes, null, [valueToMap, newMappedNodes, index]);\n        }\n\n        // Replace the contents of the mappedNodes array, thereby updating the record\n        // of which nodes would be deleted if valueToMap was itself later removed\n        mappedNodes.length = 0;\n        arrayPushAll(mappedNodes, newMappedNodes);\n    }, null, { disposeWhenNodeIsRemoved: containerNode, disposeWhen: function() { return !anyDomNodeIsAttachedToDocument(mappedNodes); } });\n    return { mappedNodes : mappedNodes, dependentObservable : (dependentObservable.isActive() ? dependentObservable : undefined) };\n}\n\nvar lastMappingResultDomDataKey = domData.nextKey(),\n    deletedItemDummyValue = domData.nextKey();\n\nexport function setDomNodeChildrenFromArrayMapping(domNode, array, mapping, options, callbackAfterAddingNodes) {\n    // Compare the provided array against the previous one\n    array = array || [];\n    options = options || {};\n    var isFirstExecution = domData.get(domNode, lastMappingResultDomDataKey) === undefined;\n    var lastMappingResult = domData.get(domNode, lastMappingResultDomDataKey) || [];\n    var lastArray = arrayMap(lastMappingResult, function (x) { return x.arrayEntry; });\n    var editScript = compareArrays(lastArray, array, options['dontLimitMoves']);\n\n    // Build the new mapping result\n    var newMappingResult = [];\n    var lastMappingResultIndex = 0;\n    var newMappingResultIndex = 0;\n\n    var nodesToDelete = [];\n    var itemsToProcess = [];\n    var itemsForBeforeRemoveCallbacks = [];\n    var itemsForMoveCallbacks = [];\n    var itemsForAfterAddCallbacks = [];\n    var mapData;\n\n    function itemMovedOrRetained(editScriptIndex, oldPosition) {\n        mapData = lastMappingResult[oldPosition];\n        if (newMappingResultIndex !== oldPosition)\n            itemsForMoveCallbacks[editScriptIndex] = mapData;\n        // Since updating the index might change the nodes, do so before calling fixUpContinuousNodeArray\n        mapData.indexObservable(newMappingResultIndex++);\n        fixUpContinuousNodeArray(mapData.mappedNodes, domNode);\n        newMappingResult.push(mapData);\n        itemsToProcess.push(mapData);\n    }\n\n    function callCallback(callback, items) {\n        if (callback) {\n            for (var i = 0, n = items.length; i < n; i++) {\n                if (items[i]) {\n                    arrayForEach(items[i].mappedNodes, function(node) {\n                        callback(node, i, items[i].arrayEntry);\n                    });\n                }\n            }\n        }\n    }\n\n    for (var i = 0, editScriptItem, movedIndex; editScriptItem = editScript[i]; i++) {\n        movedIndex = editScriptItem['moved'];\n        switch (editScriptItem['status']) {\n        case \"deleted\":\n            if (movedIndex === undefined) {\n                mapData = lastMappingResult[lastMappingResultIndex];\n\n                // Stop tracking changes to the mapping for these nodes\n                if (mapData.dependentObservable) {\n                    mapData.dependentObservable.dispose();\n                    mapData.dependentObservable = undefined;\n                }\n\n                // Queue these nodes for later removal\n                if (fixUpContinuousNodeArray(mapData.mappedNodes, domNode).length) {\n                    if (options['beforeRemove']) {\n                        newMappingResult.push(mapData);\n                        itemsToProcess.push(mapData);\n                        if (mapData.arrayEntry === deletedItemDummyValue) {\n                            mapData = null;\n                        } else {\n                            itemsForBeforeRemoveCallbacks[i] = mapData;\n                        }\n                    }\n                    if (mapData) {\n                        nodesToDelete.push.apply(nodesToDelete, mapData.mappedNodes);\n                    }\n                }\n            }\n            lastMappingResultIndex++;\n            break;\n\n        case \"retained\":\n            itemMovedOrRetained(i, lastMappingResultIndex++);\n            break;\n\n        case \"added\":\n            if (movedIndex !== undefined) {\n                itemMovedOrRetained(i, movedIndex);\n            } else {\n                mapData = { arrayEntry: editScriptItem['value'], indexObservable: observable(newMappingResultIndex++) };\n                newMappingResult.push(mapData);\n                itemsToProcess.push(mapData);\n                if (!isFirstExecution)\n                    itemsForAfterAddCallbacks[i] = mapData;\n            }\n            break;\n        }\n    }\n\n    // Store a copy of the array items we just considered so we can difference it next time\n    domData.set(domNode, lastMappingResultDomDataKey, newMappingResult);\n\n    // Call beforeMove first before any changes have been made to the DOM\n    callCallback(options['beforeMove'], itemsForMoveCallbacks);\n\n    // Next remove nodes for deleted items (or just clean if there's a beforeRemove callback)\n    arrayForEach(nodesToDelete, options['beforeRemove'] ? cleanNode : removeNode);\n\n    // Next add/reorder the remaining items (will include deleted items if there's a beforeRemove callback)\n    i = 0;\n    for (var nextNode = virtualElements.firstChild(domNode), lastNode, node; mapData = itemsToProcess[i]; i++) {\n        // Get nodes for newly added items\n        if (!mapData.mappedNodes)\n            extend(mapData, mapNodeAndRefreshWhenChanged(domNode, mapping, mapData.arrayEntry, callbackAfterAddingNodes, mapData.indexObservable));\n\n        // Put nodes in the right place if they aren't there already\n        for (var j = 0; node = mapData.mappedNodes[j]; nextNode = node.nextSibling, lastNode = node, j++) {\n            if (node !== nextNode)\n                virtualElements.insertAfter(domNode, node, lastNode);\n        }\n\n        // Run the callbacks for newly added nodes (for example, to apply bindings, etc.)\n        if (!mapData.initialized && callbackAfterAddingNodes) {\n            callbackAfterAddingNodes(mapData.arrayEntry, mapData.mappedNodes, mapData.indexObservable);\n            mapData.initialized = true;\n        }\n    }\n\n    // If there's a beforeRemove callback, call it after reordering.\n    // Note that we assume that the beforeRemove callback will usually be used to remove the nodes using\n    // some sort of animation, which is why we first reorder the nodes that will be removed. If the\n    // callback instead removes the nodes right away, it would be more efficient to skip reordering them.\n    // Perhaps we'll make that change in the future if this scenario becomes more common.\n    callCallback(options['beforeRemove'], itemsForBeforeRemoveCallbacks);\n\n    // Replace the stored values of deleted items with a dummy value. This provides two benefits: it marks this item\n    // as already \"removed\" so we won't call beforeRemove for it again, and it ensures that the item won't match up\n    // with an actual item in the array and appear as \"retained\" or \"moved\".\n    for (i = 0; i < itemsForBeforeRemoveCallbacks.length; ++i) {\n        if (itemsForBeforeRemoveCallbacks[i]) {\n            itemsForBeforeRemoveCallbacks[i].arrayEntry = deletedItemDummyValue;\n        }\n    }\n\n    // Finally call afterMove and afterAdd callbacks\n    callCallback(options['afterMove'], itemsForMoveCallbacks);\n    callCallback(options['afterAdd'], itemsForAfterAddCallbacks);\n}\n","\nimport {\n  setElementName, objectForEach\n} from 'tko.utils';\n\nimport {\n  unwrap\n} from 'tko.observable';\n\n\n\nvar attrHtmlToJavascriptMap = { 'class': 'className', 'for': 'htmlFor' };\n\nexport var attr = {\n    update: function(element, valueAccessor, allBindings) {\n        var value = unwrap(valueAccessor()) || {};\n        objectForEach(value, function(attrName, attrValue) {\n            attrValue = unwrap(attrValue);\n\n            // To cover cases like \"attr: { checked:someProp }\", we want to remove the attribute entirely\n            // when someProp is a \"no value\"-like value (strictly null, false, or undefined)\n            // (because the absence of the \"checked\" attr is how to mark an element as not checked, etc.)\n            var toRemove = (attrValue === false) || (attrValue === null) || (attrValue === undefined);\n\n            if (toRemove) {\n                element.removeAttribute(attrName);\n            }\n\n            if (!toRemove) {\n                element.setAttribute(attrName, attrValue.toString());\n            }\n\n            // Treat \"name\" specially - although you can think of it as an attribute, it also needs\n            // special handling on older versions of IE (https://github.com/SteveSanderson/knockout/pull/333)\n            // Deliberately being case-sensitive here because XHTML would regard \"Name\" as a different thing\n            // entirely, and there's no strong reason to allow for such casing in HTML.\n            if (attrName === \"name\") {\n                setElementName(element, toRemove ? \"\" : attrValue.toString());\n            }\n        });\n    }\n};\n","\nimport {\n    registerEventHandler, arrayIndexOf, addOrRemoveItem\n} from 'tko.utils';\n\nimport {\n    unwrap, dependencyDetection, isWriteableObservable\n} from 'tko.observable';\n\nimport {\n    computed, pureComputed\n} from 'tko.computed';\n\nexport var checked = {\n    after: ['value', 'attr'],\n    init: function (element, valueAccessor, allBindings) {\n        var checkedValue = pureComputed(function() {\n            // Treat \"value\" like \"checkedValue\" when it is included with \"checked\" binding\n            if (allBindings['has']('checkedValue')) {\n                return unwrap(allBindings.get('checkedValue'));\n            } else if (allBindings['has']('value')) {\n                return unwrap(allBindings.get('value'));\n            }\n\n            return element.value;\n        });\n\n        function updateModel() {\n            // This updates the model value from the view value.\n            // It runs in response to DOM events (click) and changes in checkedValue.\n            var isChecked = element.checked,\n                elemValue = useCheckedValue ? checkedValue() : isChecked;\n\n            // When we're first setting up this computed, don't change any model state.\n            if (dependencyDetection.isInitial()) {\n                return;\n            }\n\n            // We can ignore unchecked radio buttons, because some other radio\n            // button will be getting checked, and that one can take care of updating state.\n            if (isRadio && !isChecked) {\n                return;\n            }\n\n            var modelValue = dependencyDetection.ignore(valueAccessor);\n            if (valueIsArray) {\n                var writableValue = rawValueIsNonArrayObservable ? modelValue.peek() : modelValue;\n                if (oldElemValue !== elemValue) {\n                    // When we're responding to the checkedValue changing, and the element is\n                    // currently checked, replace the old elem value with the new elem value\n                    // in the model array.\n                    if (isChecked) {\n                        addOrRemoveItem(writableValue, elemValue, true);\n                        addOrRemoveItem(writableValue, oldElemValue, false);\n                    }\n\n                    oldElemValue = elemValue;\n                } else {\n                    // When we're responding to the user having checked/unchecked a checkbox,\n                    // add/remove the element value to the model array.\n                    addOrRemoveItem(writableValue, elemValue, isChecked);\n                }\n                if (rawValueIsNonArrayObservable && isWriteableObservable(modelValue)) {\n                    modelValue(writableValue);\n                }\n            } else {\n                valueAccessor(elemValue, {onlyIfChanged: true});\n            }\n        };\n\n        function updateView() {\n            // This updates the view value from the model value.\n            // It runs in response to changes in the bound (checked) value.\n            var modelValue = unwrap(valueAccessor());\n\n            if (valueIsArray) {\n                // When a checkbox is bound to an array, being checked represents its value being present in that array\n                element.checked = arrayIndexOf(modelValue, checkedValue()) >= 0;\n            } else if (isCheckbox) {\n                // When a checkbox is bound to any other value (not an array), being checked represents the value being trueish\n                element.checked = modelValue;\n            } else {\n                // For radio buttons, being checked means that the radio button's value corresponds to the model value\n                element.checked = (checkedValue() === modelValue);\n            }\n        };\n\n        var isCheckbox = element.type == \"checkbox\",\n            isRadio = element.type == \"radio\";\n\n        // Only bind to check boxes and radio buttons\n        if (!isCheckbox && !isRadio) {\n            return;\n        }\n\n        var rawValue = valueAccessor(),\n            valueIsArray = isCheckbox && (unwrap(rawValue) instanceof Array),\n            rawValueIsNonArrayObservable = !(valueIsArray && rawValue.push && rawValue.splice),\n            oldElemValue = valueIsArray ? checkedValue() : undefined,\n            useCheckedValue = isRadio || valueIsArray;\n\n        // Set up two computeds to update the binding:\n\n        // The first responds to changes in the checkedValue value and to element clicks\n        computed(updateModel, null, { disposeWhenNodeIsRemoved: element });\n        registerEventHandler(element, \"click\", updateModel);\n\n        // The second responds to changes in the model value (the one associated with the checked binding)\n        computed(updateView, null, { disposeWhenNodeIsRemoved: element });\n\n        rawValue = undefined;\n    }\n};\n\nexport var checkedValue = {\n    update: function (element, valueAccessor) {\n        element.value = unwrap(valueAccessor());\n    }\n};\n","\nimport {\n    objectForEach, registerEventHandler, makeArray\n} from 'tko.utils';\n\n// For certain common events (currently just 'click'), allow a simplified data-binding syntax\n// e.g. click:handler instead of the usual full-length event:{click:handler}\nexport function makeEventHandlerShortcut(eventName) {\n    return {\n        init: function(element, valueAccessor, allBindings, viewModel, bindingContext) {\n            var newValueAccessor = function () {\n                var result = {};\n                result[eventName] = valueAccessor();\n                return result;\n            };\n            eventHandler.init.call(this, element, newValueAccessor, allBindings, viewModel, bindingContext);\n        }\n    };\n}\n\nexport var eventHandler = {\n    init: function (element, valueAccessor, allBindings, viewModel, bindingContext) {\n        var eventsToHandle = valueAccessor() || {};\n        objectForEach(eventsToHandle, function(eventName) {\n            if (typeof eventName == \"string\") {\n                registerEventHandler(element, eventName, function (event) {\n                    var handlerReturnValue;\n                    var handlerFunction = valueAccessor()[eventName];\n                    if (!handlerFunction)\n                        return;\n\n                    try {\n                        // Take all the event args, and prefix with the viewmodel\n                        var argsForHandler = makeArray(arguments);\n                        viewModel = bindingContext['$data'];\n                        argsForHandler.unshift(viewModel);\n                        handlerReturnValue = handlerFunction.apply(viewModel, argsForHandler);\n                    } finally {\n                        if (handlerReturnValue !== true) { // Normally we want to prevent default action. Developer can override this be explicitly returning true.\n                            if (event.preventDefault)\n                                event.preventDefault();\n                            else\n                                event.returnValue = false;\n                        }\n                    }\n\n                    var bubble = allBindings.get(eventName + 'Bubble') !== false;\n                    if (!bubble) {\n                        event.cancelBubble = true;\n                        if (event.stopPropagation)\n                            event.stopPropagation();\n                    }\n                });\n            }\n        });\n    }\n};\n\n\nexport var onHandler = {\n    init: eventHandler.init,\n    preprocess: function (value /*, key, processBinding */) {\n        // Change `on.click: xyz` to `on.click: => xyz`\n        return \" => \" + value;\n    }\n};","\nimport {\n    makeEventHandlerShortcut\n} from './event.js';\n\n// 'click' is just a shorthand for the usual full-length event:{click:handler}\nexport var click = makeEventHandlerShortcut('click');\n","\nimport {\n    createSymbolOrString, toggleDomNodeCssClass, objectForEach, stringTrim\n} from 'tko.utils';\n\nimport {\n    unwrap\n} from 'tko.observable';\n\n\n\nexport var css = {\n    aliases: ['class'],\n    update: function (element, valueAccessor) {\n        var value = unwrap(valueAccessor());\n        if (value !== null && typeof value == \"object\") {\n            objectForEach(value, function(className, shouldHaveClass) {\n                shouldHaveClass = unwrap(shouldHaveClass);\n                toggleDomNodeCssClass(element, className, shouldHaveClass);\n            });\n        } else {\n            value = stringTrim(String(value || '')); // Make sure we don't try to store or set a non-string value\n            toggleDomNodeCssClass(element, element[css.classesWrittenByBindingKey], false);\n            element[css.classesWrittenByBindingKey] = value;\n            toggleDomNodeCssClass(element, value, true);\n        }\n    },\n    classesWrittenByBindingKey: createSymbolOrString('__ko__cssValue')\n};\n","\nimport {\n    unwrap\n} from 'tko.observable';\n\nexport var enable = {\n    update: function (element, valueAccessor) {\n        var value = unwrap(valueAccessor());\n        if (value && element.disabled) {\n            element.removeAttribute(\"disabled\");\n        } else if ((!value) && (!element.disabled)) {\n            element.disabled = true;\n        }\n    }\n};\n\nexport var disable = {\n    update: function (element, valueAccessor) {\n        enable.update(element, function() { return !unwrap(valueAccessor()); });\n    }\n};\n","\nimport {\n    createSymbolOrString, triggerEvent, registerEventHandler\n} from 'tko.utils';\n\nimport {\n    unwrap, dependencyDetection\n} from 'tko.observable';\n\nvar hasfocusUpdatingProperty = createSymbolOrString('__ko_hasfocusUpdating');\nvar hasfocusLastValue = createSymbolOrString('__ko_hasfocusLastValue');\n\nexport var hasfocus = {\n    init: function(element, valueAccessor /*, allBindings */) {\n        var handleElementFocusChange = function(isFocused) {\n            // Where possible, ignore which event was raised and determine focus state using activeElement,\n            // as this avoids phantom focus/blur events raised when changing tabs in modern browsers.\n            // However, not all KO-targeted browsers (Firefox 2) support activeElement. For those browsers,\n            // prevent a loss of focus when changing tabs/windows by setting a flag that prevents hasfocus\n            // from calling 'blur()' on the element when it loses focus.\n            // Discussion at https://github.com/SteveSanderson/knockout/pull/352\n            element[hasfocusUpdatingProperty] = true;\n            var ownerDoc = element.ownerDocument;\n            if (\"activeElement\" in ownerDoc) {\n                var active;\n                try {\n                    active = ownerDoc.activeElement;\n                } catch(e) {\n                    // IE9 throws if you access activeElement during page load (see issue #703)\n                    active = ownerDoc.body;\n                }\n                isFocused = (active === element);\n            }\n            // var modelValue = valueAccessor();\n            valueAccessor(isFocused, {onlyIfChanged: true});\n\n            //cache the latest value, so we can avoid unnecessarily calling focus/blur in the update function\n            element[hasfocusLastValue] = isFocused;\n            element[hasfocusUpdatingProperty] = false;\n        };\n        var handleElementFocusIn = handleElementFocusChange.bind(null, true);\n        var handleElementFocusOut = handleElementFocusChange.bind(null, false);\n\n        registerEventHandler(element, \"focus\", handleElementFocusIn);\n        registerEventHandler(element, \"focusin\", handleElementFocusIn); // For IE\n        registerEventHandler(element, \"blur\",  handleElementFocusOut);\n        registerEventHandler(element, \"focusout\",  handleElementFocusOut); // For IE\n    },\n    update: function(element, valueAccessor) {\n        var value = !!unwrap(valueAccessor());\n\n        if (!element[hasfocusUpdatingProperty] && element[hasfocusLastValue] !== value) {\n            value ? element.focus() : element.blur();\n\n            // In IE, the blur method doesn't always cause the element to lose focus (for example, if the window is not in focus).\n            // Setting focus to the body element does seem to be reliable in IE, but should only be used if we know that the current\n            // element was focused already.\n            if (!value && element[hasfocusLastValue]) {\n                element.ownerDocument.body.focus();\n            }\n\n            // For IE, which doesn't reliably fire \"focus\" or \"blur\" events synchronously\n            dependencyDetection.ignore(triggerEvent, null, [element, value ? \"focusin\" : \"focusout\"]);\n        }\n    }\n};\n","import {\n    setHtml, parseHtmlFragment, virtualElements\n} from 'tko.utils';\n\nimport {\n    unwrap\n} from 'tko.observable';\n\nexport var html = {\n    init: function() {\n        // Prevent binding on the dynamically-injected HTML (as developers are unlikely to expect that, and it has security implications)\n        return {\n            'controlsDescendantBindings': true\n        };\n    },\n    //\n    // Modify internal, per ko.punches and :\n    //      http://stackoverflow.com/a/15348139\n    update: function(element, valueAccessor) {\n        setHtml(element, valueAccessor());\n    },\n    allowVirtualElements: true\n};","\nimport {\n    applyBindingsToDescendants\n} from 'tko.bind';\n\n\nexport default {\n    init: function(element, valueAccessor, allBindings, viewModel, bindingContext) {\n        // Make a modified binding context, with extra properties, and apply it to descendant elements\n        var innerContext = bindingContext['extend'](valueAccessor);\n        applyBindingsToDescendants(innerContext, element);\n\n        return { 'controlsDescendantBindings': true };\n    },\n    allowVirtualElements: true\n};\n","\nimport { domData, tagNameLower } from 'tko.utils';\n\n\nvar hasDomDataExpandoProperty = '__ko__hasDomDataOptionValue__';\n\n// Normally, SELECT elements and their OPTIONs can only take value of type 'string' (because the values\n// are stored on DOM attributes). ko.selectExtensions provides a way for SELECTs/OPTIONs to have values\n// that are arbitrary objects. This is very convenient when implementing things like cascading dropdowns.\nexport var selectExtensions = {\n    optionsValueDomDataKey: undefined,\n\n    readValue : function(element) {\n        switch (tagNameLower(element)) {\n        case 'option':\n            if (element[hasDomDataExpandoProperty] === true)\n                return domData.get(element, selectExtensions.optionValueDomDataKey);\n            return element.value;\n        case 'select':\n            return element.selectedIndex >= 0 ? selectExtensions.readValue(element.options[element.selectedIndex]) : undefined;\n        default:\n            return element.value;\n        }\n    },\n\n    writeValue: function(element, value, allowUnset) {\n        switch (tagNameLower(element)) {\n        case 'option':\n            switch(typeof value) {\n            case \"string\":\n                domData.set(element, selectExtensions.optionValueDomDataKey, undefined);\n                if (hasDomDataExpandoProperty in element) { // IE <= 8 throws errors if you delete non-existent properties from a DOM node\n                    delete element[hasDomDataExpandoProperty];\n                }\n                element.value = value;\n                break;\n            default:\n                // Store arbitrary object using DomData\n                domData.set(element, selectExtensions.optionValueDomDataKey, value);\n                element[hasDomDataExpandoProperty] = true;\n\n                // Special treatment of numbers is just for backward compatibility. KO 1.2.1 wrote numerical values to element.value.\n                element.value = typeof value === \"number\" ? value : \"\";\n                break;\n            }\n            break;\n        case 'select':\n            if (value === \"\" || value === null)       // A blank string or null value will select the caption\n                value = undefined;\n            var selection = -1;\n            for (var i = 0, n = element.options.length, optionValue; i < n; ++i) {\n                optionValue = selectExtensions.readValue(element.options[i]);\n                // Include special check to handle selecting a caption with a blank string value\n                if (optionValue == value || (optionValue === \"\" && value === undefined)) {\n                    selection = i;\n                    break;\n                }\n            }\n            if (allowUnset || selection >= 0 || (value === undefined && element.size > 1)) {\n                element.selectedIndex = selection;\n            }\n            break;\n        default:\n            if ((value === null) || (value === undefined))\n                value = \"\";\n            element.value = value;\n            break;\n        }\n    }\n};\n","\nimport {\n    tagNameLower, arrayFilter, arrayMap, setTextContent, arrayIndexOf,\n    setOptionNodeSelectionState, triggerEvent, domData,\n    ensureSelectElementIsRenderedCorrectly\n} from 'tko.utils';\n\nimport {\n    unwrap, dependencyDetection\n} from 'tko.observable';\n\nimport {\n    setDomNodeChildrenFromArrayMapping\n} from 'tko.bind';\n\nimport {\n    selectExtensions\n} from './selectExtensions';\n\nvar captionPlaceholder = {};\n\nexport var options = {\n    init: function(element) {\n        if (tagNameLower(element) !== \"select\")\n            throw new Error(\"options binding applies only to SELECT elements\");\n\n        // Remove all existing <option>s.\n        while (element.length > 0) {\n            element.remove(0);\n        }\n\n        // Ensures that the binding processor doesn't try to bind the options\n        return { 'controlsDescendantBindings': true };\n    },\n    update: function (element, valueAccessor, allBindings) {\n        function selectedOptions() {\n            return arrayFilter(element.options, function (node) { return node.selected; });\n        }\n\n        var selectWasPreviouslyEmpty = element.length == 0,\n            multiple = element.multiple,\n            previousScrollTop = (!selectWasPreviouslyEmpty && multiple) ? element.scrollTop : null,\n            unwrappedArray = unwrap(valueAccessor()),\n            valueAllowUnset = allBindings.get('valueAllowUnset') && allBindings['has']('value'),\n            includeDestroyed = allBindings.get('optionsIncludeDestroyed'),\n            arrayToDomNodeChildrenOptions = {},\n            captionValue,\n            filteredArray,\n            previousSelectedValues = [];\n\n        if (!valueAllowUnset) {\n            if (multiple) {\n                previousSelectedValues = arrayMap(selectedOptions(), selectExtensions.readValue);\n            } else if (element.selectedIndex >= 0) {\n                previousSelectedValues.push(selectExtensions.readValue(element.options[element.selectedIndex]));\n            }\n        }\n\n        if (unwrappedArray) {\n            if (typeof unwrappedArray.length == \"undefined\") // Coerce single value into array\n                unwrappedArray = [unwrappedArray];\n\n            // Filter out any entries marked as destroyed\n            filteredArray = arrayFilter(unwrappedArray, function(item) {\n                return includeDestroyed || item === undefined || item === null || !unwrap(item['_destroy']);\n            });\n\n            // If caption is included, add it to the array\n            if (allBindings['has']('optionsCaption')) {\n                captionValue = unwrap(allBindings.get('optionsCaption'));\n                // If caption value is null or undefined, don't show a caption\n                if (captionValue !== null && captionValue !== undefined) {\n                    filteredArray.unshift(captionPlaceholder);\n                }\n            }\n        } else {\n            // If a falsy value is provided (e.g. null), we'll simply empty the select element\n        }\n\n        function applyToObject(object, predicate, defaultValue) {\n            var predicateType = typeof predicate;\n            if (predicateType == \"function\")    // Given a function; run it against the data value\n                return predicate(object);\n            else if (predicateType == \"string\") // Given a string; treat it as a property name on the data value\n                return object[predicate];\n            else                                // Given no optionsText arg; use the data value itself\n                return defaultValue;\n        }\n\n        // The following functions can run at two different times:\n        // The first is when the whole array is being updated directly from this binding handler.\n        // The second is when an observable value for a specific array entry is updated.\n        // oldOptions will be empty in the first case, but will be filled with the previously generated option in the second.\n        var itemUpdate = false;\n        function optionForArrayItem(arrayEntry, index, oldOptions) {\n            if (oldOptions.length) {\n                previousSelectedValues = !valueAllowUnset && oldOptions[0].selected ? [ selectExtensions.readValue(oldOptions[0]) ] : [];\n                itemUpdate = true;\n            }\n            var option = element.ownerDocument.createElement(\"option\");\n            if (arrayEntry === captionPlaceholder) {\n                setTextContent(option, allBindings.get('optionsCaption'));\n                selectExtensions.writeValue(option, undefined);\n            } else {\n                // Apply a value to the option element\n                var optionValue = applyToObject(arrayEntry, allBindings.get('optionsValue'), arrayEntry);\n                selectExtensions.writeValue(option, unwrap(optionValue));\n\n                // Apply some text to the option element\n                var optionText = applyToObject(arrayEntry, allBindings.get('optionsText'), optionValue);\n                setTextContent(option, optionText);\n            }\n            return [option];\n        }\n\n        // By using a beforeRemove callback, we delay the removal until after new items are added. This fixes a selection\n        // problem in IE<=8 and Firefox. See https://github.com/knockout/knockout/issues/1208\n        arrayToDomNodeChildrenOptions['beforeRemove'] =\n            function (option) {\n                element.removeChild(option);\n            };\n\n        function setSelectionCallback(arrayEntry, newOptions) {\n            if (itemUpdate && valueAllowUnset) {\n                // The model value is authoritative, so make sure its value is the one selected\n                // There is no need to use dependencyDetection.ignore since setDomNodeChildrenFromArrayMapping does so already.\n                selectExtensions.writeValue(element, unwrap(allBindings.get('value')), true /* allowUnset */);\n            } else if (previousSelectedValues.length) {\n                // IE6 doesn't like us to assign selection to OPTION nodes before they're added to the document.\n                // That's why we first added them without selection. Now it's time to set the selection.\n                var isSelected = arrayIndexOf(previousSelectedValues, selectExtensions.readValue(newOptions[0])) >= 0;\n                setOptionNodeSelectionState(newOptions[0], isSelected);\n\n                // If this option was changed from being selected during a single-item update, notify the change\n                if (itemUpdate && !isSelected) {\n                    dependencyDetection.ignore(triggerEvent, null, [element, \"change\"]);\n                }\n            }\n        }\n\n        var callback = setSelectionCallback;\n        if (allBindings['has']('optionsAfterRender') && typeof allBindings.get('optionsAfterRender') == \"function\") {\n            callback = function(arrayEntry, newOptions) {\n                setSelectionCallback(arrayEntry, newOptions);\n                dependencyDetection.ignore(allBindings.get('optionsAfterRender'), null, [newOptions[0], arrayEntry !== captionPlaceholder ? arrayEntry : undefined]);\n            }\n        }\n\n        setDomNodeChildrenFromArrayMapping(element, filteredArray, optionForArrayItem, arrayToDomNodeChildrenOptions, callback);\n\n        dependencyDetection.ignore(function () {\n            if (valueAllowUnset) {\n                // The model value is authoritative, so make sure its value is the one selected\n                selectExtensions.writeValue(element, unwrap(allBindings.get('value')), true /* allowUnset */);\n            } else {\n                // Determine if the selection has changed as a result of updating the options list\n                var selectionChanged;\n                if (multiple) {\n                    // For a multiple-select box, compare the new selection count to the previous one\n                    // But if nothing was selected before, the selection can't have changed\n                    selectionChanged = previousSelectedValues.length && selectedOptions().length < previousSelectedValues.length;\n                } else {\n                    // For a single-select box, compare the current value to the previous value\n                    // But if nothing was selected before or nothing is selected now, just look for a change in selection\n                    selectionChanged = (previousSelectedValues.length && element.selectedIndex >= 0)\n                        ? (selectExtensions.readValue(element.options[element.selectedIndex]) !== previousSelectedValues[0])\n                        : (previousSelectedValues.length || element.selectedIndex >= 0);\n                }\n\n                // Ensure consistency between model value and selected option.\n                // If the dropdown was changed so that selection is no longer the same,\n                // notify the value or selectedOptions binding.\n                if (selectionChanged) {\n                    triggerEvent(element, \"change\");\n                }\n            }\n        });\n\n        // Workaround for IE bug\n        ensureSelectElementIsRenderedCorrectly(element);\n\n        if (previousScrollTop && Math.abs(previousScrollTop - element.scrollTop) > 20)\n            element.scrollTop = previousScrollTop;\n    }\n};\n\nselectExtensions.optionValueDomDataKey = domData.nextKey();\n","\nimport {\n    arrayForEach, setOptionNodeSelectionState, arrayIndexOf,\n    registerEventHandler, tagNameLower\n} from 'tko.utils';\n\nimport {\n    unwrap\n} from 'tko.observable';\n\nimport {\n    selectExtensions\n} from './selectExtensions';\n\n\nexport var selectedOptions = {\n    after: ['options', 'foreach'],\n\n    init: function (element, valueAccessor, allBindings) {\n        registerEventHandler(element, \"change\", function () {\n            var value = valueAccessor(), valueToWrite = [];\n            arrayForEach(element.getElementsByTagName(\"option\"), function(node) {\n                if (node.selected)\n                    valueToWrite.push(selectExtensions.readValue(node));\n            });\n            valueAccessor(valueToWrite);\n        });\n    },\n\n    update: function (element, valueAccessor) {\n        if (tagNameLower(element) != \"select\")\n            throw new Error(\"values binding applies only to SELECT elements\");\n\n        var newValue = unwrap(valueAccessor()),\n            previousScrollTop = element.scrollTop;\n\n        if (newValue && typeof newValue.length == \"number\") {\n            arrayForEach(element.getElementsByTagName(\"option\"), function(node) {\n                var isSelected = arrayIndexOf(newValue, selectExtensions.readValue(node)) >= 0;\n                if (node.selected != isSelected) {      // This check prevents flashing of the select element in IE\n                    setOptionNodeSelectionState(node, isSelected);\n                }\n            });\n        }\n\n        element.scrollTop = previousScrollTop;\n    }\n};\n","\nimport {\n    objectForEach\n} from 'tko.utils';\n\nimport {\n    unwrap\n} from 'tko.observable';\n\nexport var style = {\n    update: function (element, valueAccessor) {\n        var value = unwrap(valueAccessor() || {});\n        objectForEach(value, function(styleName, styleValue) {\n            styleValue = unwrap(styleValue);\n\n            if (styleValue === null || styleValue === undefined || styleValue === false) {\n                // Empty string removes the value, whereas null/undefined have no effect\n                styleValue = \"\";\n            }\n\n            element.style[styleName] = styleValue;\n        });\n    }\n};\n","\nimport {\n    registerEventHandler\n} from 'tko.utils';\n\nexport var submit = {\n    init: function (element, valueAccessor, allBindings, viewModel, bindingContext) {\n        if (typeof valueAccessor() != \"function\")\n            throw new Error(\"The value for a submit binding must be a function\");\n        registerEventHandler(element, \"submit\", function (event) {\n            var handlerReturnValue;\n            var value = valueAccessor();\n            try { handlerReturnValue = value.call(bindingContext['$data'], element); }\n            finally {\n                if (handlerReturnValue !== true) { // Normally we want to prevent default action. Developer can override this be explicitly returning true.\n                    if (event.preventDefault)\n                        event.preventDefault();\n                    else\n                        event.returnValue = false;\n                }\n            }\n        });\n    }\n};\n","import {\n    setTextContent\n} from 'tko.utils';\n\nexport var text = {\n    init: function() {\n        // Prevent binding on the dynamically-injected text node (as developers are unlikely to expect that, and it has security implications).\n        // It should also make things faster, as we no longer have to consider whether the text node might be bindable.\n        return { controlsDescendantBindings: true };\n    },\n    update: function (element, valueAccessor) {\n        setTextContent(element, valueAccessor());\n    },\n    allowVirtualElements: true\n};\n","\nimport {\n    domData, registerEventHandler, ieVersion, safeSetTimeout, options,\n    arrayForEach, tagNameLower\n} from 'tko.utils';\n\nimport {\n    unwrap\n} from 'tko.observable';\n\nimport {\n    computed\n} from 'tko.computed';\n\nvar parseVersion, operaVersion, userAgent, safariVersion, firefoxVersion;\n\nif (window.navigator) {\n    parseVersion = function (matches) {\n        if (matches) {\n            return parseFloat(matches[1]);\n        }\n    };\n\n    // Detect various browser versions because some old versions don't fully support the 'input' event\n    operaVersion = window.opera && window.opera.version && parseInt(window.opera.version()),\n        userAgent = window.navigator.userAgent,\n        safariVersion = parseVersion(userAgent.match(/^(?:(?!chrome).)*version\\/([^ ]*) safari/i)),\n        firefoxVersion = parseVersion(userAgent.match(/Firefox\\/([^ ]*)/));\n}\n\n// IE 8 and 9 have bugs that prevent the normal events from firing when the value changes.\n// But it does fire the 'selectionchange' event on many of those, presumably because the\n// cursor is moving and that counts as the selection changing. The 'selectionchange' event is\n// fired at the document level only and doesn't directly indicate which element changed. We\n// set up just one event handler for the document and use 'activeElement' to determine which\n// element was changed.\nif (ieVersion < 10) {\n    var selectionChangeRegisteredName = domData.nextKey(),\n        selectionChangeHandlerName = domData.nextKey();\n    var selectionChangeHandler = function(event) {\n        var target = this.activeElement,\n            handler = target && domData.get(target, selectionChangeHandlerName);\n        if (handler) {\n            handler(event);\n        }\n    };\n    var registerForSelectionChangeEvent = function (element, handler) {\n        var ownerDoc = element.ownerDocument;\n        if (!domData.get(ownerDoc, selectionChangeRegisteredName)) {\n            domData.set(ownerDoc, selectionChangeRegisteredName, true);\n            registerEventHandler(ownerDoc, 'selectionchange', selectionChangeHandler);\n        }\n        domData.set(element, selectionChangeHandlerName, handler);\n    };\n}\n\nexport var textInput = {\n    aliases: 'textinput',\n    init: function (element, valueAccessor) {\n\n        var previousElementValue = element.value,\n            timeoutHandle,\n            elementValueBeforeEvent;\n\n        var updateModel = function (event) {\n            clearTimeout(timeoutHandle);\n            elementValueBeforeEvent = timeoutHandle = undefined;\n\n            var elementValue = element.value;\n            if (previousElementValue !== elementValue) {\n                // Provide a way for tests to know exactly which event was processed\n                if (options.debug && event) element['_ko_textInputProcessedEvent'] = event.type;\n                previousElementValue = elementValue;\n                valueAccessor(elementValue);\n            }\n        };\n\n        var deferUpdateModel = function (event) {\n            if (!timeoutHandle) {\n                // The elementValueBeforeEvent variable is set *only* during the brief gap between an\n                // event firing and the updateModel function running. This allows us to ignore model\n                // updates that are from the previous state of the element, usually due to techniques\n                // such as rateLimit. Such updates, if not ignored, can cause keystrokes to be lost.\n                elementValueBeforeEvent = element.value;\n                var handler = options.debug ? updateModel.bind(element, {type: event.type}) : updateModel;\n                timeoutHandle = safeSetTimeout(handler, 4);\n            }\n        };\n\n        // IE9 will mess up the DOM if you handle events synchronously which results in DOM changes (such as other bindings);\n        // so we'll make sure all updates are asynchronous\n        var ieUpdateModel = ieVersion === 9 ? deferUpdateModel : updateModel;\n\n        var updateView = function () {\n            var modelValue = unwrap(valueAccessor());\n\n            if (modelValue === null || modelValue === undefined) {\n                modelValue = '';\n            }\n\n            if (elementValueBeforeEvent !== undefined && modelValue === elementValueBeforeEvent) {\n                safeSetTimeout(updateView, 4);\n                return;\n            }\n\n            // Update the element only if the element and model are different. On some browsers, updating the value\n            // will move the cursor to the end of the input, which would be bad while the user is typing.\n            if (element.value !== modelValue) {\n                previousElementValue = modelValue;  // Make sure we ignore events (propertychange) that result from updating the value\n                element.value = modelValue;\n            }\n        };\n\n        var onEvent = function (event, handler) {\n            registerEventHandler(element, event, handler);\n        };\n\n        if (options.debug && textInput._forceUpdateOn) {\n            // Provide a way for tests to specify exactly which events are bound\n            arrayForEach(textInput._forceUpdateOn, function(eventName) {\n                if (eventName.slice(0,5) == 'after') {\n                    onEvent(eventName.slice(5), deferUpdateModel);\n                } else {\n                    onEvent(eventName, updateModel);\n                }\n            });\n        } else {\n            if (ieVersion < 10) {\n                // Internet Explorer <= 8 doesn't support the 'input' event, but does include 'propertychange' that fires whenever\n                // any property of an element changes. Unlike 'input', it also fires if a property is changed from JavaScript code,\n                // but that's an acceptable compromise for this binding. IE 9 does support 'input', but since it doesn't fire it\n                // when using autocomplete, we'll use 'propertychange' for it also.\n                onEvent('propertychange', function(event) {\n                    if (event.propertyName === 'value') {\n                        ieUpdateModel(event);\n                    }\n                });\n\n                if (ieVersion == 8) {\n                    // IE 8 has a bug where it fails to fire 'propertychange' on the first update following a value change from\n                    // JavaScript code. It also doesn't fire if you clear the entire value. To fix this, we bind to the following\n                    // events too.\n                    onEvent('keyup', updateModel);      // A single keystoke\n                    onEvent('keydown', updateModel);    // The first character when a key is held down\n                }\n                if (ieVersion >= 8) {\n                    // Internet Explorer 9 doesn't fire the 'input' event when deleting text, including using\n                    // the backspace, delete, or ctrl-x keys, clicking the 'x' to clear the input, dragging text\n                    // out of the field, and cutting or deleting text using the context menu. 'selectionchange'\n                    // can detect all of those except dragging text out of the field, for which we use 'dragend'.\n                    // These are also needed in IE8 because of the bug described above.\n                    registerForSelectionChangeEvent(element, ieUpdateModel);  // 'selectionchange' covers cut, paste, drop, delete, etc.\n                    onEvent('dragend', deferUpdateModel);\n                }\n            } else {\n                // All other supported browsers support the 'input' event, which fires whenever the content of the element is changed\n                // through the user interface.\n                onEvent('input', updateModel);\n\n                if (safariVersion < 5 && tagNameLower(element) === \"textarea\") {\n                    // Safari <5 doesn't fire the 'input' event for <textarea> elements (it does fire 'textInput'\n                    // but only when typing). So we'll just catch as much as we can with keydown, cut, and paste.\n                    onEvent('keydown', deferUpdateModel);\n                    onEvent('paste', deferUpdateModel);\n                    onEvent('cut', deferUpdateModel);\n                } else if (operaVersion < 11) {\n                    // Opera 10 doesn't always fire the 'input' event for cut, paste, undo & drop operations.\n                    // We can try to catch some of those using 'keydown'.\n                    onEvent('keydown', deferUpdateModel);\n                } else if (firefoxVersion < 4.0) {\n                    // Firefox <= 3.6 doesn't fire the 'input' event when text is filled in through autocomplete\n                    onEvent('DOMAutoComplete', updateModel);\n\n                    // Firefox <=3.5 doesn't fire the 'input' event when text is dropped into the input.\n                    onEvent('dragdrop', updateModel);       // <3.5\n                    onEvent('drop', updateModel);           // 3.5\n                }\n            }\n        }\n\n        // Bind to the change event so that we can catch programmatic updates of the value that fire this event.\n        onEvent('change', updateModel);\n\n        computed(updateView, null, { disposeWhenNodeIsRemoved: element });\n    }\n};\n\n// // textinput is an alias for textInput\n// ko.bindingHandlers['textinput'] = {\n//     // preprocess is the only way to set up a full alias\n//     'preprocess': function (value, name, addBinding) {\n//         addBinding('textInput', value);\n//     }\n// };","\nimport {\n    setElementName\n} from 'tko.utils';\n\nexport var uniqueName = {\n    init: function (element, valueAccessor) {\n        if (valueAccessor()) {\n            var name = \"ko_unique_\" + (++uniqueName.currentIndex);\n            setElementName(element, name);\n        }\n    },\n    currentIndex: 0\n};\n","\nimport {\n    arrayPushAll, arrayGetDistinctValues, ieVersion, arrayIndexOf,\n    registerEventHandler, stringStartsWith, safeSetTimeout,\n    tagNameLower, triggerEvent, arrayForEach\n} from 'tko.utils';\n\nimport {\n    unwrap, dependencyDetection\n} from 'tko.observable';\n\nimport {\n    computed\n} from 'tko.computed';\n\nimport {\n    applyBindingAccessorsToNode\n} from 'tko.bind';\n\nimport {\n    selectExtensions\n} from './selectExtensions';\n\n\nexport var value = {\n    after: ['options', 'foreach'],\n    init: function (element, valueAccessor, allBindings) {\n        // If the value binding is placed on a radio/checkbox, then just pass through to checkedValue and quit\n        if (element.tagName.toLowerCase() == \"input\" && (element.type == \"checkbox\" || element.type == \"radio\")) {\n            applyBindingAccessorsToNode(element, { 'checkedValue': valueAccessor });\n            return;\n        }\n\n        // Always catch \"change\" event; possibly other events too if asked\n        var eventsToCatch = [\"change\"];\n        var requestedEventsToCatch = allBindings.get(\"valueUpdate\");\n        var propertyChangedFired = false;\n        var elementValueBeforeEvent = null;\n\n        if (requestedEventsToCatch) {\n            if (typeof requestedEventsToCatch == \"string\") // Allow both individual event names, and arrays of event names\n                requestedEventsToCatch = [requestedEventsToCatch];\n            arrayPushAll(eventsToCatch, requestedEventsToCatch);\n            eventsToCatch = arrayGetDistinctValues(eventsToCatch);\n        }\n\n        var valueUpdateHandler = function() {\n            elementValueBeforeEvent = null;\n            propertyChangedFired = false;\n            var modelValue = valueAccessor();\n            var elementValue = selectExtensions.readValue(element);\n            valueAccessor(elementValue);\n        }\n\n        // Workaround for https://github.com/SteveSanderson/knockout/issues/122\n        // IE doesn't fire \"change\" events on textboxes if the user selects a value from its autocomplete list\n        var ieAutoCompleteHackNeeded = ieVersion && element.tagName.toLowerCase() == \"input\" && element.type == \"text\"\n                                       && element.autocomplete != \"off\" && (!element.form || element.form.autocomplete != \"off\");\n        if (ieAutoCompleteHackNeeded && arrayIndexOf(eventsToCatch, \"propertychange\") == -1) {\n            registerEventHandler(element, \"propertychange\", function () { propertyChangedFired = true });\n            registerEventHandler(element, \"focus\", function () { propertyChangedFired = false });\n            registerEventHandler(element, \"blur\", function() {\n                if (propertyChangedFired) {\n                    valueUpdateHandler();\n                }\n            });\n        }\n\n        arrayForEach(eventsToCatch, function(eventName) {\n            // The syntax \"after<eventname>\" means \"run the handler asynchronously after the event\"\n            // This is useful, for example, to catch \"keydown\" events after the browser has updated the control\n            // (otherwise, ko.selectExtensions.readValue(this) will receive the control's value *before* the key event)\n            var handler = valueUpdateHandler;\n            if (stringStartsWith(eventName, \"after\")) {\n                handler = function() {\n                    // The elementValueBeforeEvent variable is non-null *only* during the brief gap between\n                    // a keyX event firing and the valueUpdateHandler running, which is scheduled to happen\n                    // at the earliest asynchronous opportunity. We store this temporary information so that\n                    // if, between keyX and valueUpdateHandler, the underlying model value changes separately,\n                    // we can overwrite that model value change with the value the user just typed. Otherwise,\n                    // techniques like rateLimit can trigger model changes at critical moments that will\n                    // override the user's inputs, causing keystrokes to be lost.\n                    elementValueBeforeEvent = selectExtensions.readValue(element);\n                    safeSetTimeout(valueUpdateHandler, 0);\n                };\n                eventName = eventName.substring(\"after\".length);\n            }\n            registerEventHandler(element, eventName, handler);\n        });\n\n        var updateFromModel = function () {\n            var newValue = unwrap(valueAccessor());\n            var elementValue = selectExtensions.readValue(element);\n\n            if (elementValueBeforeEvent !== null && newValue === elementValueBeforeEvent) {\n                safeSetTimeout(updateFromModel, 0);\n                return;\n            }\n\n            var valueHasChanged = (newValue !== elementValue);\n\n            if (valueHasChanged) {\n                if (tagNameLower(element) === \"select\") {\n                    var allowUnset = allBindings.get('valueAllowUnset');\n                    var applyValueAction = function () {\n                        selectExtensions.writeValue(element, newValue, allowUnset);\n                    };\n                    applyValueAction();\n\n                    if (!allowUnset && newValue !== selectExtensions.readValue(element)) {\n                        // If you try to set a model value that can't be represented in an already-populated dropdown, reject that change,\n                        // because you're not allowed to have a model value that disagrees with a visible UI selection.\n                        dependencyDetection.ignore(triggerEvent, null, [element, \"change\"]);\n                    } else {\n                        // Workaround for IE6 bug: It won't reliably apply values to SELECT nodes during the same execution thread\n                        // right after you've changed the set of OPTION nodes on it. So for that node type, we'll schedule a second thread\n                        // to apply the value as well.\n                        safeSetTimeout(applyValueAction, 0);\n                    }\n                } else {\n                    selectExtensions.writeValue(element, newValue);\n                }\n            }\n        };\n\n        computed(updateFromModel, null, { disposeWhenNodeIsRemoved: element });\n    }\n};\n","import {\n    unwrap\n} from 'tko.observable';\n\nexport var visible = {\n    update: function (element, valueAccessor) {\n        var value = unwrap(valueAccessor());\n        var isCurrentlyVisible = !(element.style.display == \"none\");\n        if (value && !isCurrentlyVisible)\n            element.style.display = \"\";\n        else if ((!value) && isCurrentlyVisible)\n            element.style.display = \"none\";\n    }\n};\n\nexport var hidden = {\n    update: function (element, valueAccessor) {\n        visible.update.call(this, element, function () { return !unwrap(valueAccessor()); });\n    }\n};\n","import {\n  applyBindingsToDescendants\n} from 'tko.bind';\n\n\nexport var using = {\n    init: function(element, valueAccessor, allBindings, viewModel, bindingContext) {\n        var innerContext = bindingContext.createChildContext(valueAccessor);\n        applyBindingsToDescendants(innerContext, element);\n        return { controlsDescendantBindings: true };\n    },\n    allowVirtualElements: true\n};\n","\nimport {attr} from './src/attr.js';\nimport {checked, checkedValue} from './src/checked.js';\nimport {click} from './src/click.js';\nimport {css} from './src/css.js';\nimport {enable, disable} from './src/enableDisable.js';\nimport {eventHandler, onHandler} from './src/event.js';\nimport {hasfocus} from './src/hasfocus.js';\nimport {html} from './src/html.js';\nimport $let from './src/let.js';\nimport {options} from './src/options.js';\nimport {selectedOptions} from './src/selectedOptions.js';\nimport {style} from './src/style.js';\nimport {submit} from './src/submit.js';\nimport {text} from './src/text.js';\nimport {textInput} from './src/textInput.js';\nimport {uniqueName} from './src/uniqueName.js';\nimport {value} from './src/value.js';\nimport {visible, hidden} from './src/visible.js';\nimport {using} from './src/using.js';\n\nexport var bindings = {\n    attr: attr,\n    checked: checked,\n    checkedValue: checkedValue,\n    click: click,\n    css: css, 'class': css,\n    enable: enable,\n    'event': eventHandler,\n    disable: disable,\n    hasfocus: hasfocus, hasFocus: hasfocus,\n    hidden: hidden,\n    html: html,\n    'let': $let,\n    on: onHandler,\n    options: options,\n    selectedOptions: selectedOptions,\n    style: style,\n    submit: submit,\n    text: text,\n    textInput: textInput,\n    textinput: textInput,\n    uniqueName: uniqueName,\n    using: using,\n    value: value,\n    visible: visible\n};","// A template source represents a read/write way of accessing a template. This is to eliminate the need for template loading/saving\n// logic to be duplicated in every template engine (and means they can all work with anonymous templates, etc.)\n//\n// Two are provided by default:\n//  1. ko.templateSources.domElement       - reads/writes the text content of an arbitrary DOM element\n//  2. ko.templateSources.anonymousElement - uses ko.utils.domData to read/write text *associated* with the DOM element, but\n//                                           without reading/writing the actual element text content, since it will be overwritten\n//                                           with the rendered template output.\n// You can implement your own template source if you want to fetch/store templates somewhere other than in DOM elements.\n// Template sources need to have the following functions:\n//   text() \t\t\t- returns the template text from your storage location\n//   text(value)\t\t- writes the supplied template text to your storage location\n//   data(key)\t\t\t- reads values stored using data(key, value) - see below\n//   data(key, value)\t- associates \"value\" with this template and the key \"key\". Is used to store information like \"isRewritten\".\n//\n// Optionally, template sources can also have the following functions:\n//   nodes()            - returns a DOM element containing the nodes of this template, where available\n//   nodes(value)       - writes the given DOM element to your storage location\n// If a DOM element is available for a given template source, template engines are encouraged to use it in preference over text()\n// for improved speed. However, all templateSources must supply text() even if they don't supply nodes().\n//\n// Once you've implemented a templateSource, make your template engine use it by subclassing whatever template engine you were\n// using and overriding \"makeTemplateSource\" to return an instance of your custom template source.\n\nimport {\n    tagNameLower as tagNameLowerFn, setHtml, domData\n} from 'tko.utils';\n\n\n// ---- ko.templateSources.domElement -----\n\n// template types\nvar templateScript = 1,\n    templateTextArea = 2,\n    templateTemplate = 3,\n    templateElement = 4;\n\nexport function domElement(element) {\n    this.domElement = element;\n\n    if (!element) { return; }\n    var tagNameLower = tagNameLowerFn(element);\n    this.templateType =\n        tagNameLower === \"script\" ? templateScript :\n        tagNameLower === \"textarea\" ? templateTextArea :\n            // For browsers with proper <template> element support, where the .content property gives a document fragment\n        tagNameLower == \"template\" && element.content && element.content.nodeType === 11 ? templateTemplate :\n        templateElement;\n}\n\ndomElement.prototype.text = function(/* valueToWrite */) {\n    var elemContentsProperty = this.templateType === templateScript ? \"text\"\n                             : this.templateType === templateTextArea ? \"value\"\n                             : \"innerHTML\";\n\n    if (arguments.length == 0) {\n        return this.domElement[elemContentsProperty];\n    } else {\n        var valueToWrite = arguments[0];\n        if (elemContentsProperty === \"innerHTML\")\n            setHtml(this.domElement, valueToWrite);\n        else\n            this.domElement[elemContentsProperty] = valueToWrite;\n    }\n};\n\nvar dataDomDataPrefix = domData.nextKey() + \"_\";\ndomElement.prototype.data = function(key /*, valueToWrite */) {\n    if (arguments.length === 1) {\n        return domData.get(this.domElement, dataDomDataPrefix + key);\n    } else {\n        domData.set(this.domElement, dataDomDataPrefix + key, arguments[1]);\n    }\n};\n\nvar templatesDomDataKey = domData.nextKey();\nfunction getTemplateDomData(element) {\n    return domData.get(element, templatesDomDataKey) || {};\n}\nfunction setTemplateDomData(element, data) {\n    domData.set(element, templatesDomDataKey, data);\n}\n\ndomElement.prototype.nodes = function(/* valueToWrite */) {\n    var element = this.domElement;\n    if (arguments.length == 0) {\n        var templateData = getTemplateDomData(element),\n            containerData = templateData.containerData;\n        return containerData || (\n            this.templateType === templateTemplate ? element.content :\n            this.templateType === templateElement ? element :\n            undefined);\n    } else {\n        var valueToWrite = arguments[0];\n        setTemplateDomData(element, {containerData: valueToWrite});\n    }\n};\n\n// ---- ko.templateSources.anonymousTemplate -----\n// Anonymous templates are normally saved/retrieved as DOM nodes through \"nodes\".\n// For compatibility, you can also read \"text\"; it will be serialized from the nodes on demand.\n// Writing to \"text\" is still supported, but then the template data will not be available as DOM nodes.\n\nexport function anonymousTemplate(element) {\n    this.domElement = element;\n}\n\nanonymousTemplate.prototype = new domElement();\nanonymousTemplate.prototype.constructor = anonymousTemplate;\nanonymousTemplate.prototype.text = function(/* valueToWrite */) {\n    if (arguments.length == 0) {\n        var templateData = getTemplateDomData(this.domElement);\n        if (templateData.textData === undefined && templateData.containerData)\n            templateData.textData = templateData.containerData.innerHTML;\n        return templateData.textData;\n    } else {\n        var valueToWrite = arguments[0];\n        setTemplateDomData(this.domElement, {textData: valueToWrite});\n    }\n};\n","// If you want to make a custom template engine,\n//\n// [1] Inherit from this class (like ko.nativeTemplateEngine does)\n// [2] Override 'renderTemplateSource', supplying a function with this signature:\n//\n//        function (templateSource, bindingContext, options) {\n//            // - templateSource.text() is the text of the template you should render\n//            // - bindingContext.$data is the data you should pass into the template\n//            //   - you might also want to make bindingContext.$parent, bindingContext.$parents,\n//            //     and bindingContext.$root available in the template too\n//            // - options gives you access to any other properties set on \"data-bind: { template: options }\"\n//            // - templateDocument is the document object of the template\n//            //\n//            // Return value: an array of DOM nodes\n//        }\n//\n// [3] Override 'createJavaScriptEvaluatorBlock', supplying a function with this signature:\n//\n//        function (script) {\n//            // Return value: Whatever syntax means \"Evaluate the JavaScript statement 'script' and output the result\"\n//            //               For example, the jquery.tmpl template engine converts 'someScript' to '${ someScript }'\n//        }\n//\n//     This is only necessary if you want to allow data-bind attributes to reference arbitrary template variables.\n//     If you don't want to allow that, you can set the property 'allowTemplateRewriting' to false (like ko.nativeTemplateEngine does)\n//     and then you don't need to override 'createJavaScriptEvaluatorBlock'.\n\nimport {\n  extend, options\n} from 'tko.utils';\n\nimport {\n  domElement, anonymousTemplate\n} from './templateSources';\n\nexport function templateEngine() { };\n\nextend(templateEngine.prototype, {\n  renderTemplateSource: function (templateSource, bindingContext, options, templateDocument) {\n      options.onError(\"Override renderTemplateSource\");\n  },\n\n  createJavaScriptEvaluatorBlock: function (script) {\n      options.onError(\"Override createJavaScriptEvaluatorBlock\");\n  },\n\n  makeTemplateSource: function(template, templateDocument) {\n      // Named template\n      if (typeof template == \"string\") {\n          templateDocument = templateDocument || document;\n          var elem = templateDocument.getElementById(template);\n          if (!elem)\n              options.onError(\"Cannot find template with ID \" + template);\n          return new domElement(elem);\n      } else if ((template.nodeType == 1) || (template.nodeType == 8)) {\n          // Anonymous template\n          return new anonymousTemplate(template);\n      } else\n          options.onError(\"Unknown template type: \" + template);\n  },\n\n  renderTemplate: function (template, bindingContext, options, templateDocument) {\n      var templateSource = this['makeTemplateSource'](template, templateDocument);\n      return this.renderTemplateSource(templateSource, bindingContext, options, templateDocument);\n  }\n})\n","import {\n    virtualElements, fixUpContinuousNodeArray, replaceDomNodes, memoization,\n    domNodeIsAttachedToDocument, moveCleanedNodesToContainerElement,\n    arrayFilter, domData\n} from 'tko.utils';\n\nimport { options } from 'tko.utils';\n\nimport {\n    applyBindings, setDomNodeChildrenFromArrayMapping,\n    bindingContext as bindingContextConstructor\n} from 'tko.bind';\n\nimport {\n    computed\n} from 'tko.computed';\n\nimport {\n    isObservable, dependencyDetection, unwrap, observable\n} from 'tko.observable';\n\nimport {\n    templateEngine\n} from './templateEngine';\n\nimport { anonymousTemplate } from './templateSources';\n\nvar _templateEngine;\n\nexport function setTemplateEngine(tEngine) {\n    if ((tEngine != undefined) && !(tEngine instanceof templateEngine))\n        //TODO: ko.templateEngine to appropriate name\n        throw new Error(\"templateEngine must inherit from ko.templateEngine\");\n    _templateEngine = tEngine;\n}\n\nfunction invokeForEachNodeInContinuousRange(firstNode, lastNode, action) {\n    var node, nextInQueue = firstNode, firstOutOfRangeNode = virtualElements.nextSibling(lastNode);\n    while (nextInQueue && ((node = nextInQueue) !== firstOutOfRangeNode)) {\n        nextInQueue = virtualElements.nextSibling(node);\n        action(node, nextInQueue);\n    }\n}\n\nfunction activateBindingsOnContinuousNodeArray(continuousNodeArray, bindingContext) {\n    // To be used on any nodes that have been rendered by a template and have been inserted into some parent element\n    // Walks through continuousNodeArray (which *must* be continuous, i.e., an uninterrupted sequence of sibling nodes, because\n    // the algorithm for walking them relies on this), and for each top-level item in the virtual-element sense,\n    // (1) Does a regular \"applyBindings\" to associate bindingContext with this node and to activate any non-memoized bindings\n    // (2) Unmemoizes any memos in the DOM subtree (e.g., to activate bindings that had been memoized during template rewriting)\n\n    if (continuousNodeArray.length) {\n        var firstNode = continuousNodeArray[0],\n            lastNode = continuousNodeArray[continuousNodeArray.length - 1],\n            parentNode = firstNode.parentNode,\n            provider = options.bindingProviderInstance,\n            preprocessNode = provider.preprocessNode;\n\n        if (preprocessNode) {\n            invokeForEachNodeInContinuousRange(firstNode, lastNode, function(node, nextNodeInRange) {\n                var nodePreviousSibling = node.previousSibling;\n                var newNodes = preprocessNode.call(provider, node);\n                if (newNodes) {\n                    if (node === firstNode)\n                        firstNode = newNodes[0] || nextNodeInRange;\n                    if (node === lastNode)\n                        lastNode = newNodes[newNodes.length - 1] || nodePreviousSibling;\n                }\n            });\n\n            // Because preprocessNode can change the nodes, including the first and last nodes, update continuousNodeArray to match.\n            // We need the full set, including inner nodes, because the unmemoize step might remove the first node (and so the real\n            // first node needs to be in the array).\n            continuousNodeArray.length = 0;\n            if (!firstNode) { // preprocessNode might have removed all the nodes, in which case there's nothing left to do\n                return;\n            }\n            if (firstNode === lastNode) {\n                continuousNodeArray.push(firstNode);\n            } else {\n                continuousNodeArray.push(firstNode, lastNode);\n                fixUpContinuousNodeArray(continuousNodeArray, parentNode);\n            }\n        }\n\n        // Need to applyBindings *before* unmemoziation, because unmemoization might introduce extra nodes (that we don't want to re-bind)\n        // whereas a regular applyBindings won't introduce new memoized nodes\n        invokeForEachNodeInContinuousRange(firstNode, lastNode, function(node) {\n            if (node.nodeType === 1 || node.nodeType === 8)\n                applyBindings(bindingContext, node);\n        });\n        invokeForEachNodeInContinuousRange(firstNode, lastNode, function(node) {\n            if (node.nodeType === 1 || node.nodeType === 8)\n                memoization.unmemoizeDomNodeAndDescendants(node, [bindingContext]);\n        });\n\n        // Make sure any changes done by applyBindings or unmemoize are reflected in the array\n        fixUpContinuousNodeArray(continuousNodeArray, parentNode);\n    }\n}\n\nfunction getFirstNodeFromPossibleArray(nodeOrNodeArray) {\n    return nodeOrNodeArray.nodeType ? nodeOrNodeArray\n                                    : nodeOrNodeArray.length > 0 ? nodeOrNodeArray[0]\n                                    : null;\n}\n\nfunction executeTemplate(targetNodeOrNodeArray, renderMode, template, bindingContext, options) {\n    options = options || {};\n    var firstTargetNode = targetNodeOrNodeArray && getFirstNodeFromPossibleArray(targetNodeOrNodeArray);\n    var templateDocument = (firstTargetNode || template || {}).ownerDocument;\n    var templateEngineToUse = (options.templateEngine || _templateEngine);\n    var renderedNodesArray = templateEngineToUse.renderTemplate(template, bindingContext, options, templateDocument);\n\n    // Loosely check result is an array of DOM nodes\n    if ((typeof renderedNodesArray.length != \"number\") || (renderedNodesArray.length > 0 && typeof renderedNodesArray[0].nodeType != \"number\"))\n        throw new Error(\"Template engine must return an array of DOM nodes\");\n\n    var haveAddedNodesToParent = false;\n    switch (renderMode) {\n    case \"replaceChildren\":\n        virtualElements.setDomNodeChildren(targetNodeOrNodeArray, renderedNodesArray);\n        haveAddedNodesToParent = true;\n        break;\n    case \"replaceNode\":\n        replaceDomNodes(targetNodeOrNodeArray, renderedNodesArray);\n        haveAddedNodesToParent = true;\n        break;\n    case \"ignoreTargetNode\": break;\n    default:\n        throw new Error(\"Unknown renderMode: \" + renderMode);\n    }\n\n    if (haveAddedNodesToParent) {\n        activateBindingsOnContinuousNodeArray(renderedNodesArray, bindingContext);\n        if (options['afterRender'])\n            dependencyDetection.ignore(options['afterRender'], null, [renderedNodesArray, bindingContext['$data']]);\n    }\n\n    return renderedNodesArray;\n}\n\nfunction resolveTemplateName(template, data, context) {\n    // The template can be specified as:\n    if (isObservable(template)) {\n        // 1. An observable, with string value\n        return template();\n    } else if (typeof template === 'function') {\n        // 2. A function of (data, context) returning a string\n        return template(data, context);\n    } else {\n        // 3. A string\n        return template;\n    }\n}\n\nexport function renderTemplate(template, dataOrBindingContext, options, targetNodeOrNodeArray, renderMode) {\n    options = options || {};\n    if ((options.templateEngine || _templateEngine) === undefined)\n        throw new Error(\"Set a template engine before calling renderTemplate\");\n    renderMode = renderMode || \"replaceChildren\";\n\n    if (targetNodeOrNodeArray) {\n        var firstTargetNode = getFirstNodeFromPossibleArray(targetNodeOrNodeArray);\n\n        var whenToDispose = function () { return (!firstTargetNode) || !domNodeIsAttachedToDocument(firstTargetNode); }; // Passive disposal (on next evaluation)\n        var activelyDisposeWhenNodeIsRemoved = (firstTargetNode && renderMode == \"replaceNode\") ? firstTargetNode.parentNode : firstTargetNode;\n\n        return computed( // So the DOM is automatically updated when any dependency changes\n            function () {\n                // Ensure we've got a proper binding context to work with\n                var bindingContext = (dataOrBindingContext && (dataOrBindingContext instanceof bindingContextConstructor))\n                    ? dataOrBindingContext\n                    : new bindingContextConstructor(dataOrBindingContext, null, null, null, { \"exportDependencies\": true });\n\n                var templateName = resolveTemplateName(template, bindingContext['$data'], bindingContext),\n                    renderedNodesArray = executeTemplate(targetNodeOrNodeArray, renderMode, templateName, bindingContext, options);\n\n                if (renderMode == \"replaceNode\") {\n                    targetNodeOrNodeArray = renderedNodesArray;\n                    firstTargetNode = getFirstNodeFromPossibleArray(targetNodeOrNodeArray);\n                }\n            },\n            null,\n            { disposeWhen: whenToDispose, disposeWhenNodeIsRemoved: activelyDisposeWhenNodeIsRemoved }\n        );\n    } else {\n        // We don't yet have a DOM node to evaluate, so use a memo and render the template later when there is a DOM node\n        return memoization.memoize(function (domNode) {\n            renderTemplate(template, dataOrBindingContext, options, domNode, \"replaceNode\");\n        });\n    }\n}\n\nexport default function renderTemplateForEach(template, arrayOrObservableArray, options, targetNode, parentBindingContext) {\n    // Since setDomNodeChildrenFromArrayMapping always calls executeTemplateForArrayItem and then\n    // activateBindingsCallback for added items, we can store the binding context in the former to use in the latter.\n    var arrayItemContext;\n\n    // This will be called by setDomNodeChildrenFromArrayMapping to get the nodes to add to targetNode\n    function executeTemplateForArrayItem(arrayValue, index) {\n        // Support selecting template as a function of the data being rendered\n        arrayItemContext = parentBindingContext['createChildContext'](arrayValue, options['as'], function(context) {\n            context['$index'] = index;\n        });\n\n        var templateName = resolveTemplateName(template, arrayValue, arrayItemContext);\n        return executeTemplate(null, \"ignoreTargetNode\", templateName, arrayItemContext, options);\n    }\n\n    // This will be called whenever setDomNodeChildrenFromArrayMapping has added nodes to targetNode\n    var activateBindingsCallback = function(arrayValue, addedNodesArray /*, index */) {\n        activateBindingsOnContinuousNodeArray(addedNodesArray, arrayItemContext);\n        if (options['afterRender'])\n            options['afterRender'](addedNodesArray, arrayValue);\n\n        // release the \"cache\" variable, so that it can be collected by\n        // the GC when its value isn't used from within the bindings anymore.\n        arrayItemContext = null;\n    };\n\n    return computed(function () {\n        var unwrappedArray = unwrap(arrayOrObservableArray) || [];\n        if (typeof unwrappedArray.length == \"undefined\") // Coerce single value into array\n            unwrappedArray = [unwrappedArray];\n\n        // Filter out any entries marked as destroyed\n        var filteredArray = arrayFilter(unwrappedArray, function(item) {\n            return options['includeDestroyed'] || item === undefined || item === null || !unwrap(item['_destroy']);\n        });\n\n        // Call setDomNodeChildrenFromArrayMapping, ignoring any observables unwrapped within (most likely from a callback function).\n        // If the array items are observables, though, they will be unwrapped in executeTemplateForArrayItem and managed within setDomNodeChildrenFromArrayMapping.\n        dependencyDetection.ignore(setDomNodeChildrenFromArrayMapping, null, [targetNode, filteredArray, executeTemplateForArrayItem, options, activateBindingsCallback]);\n\n    }, null, { disposeWhenNodeIsRemoved: targetNode });\n}\n\nvar templateComputedDomDataKey = domData.nextKey();\nfunction disposeOldComputedAndStoreNewOne(element, newComputed) {\n    var oldComputed = domData.get(element, templateComputedDomDataKey);\n    if (oldComputed && (typeof(oldComputed.dispose) == 'function'))\n        oldComputed.dispose();\n    domData.set(element, templateComputedDomDataKey, (newComputed && newComputed.isActive()) ? newComputed : undefined);\n}\n\nexport var template = {\n    init: function(element, valueAccessor) {\n        var container;\n        \n        // Expose 'conditional' for `else` chaining.\n        domData.set(element, 'conditional', {\n            elseChainSatisfied: observable(true)\n        });\n        \n        // Support anonymous templates\n        var bindingValue = unwrap(valueAccessor());\n        if (typeof bindingValue == \"string\" || bindingValue['name']) {\n            // It's a named template - clear the element\n            virtualElements.emptyNode(element);\n        } else if ('nodes' in bindingValue) {\n            // We've been given an array of DOM nodes. Save them as the template source.\n            // There is no known use case for the node array being an observable array (if the output\n            // varies, put that behavior *into* your template - that's what templates are for), and\n            // the implementation would be a mess, so assert that it's not observable.\n            var nodes = bindingValue['nodes'] || [];\n            if (isObservable(nodes)) {\n                throw new Error('The \"nodes\" option must be a plain, non-observable array.');\n            }\n            container = moveCleanedNodesToContainerElement(nodes); // This also removes the nodes from their current parent\n            new anonymousTemplate(element)['nodes'](container);\n        } else {\n            // It's an anonymous template - store the element contents, then clear the element\n            var templateNodes = virtualElements.childNodes(element);\n            container = moveCleanedNodesToContainerElement(templateNodes); // This also removes the nodes from their current parent\n            new anonymousTemplate(element).nodes(container);\n        }\n        return { 'controlsDescendantBindings': true };\n    },\n    update: function (element, valueAccessor, allBindings, viewModel, bindingContext) {\n        var value = valueAccessor(),\n            options = unwrap(value),\n            shouldDisplay = true,\n            templateComputed = null,\n            elseChainSatisfied = domData.get(element, 'conditional').elseChainSatisfied,\n            templateName;\n\n        if (typeof options == \"string\") {\n            templateName = value;\n            options = {};\n        } else {\n            templateName = options['name'];\n\n            // Support \"if\"/\"ifnot\" conditions\n            if ('if' in options)\n                shouldDisplay = unwrap(options['if']);\n            if (shouldDisplay && 'ifnot' in options)\n                shouldDisplay = !unwrap(options['ifnot']);\n        }\n\n        if ('foreach' in options) {\n            // Render once for each data point (treating data set as empty if shouldDisplay==false)\n            var dataArray = (shouldDisplay && options['foreach']) || [];\n            templateComputed = renderTemplateForEach(templateName || element, dataArray, options, element, bindingContext);\n            \n            elseChainSatisfied((unwrap(dataArray) || []).length !== 0);\n        } else if (!shouldDisplay) {\n            virtualElements.emptyNode(element);\n            elseChainSatisfied(false);\n        } else {\n            // Render once for this single data point (or use the viewModel if no data was provided)\n            var innerBindingContext = ('data' in options) ?\n                bindingContext.createStaticChildContext(options['data'], options['as']) :  // Given an explitit 'data' value, we create a child binding context for it\n                bindingContext;                                                        // Given no explicit 'data' value, we retain the same binding context\n            templateComputed = renderTemplate(templateName || element, innerBindingContext, options, element);\n            elseChainSatisfied(true);\n        }\n\n        // It only makes sense to have a single template computed per element (otherwise which one should have its output displayed?)\n        disposeOldComputedAndStoreNewOne(element, templateComputed);\n    },\n    allowVirtualElements: true\n};\n","\nimport {\n  extend, options, ieVersion, makeArray, parseHtmlFragment\n} from 'tko.utils';\n\nimport {\n  templateEngine\n} from './templateEngine'\n\nimport {\n  setTemplateEngine\n} from './templating'\n\nexport function nativeTemplateEngine () {\n}\n\nnativeTemplateEngine.prototype = new templateEngine();\nnativeTemplateEngine.prototype.constructor = nativeTemplateEngine;\nnativeTemplateEngine.prototype.renderTemplateSource = function(templateSource, bindingContext, options, templateDocument) {\n    var useNodesIfAvailable = !(ieVersion < 9), // IE<9 cloneNode doesn't work properly\n        templateNodesFunc = useNodesIfAvailable ? templateSource.nodes : null,\n        templateNodes = templateNodesFunc ? templateSource.nodes() : null;\n\n    if (templateNodes) {\n        return makeArray(templateNodes.cloneNode(true).childNodes);\n    } else {\n        var templateText = templateSource.text();\n        return parseHtmlFragment(templateText, templateDocument);\n    }\n};\n\n\nnativeTemplateEngine.instance = new nativeTemplateEngine();\nsetTemplateEngine(nativeTemplateEngine.instance);\n","\nimport {\n  unwrap, peek\n} from 'tko.observable';\n\nimport {\n    nativeTemplateEngine\n} from './nativeTemplateEngine';\n\nimport {\n  getBindingHandler\n} from 'tko.bind';\n\nexport function makeTemplateValueAccessor(valueAccessor) {\n    return function() {\n        var modelValue = valueAccessor(),\n            unwrappedValue = peek(modelValue);    // Unwrap without setting a dependency here\n\n        // If unwrappedValue is the array, pass in the wrapped value on its own\n        // The value will be unwrapped and tracked within the template binding\n        // (See https://github.com/SteveSanderson/knockout/issues/523)\n        if ((!unwrappedValue) || typeof unwrappedValue.length == \"number\")\n            return { 'foreach': modelValue, 'templateEngine': nativeTemplateEngine.instance };\n\n        // If unwrappedValue.data is the array, preserve all relevant options and unwrap again value so we get updates\n        unwrap(modelValue);\n        return {\n            'foreach': unwrappedValue['data'],\n            'as': unwrappedValue['as'],\n            'includeDestroyed': unwrappedValue['includeDestroyed'],\n            'afterAdd': unwrappedValue['afterAdd'],\n            'beforeRemove': unwrappedValue['beforeRemove'],\n            'afterRender': unwrappedValue['afterRender'],\n            'beforeMove': unwrappedValue['beforeMove'],\n            'afterMove': unwrappedValue['afterMove'],\n            'templateEngine': nativeTemplateEngine.instance\n        };\n    };\n}\n\n\n// \"foreach: someExpression\" is equivalent to \"template: { foreach: someExpression }\"\n// \"foreach: { data: someExpression, afterAdd: myfn }\" is equivalent to \"template: { foreach: someExpression, afterAdd: myfn }\"\nexport var foreach = {\n    init: function(element, valueAccessor) {\n        return getBindingHandler('template').init(element, makeTemplateValueAccessor(valueAccessor));\n    },\n    update: function(element, valueAccessor, allBindings, viewModel, bindingContext) {\n        return getBindingHandler('template').update(element, makeTemplateValueAccessor(valueAccessor), allBindings, viewModel, bindingContext);\n    },\n    allowVirtualElements: true,\n    bindingRewriteValidator: false\n};\n\n//ko.expressionRewriting.bindingRewriteValidators['foreach'] = false; // Can't rewrite control flow bindings\n","\nimport {foreach} from './src/foreach';\nimport {template} from './src/templating';\n//    'let': letBinding,\n//    template: template,\n\nexport var bindings = {\n    foreach: foreach,\n    template: template\n};\n\nexport * from './src/nativeTemplateEngine';\nexport * from './src/templateEngine';\nexport * from './src/templating';\nexport * from './src/templateSources';\n","\nimport {\n    cloneNodes, virtualElements, cleanNode, domData\n} from 'tko.utils';\n\nimport {\n    unwrap, dependencyDetection, observable\n} from 'tko.observable';\n\nimport {\n    computed\n} from 'tko.computed';\n\nimport {\n    applyBindingsToDescendants\n} from 'tko.bind';\n\n/**\n * Test a node for whether it represents an \"else\" condition.\n * @param  {HTMLElement}  node to be tested\n * @return {Boolean}      true when\n *\n * Matches <!-- else -->\n */\nfunction isElseNode(node) {\n    return node.nodeType === 8 &&\n        node.nodeValue.trim().toLowerCase() === 'else';\n}\n\nfunction detectElse(element) {\n    var children = virtualElements.childNodes(element);\n    for (var i = 0, j = children.length; i < j; ++i) {\n        if (isElseNode(children[i])) { return true; }\n    }\n    return false;\n}\n\n\n/**\n * Clone the nodes, returning `ifNodes`, `elseNodes`\n * @param  {HTMLElement} element The nodes to be cloned\n * @param  {boolean}    hasElse short-circuit to speed up the inner-loop.\n * @return {object}         Containing the cloned nodes.\n */\nfunction cloneIfElseNodes(element, hasElse) {\n    var children = virtualElements.childNodes(element),\n        ifNodes = [],\n        elseNodes = [],\n        target = ifNodes;\n\n    for (var i = 0, j = children.length; i < j; ++i) {\n        if (hasElse && isElseNode(children[i])) {\n            target = elseNodes;\n            hasElse = false;\n        } else {\n            target.push(cleanNode(children[i].cloneNode(true)));\n        }\n    }\n\n    return {\n        ifNodes: ifNodes,\n        elseNodes: elseNodes\n    };\n}\n\n/**\n * Return any conditional that precedes the given node.\n * @param  {HTMLElement} node To find the preceding conditional of\n * @return {object}      { elseChainSatisfied: observable }\n */\nfunction getPrecedingConditional(node) {\n    do {\n        node = node.previousSibling;\n    } while(node && node.nodeType !== 1 && node.nodeType !== 8);\n\n    if (!node) { return; }\n\n    if (node.nodeType === 8) {\n        node = virtualElements.previousSibling(node);\n    }\n\n    return domData.get(node, 'conditional');\n}\n\n\n/**\n * Create a DOMbinding that controls DOM nodes presence\n *\n * Covers e.g.\n *\n * 1. DOM Nodes contents\n *\n * <div data-bind='if: x'>\n * <!-- else --> ... an optional \"if\"\n * </div>\n *\n * 2. Virtual elements\n *\n * <!-- ko if: x -->\n * <!-- else -->\n * <!-- /ko -->\n *\n * 3. Else binding\n * <div data-bind='if: x'></div>\n * <div data-bind='else'></div>\n */\nfunction makeWithIfBinding(isWith, isNot, isElse, makeContextCallback) {\n    return {\n        init: function(element, valueAccessor, allBindings, viewModel, bindingContext) {\n\n            var didDisplayOnLastUpdate,\n                hasElse = detectElse(element),\n                completesElseChain = observable(),\n                ifElseNodes,\n                precedingConditional;\n\n            domData.set(element, \"conditional\", {\n                elseChainSatisfied: completesElseChain,\n            });\n\n            if (isElse) {\n                precedingConditional = getPrecedingConditional(element);\n            }\n\n            computed(function() {\n                var rawValue = valueAccessor(),\n                    dataValue = unwrap(rawValue),\n                    shouldDisplayIf = !isNot !== !dataValue || (isElse && rawValue === undefined), // equivalent to (isNot ? !dataValue : !!dataValue) || isElse && rawValue === undefined\n                    isFirstRender = !ifElseNodes,\n                    needsRefresh = isFirstRender || isWith || (shouldDisplayIf !== didDisplayOnLastUpdate);\n\n                if (precedingConditional && precedingConditional.elseChainSatisfied()) {\n                    shouldDisplayIf = false;\n                    needsRefresh = isFirstRender || didDisplayOnLastUpdate;\n                    completesElseChain(true);\n                } else {\n                    completesElseChain(shouldDisplayIf);\n                }\n\n                if (!needsRefresh) { return; }\n\n                if (isFirstRender && (dependencyDetection.getDependenciesCount() || hasElse)) {\n                    ifElseNodes = cloneIfElseNodes(element, hasElse);\n                }\n\n                if (shouldDisplayIf) {\n                    if (!isFirstRender || hasElse) {\n                        virtualElements.setDomNodeChildren(element, cloneNodes(ifElseNodes.ifNodes));\n                    }\n                } else if (ifElseNodes) {\n                    virtualElements.setDomNodeChildren(element, cloneNodes(ifElseNodes.elseNodes));\n                } else {\n                    virtualElements.emptyNode(element);\n                }\n\n                applyBindingsToDescendants(makeContextCallback ? makeContextCallback(bindingContext, rawValue) : bindingContext, element);\n\n                didDisplayOnLastUpdate = shouldDisplayIf;\n            }, null, { disposeWhenNodeIsRemoved: element });\n\n            return { 'controlsDescendantBindings': true };\n        },\n        allowVirtualElements: true,\n        bindingRewriteValidator: false\n    };\n}\n\nfunction withContextCallback(bindingContext, dataValue) {\n    return bindingContext.createStaticChildContext(dataValue);\n}\n\n                                 /* isWith, isNot */\nexport var $if =   makeWithIfBinding(false, false, false);\nexport var ifnot = makeWithIfBinding(false, true, false);\nexport var $else = makeWithIfBinding(false, false, true);\nexport var $with = makeWithIfBinding(true, false, false, withContextCallback);","\nimport {$if, $with, ifnot, $else} from './src/ifIfnotWith';\n\nexport var bindings = {\n    'if': $if,\n    'with': $with,\n    ifnot: ifnot, unless: ifnot,\n    'else': $else,\n    'elseif': $else\n};","// index.js\n// --------\n// Fast For Each\n//\n// Employing sound techniques to make a faster Knockout foreach binding.\n// --------\n\nimport {\n  arrayForEach, addDisposeCallback, cleanNode, options, virtualElements,\n  createSymbolOrString, domData, domNodeIsContainedBy\n} from 'tko.utils';\n\nimport {\n  isObservable, unwrap, observable\n} from 'tko.observable';\n\nimport {\n  contextFor, applyBindingsToDescendants\n} from 'tko.bind';\n\n\n//      Utilities\nvar MAX_LIST_SIZE = 9007199254740991;\n\n// from https://github.com/jonschlinkert/is-plain-object\nfunction isPlainObject(o) {\n  return !!o && typeof o === 'object' && o.constructor === Object;\n}\n\nvar supportsDocumentFragment = document && typeof document.createDocumentFragment === \"function\";\n\n\n// Get a copy of the (possibly virtual) child nodes of the given element,\n// put them into a container, then empty the given node.\nfunction makeTemplateNode(sourceNode) {\n  var container = document.createElement(\"div\");\n  var parentNode;\n  if (sourceNode.content) {\n    // For e.g. <template> tags\n    parentNode = sourceNode.content;\n  } else if (sourceNode.tagName === 'SCRIPT') {\n    parentNode = document.createElement(\"div\");\n    parentNode.innerHTML = sourceNode.text;\n  } else {\n    // Anything else e.g. <div>\n    parentNode = sourceNode;\n  }\n  arrayForEach(virtualElements.childNodes(parentNode), function (child) {\n    // FIXME - This cloneNode could be expensive; we may prefer to iterate over the\n    // parentNode children in reverse (so as not to foul the indexes as childNodes are\n    // removed from parentNode when inserted into the container)\n    if (child) {\n      container.insertBefore(child.cloneNode(true), null);\n    }\n  });\n  return container;\n}\n\n// Mimic a KO change item 'add'\nfunction valueToChangeAddItem(value, index) {\n  return {\n    status: 'added',\n    value: value,\n    index: index\n  };\n}\n\n\n// store a symbol for caching the pending delete info index in the data item objects\nvar PENDING_DELETE_INDEX_KEY = createSymbolOrString(\"_ko_ffe_pending_delete_index\");\n\nexport function ForEach(spec) {\n  this.element = spec.element;\n  this.container = virtualElements.isStartComment(this.element) ?\n                   this.element.parentNode : this.element;\n  this.$context = spec.$context;\n  this.data = spec.data;\n  this.generateContext = this.createContextGenerator(spec.as, !spec.noIndex);\n  if (spec.noIndex) { this.updateIndexes = false; }\n  this.afterAdd = spec.afterAdd;\n  this.beforeRemove = spec.beforeRemove;\n  this.templateNode = makeTemplateNode(\n    spec.templateNode || (spec.name ? document.getElementById(spec.name).cloneNode(true) : spec.element)\n  );\n  this.afterQueueFlush = spec.afterQueueFlush;\n  this.beforeQueueFlush = spec.beforeQueueFlush;\n  this.changeQueue = [];\n  this.firstLastNodesList = [];\n  this.indexesToDelete = [];\n  this.rendering_queued = false;\n  this.pendingDeletes = [];\n\n  // Expose the conditional so that if the `foreach` data is empty, successive\n  // 'else' bindings will appear.\n  this.isNotEmpty = observable(Boolean(unwrap(this.data).length));\n  domData.set(this.element, 'conditional', {\n    elseChainSatisfied: this.isNotEmpty\n  });\n\n  // Remove existing content.\n  virtualElements.emptyNode(this.element);\n\n  // Prime content\n  var primeData = unwrap(this.data);\n  if (primeData.map) {\n    this.onArrayChange(primeData.map(valueToChangeAddItem), true);\n  }\n\n  // Watch for changes\n  if (isObservable(this.data)) {\n    if (!this.data.indexOf) {\n      // Make sure the observable is trackable.\n      this.data = this.data.extend({ trackArrayChanges: true });\n    }\n    this.changeSubs = this.data.subscribe(this.onArrayChange, this, 'arrayChange');\n  }\n}\n\nForEach.PENDING_DELETE_INDEX_KEY = PENDING_DELETE_INDEX_KEY;\n\n\nForEach.prototype.dispose = function () {\n  if (this.changeSubs) {\n    this.changeSubs.dispose();\n  }\n  this.flushPendingDeletes();\n};\n\n\n// If the array changes we register the change.\nForEach.prototype.onArrayChange = function (changeSet, isInitial) {\n  var self = this;\n  var changeMap = {\n    added: [],\n    deleted: []\n  };\n\n  // knockout array change notification index handling:\n  // - sends the original array indexes for deletes\n  // - sends the new array indexes for adds\n  // - sorts them all by index in ascending order\n  // because of this, when checking for possible batch additions, any delete can be between to adds with neighboring indexes, so only additions should be checked\n  for (var i = 0, len = changeSet.length; i < len; i++) {\n\n    if (changeMap.added.length && changeSet[i].status == 'added') {\n      var lastAdd = changeMap.added[changeMap.added.length - 1];\n      var lastIndex = lastAdd.isBatch ? lastAdd.index + lastAdd.values.length - 1 : lastAdd.index;\n      if (lastIndex + 1 == changeSet[i].index) {\n        if (!lastAdd.isBatch) {\n          // transform the last addition into a batch addition object\n          lastAdd = {\n            isBatch: true,\n            status: 'added',\n            index: lastAdd.index,\n            values: [lastAdd.value]\n          };\n          changeMap.added.splice(changeMap.added.length - 1, 1, lastAdd);\n        }\n        lastAdd.values.push(changeSet[i].value);\n        continue;\n      }\n    }\n\n    changeMap[changeSet[i].status].push(changeSet[i]);\n  }\n\n  if (changeMap.deleted.length > 0) {\n    this.changeQueue.push.apply(this.changeQueue, changeMap.deleted);\n    this.changeQueue.push({ status: 'clearDeletedIndexes' });\n  }\n  this.changeQueue.push.apply(this.changeQueue, changeMap.added);\n  // Once a change is registered, the ticking count-down starts for the processQueue.\n  if (this.changeQueue.length > 0 && !this.rendering_queued) {\n    this.rendering_queued = true;\n    if (isInitial) {\n      self.processQueue();\n    } else {\n      ForEach.animateFrame.call(window, function () { self.processQueue(); });\n    }\n  }\n};\n\n\nForEach.prototype.startQueueFlush = function () {\n  // Callback so folks can do things before the queue flush.\n  if (typeof this.beforeQueueFlush === 'function') {\n    this.beforeQueueFlush(this.changeQueue);\n  }\n};\n\n\nForEach.prototype.endQueueFlush = function () {\n  // Callback so folks can do things.\n  if (typeof this.afterQueueFlush === 'function') {\n    this.afterQueueFlush(this.changeQueue);\n  }\n};\n\n\n// Reflect all the changes in the queue in the DOM, then wipe the queue.\nForEach.prototype.processQueue = function () {\n  var self = this;\n  var isEmpty = !unwrap(this.data).length;\n  var lowestIndexChanged = MAX_LIST_SIZE;\n\n  this.startQueueFlush();\n\n  arrayForEach(this.changeQueue, function (changeItem) {\n    if (typeof changeItem.index === 'number') {\n      lowestIndexChanged = Math.min(lowestIndexChanged, changeItem.index);\n    }\n    self[changeItem.status](changeItem);\n  });\n  this.flushPendingDeletes();\n  this.rendering_queued = false;\n\n  // Update our indexes.\n  if (this.updateIndexes) { this.updateIndexes(lowestIndexChanged); }\n\n  this.endQueueFlush();\n  this.changeQueue = [];\n\n  // Update the conditional exposed on the domData\n  if (isEmpty !== !this.isNotEmpty()) {\n    this.isNotEmpty(!isEmpty);\n  }\n};\n\n\n// Extend the given context with a $index (passed in via the createChildContext)\nfunction extend$context(include$index, $context) {\n  if (include$index) { $context.$index = observable(); }\n  $context.$list = this.data;\n}\n\n\n/**\n * Return a function that generates the context for a given node.\n *\n * We generate a single function that reduces our inner-loop calculations,\n * which has a good chance of being optimized by the browser.\n *\n * @param  {string} as  The name given to each item in the list\n * @param  {bool} index Whether to calculate indexes\n * @return {function}   A function(dataValue) that returns the context\n */\nForEach.prototype.createContextGenerator = function (as, index) {\n  var $context = this.$context;\n  switch ((as && 1) | (index && 2)) {\n  case 0: // no-as & no-index\n    return function(v) {\n      return $context.createChildContext(v, null, extend$context.bind(this, false));\n    };\n\n  case 1: // as + no-index\n    return function(v) {\n      var obj = { $index: undefined, $list: this.data };\n      obj[as] = v;\n      return $context.extend(obj);\n    };\n\n  case 2: // no-as + index\n    return function(v) {\n      return $context.createChildContext(v, null, extend$context.bind(this, true));\n    };\n\n  case 3: // as + index\n    return function(v) {\n      var obj = { $index: observable(), $list: this.data };\n      obj[as] = v;\n      return $context.extend(obj);\n    };\n  }\n};\n\n\n// Process a changeItem with {status: 'added', ...}\nForEach.prototype.added = function (changeItem) {\n  var index = changeItem.index;\n  var valuesToAdd = changeItem.isBatch ? changeItem.values : [changeItem.value];\n  var referenceElement = this.getLastNodeBeforeIndex(index);\n  // gather all childnodes for a possible batch insertion\n  var allChildNodes = [];\n  var children;\n\n  for (var i = 0, len = valuesToAdd.length; i < len; ++i) {\n    // we check if we have a pending delete with reusable nodesets for this data, and if yes, we reuse one nodeset\n    var pendingDelete = this.getPendingDeleteFor(valuesToAdd[i]);\n    if (pendingDelete && pendingDelete.nodesets.length) {\n      children = pendingDelete.nodesets.pop();\n    } else {\n      var templateClone = this.templateNode.cloneNode(true);\n\n      // Apply bindings first, and then process child nodes,\n      // because bindings can add childnodes.\n      applyBindingsToDescendants(\n        this.generateContext(valuesToAdd[i]), templateClone\n      );\n\n      children = virtualElements.childNodes(templateClone);\n    }\n\n    // Note discussion at https://github.com/angular/angular.js/issues/7851\n    allChildNodes.push.apply(allChildNodes, Array.prototype.slice.call(children));\n    this.firstLastNodesList.splice(index + i, 0, { first: children[0], last: children[children.length - 1] });\n  }\n\n  if (typeof this.afterAdd === 'function') {\n    this.afterAdd({\n      nodeOrArrayInserted: this.insertAllAfter(allChildNodes, referenceElement),\n      foreachInstance: this\n    }\n    );\n  } else {\n    this.insertAllAfter(allChildNodes, referenceElement);\n  }\n};\n\n\nForEach.prototype.getNodesForIndex = function (index) {\n  var result = [],\n    ptr = this.firstLastNodesList[index].first,\n    last = this.firstLastNodesList[index].last;\n  result.push(ptr);\n  while (ptr && ptr !== last) {\n    ptr = ptr.nextSibling;\n    result.push(ptr);\n  }\n  return result;\n};\n\n\nForEach.prototype.getLastNodeBeforeIndex = function (index) {\n  if (index < 1 || index - 1 >= this.firstLastNodesList.length)\n    return null;\n  return this.firstLastNodesList[index - 1].last;\n};\n\n\n/**\n * Get the active (focused) node, if it's a child of the given node.\n */\nForEach.prototype.activeChildElement = function (node) {\n  var active = document.activeElement;\n  if (domNodeIsContainedBy(active, node)) {\n    return active;\n  }\n};\n\n\nForEach.prototype.insertAllAfter = function (nodeOrNodeArrayToInsert, insertAfterNode) {\n  var frag, len, i,\n    active = null,\n    containerNode = this.element;\n\n  // Poor man's node and array check.\n  if (nodeOrNodeArrayToInsert.nodeType === undefined && nodeOrNodeArrayToInsert.length === undefined) {\n    throw new Error(\"Expected a single node or a node array\");\n  }\n  if (nodeOrNodeArrayToInsert.nodeType !== undefined) {\n    active = this.activeChildElement(nodeOrNodeArrayToInsert);\n    virtualElements.insertAfter(containerNode, nodeOrNodeArrayToInsert, insertAfterNode);\n    return [nodeOrNodeArrayToInsert];\n  } else if (nodeOrNodeArrayToInsert.length === 1) {\n    active = this.activeChildElement(nodeOrNodeArrayToInsert[0]);\n    virtualElements.insertAfter(containerNode, nodeOrNodeArrayToInsert[0], insertAfterNode);\n  } else if (supportsDocumentFragment) {\n    frag = document.createDocumentFragment();\n    for (i = 0, len = nodeOrNodeArrayToInsert.length; i !== len; ++i) {\n      active = active || this.activeChildElement(nodeOrNodeArrayToInsert[i]);\n      frag.appendChild(nodeOrNodeArrayToInsert[i]);\n    }\n    virtualElements.insertAfter(containerNode, frag, insertAfterNode);\n  } else {\n    // Nodes are inserted in reverse order - pushed down immediately after\n    // the last node for the previous item or as the first node of element.\n    for (i = nodeOrNodeArrayToInsert.length - 1; i >= 0; --i) {\n      active = active || this.activeChildElement(nodeOrNodeArrayToInsert[i]);\n      var child = nodeOrNodeArrayToInsert[i];\n      if (!child) { break; }\n      virtualElements.insertAfter(containerNode, child, insertAfterNode);\n    }\n  }\n\n  if (active) { active.focus(); }\n\n  return nodeOrNodeArrayToInsert;\n};\n\n// checks if the deleted data item should be handled with delay for a possible reuse at additions\nForEach.prototype.shouldDelayDeletion = function (data) {\n  return data && (typeof data === \"object\" || typeof data === \"function\");\n};\n\n// gets the pending deletion info for this data item\nForEach.prototype.getPendingDeleteFor = function (data) {\n  var index = data && data[PENDING_DELETE_INDEX_KEY];\n  if (index === undefined) return null;\n  return this.pendingDeletes[index];\n};\n\n// tries to find the existing pending delete info for this data item, and if it can't, it registeres one\nForEach.prototype.getOrCreatePendingDeleteFor = function (data) {\n  var pd = this.getPendingDeleteFor(data);\n  if (pd) {\n    return pd;\n  }\n  pd = {\n    data: data,\n    nodesets: []\n  };\n  data[PENDING_DELETE_INDEX_KEY] = this.pendingDeletes.length;\n  this.pendingDeletes.push(pd);\n  return pd;\n};\n\n// Process a changeItem with {status: 'deleted', ...}\nForEach.prototype.deleted = function (changeItem) {\n  // if we should delay the deletion of this data, we add the nodeset to the pending delete info object\n  if (this.shouldDelayDeletion(changeItem.value)) {\n    var pd = this.getOrCreatePendingDeleteFor(changeItem.value);\n    pd.nodesets.push(this.getNodesForIndex(changeItem.index));\n  } else { // simple data, just remove the nodes\n    this.removeNodes(this.getNodesForIndex(changeItem.index));\n  }\n  this.indexesToDelete.push(changeItem.index);\n};\n\n// removes a set of nodes from the DOM\nForEach.prototype.removeNodes = function (nodes) {\n  if (!nodes.length) { return; }\n\n  var removeFn = function () {\n    var parent = nodes[0].parentNode;\n    for (var i = nodes.length - 1; i >= 0; --i) {\n      cleanNode(nodes[i]);\n      parent.removeChild(nodes[i]);\n    }\n  };\n\n  if (this.beforeRemove) {\n    var beforeRemoveReturn = this.beforeRemove({\n      nodesToRemove: nodes, foreachInstance: this\n    }) || {};\n    // If beforeRemove returns a `then`able e.g. a Promise, we remove\n    // the nodes when that thenable completes.  We pass any errors to\n    // ko.onError.\n    if (typeof beforeRemoveReturn.then === 'function') {\n      beforeRemoveReturn.then(removeFn, options.onError);\n    }\n  } else {\n    removeFn();\n  }\n};\n\n// flushes the pending delete info store\n// this should be called after queue processing has finished, so that data items and remaining (not reused) nodesets get cleaned up\n// we also call it on dispose not to leave any mess\nForEach.prototype.flushPendingDeletes = function () {\n  for (var i = 0, len = this.pendingDeletes.length; i != len; ++i) {\n    var pd = this.pendingDeletes[i];\n    while (pd.nodesets.length) {\n      this.removeNodes(pd.nodesets.pop());\n    }\n    if (pd.data && pd.data[PENDING_DELETE_INDEX_KEY] !== undefined)\n      delete pd.data[PENDING_DELETE_INDEX_KEY];\n  }\n  this.pendingDeletes = [];\n};\n\n// We batch our deletion of item indexes in our parallel array.\n// See brianmhunt/knockout-fast-foreach#6/#8\nForEach.prototype.clearDeletedIndexes = function () {\n  // We iterate in reverse on the presumption (following the unit tests) that KO's diff engine\n  // processes diffs (esp. deletes) monotonically ascending i.e. from index 0 -> N.\n  for (var i = this.indexesToDelete.length - 1; i >= 0; --i) {\n    this.firstLastNodesList.splice(this.indexesToDelete[i], 1);\n  }\n  this.indexesToDelete = [];\n};\n\n\nForEach.prototype.getContextStartingFrom = function (node) {\n  var ctx;\n  while (node) {\n    ctx = contextFor(node);\n    if (ctx) { return ctx; }\n    node = node.nextSibling;\n  }\n};\n\n\nForEach.prototype.updateIndexes = function (fromIndex) {\n  var ctx;\n  for (var i = fromIndex, len = this.firstLastNodesList.length; i < len; ++i) {\n    ctx = this.getContextStartingFrom(this.firstLastNodesList[i].first);\n    if (ctx) { ctx.$index(i); }\n  }\n};\n\n\n/**\n * Set whether the binding is synchronous.\n * Useful during testing.\n */\nfunction setSync(toggle) {\n  if (toggle) {\n    ForEach.animateFrame = function (frame) { frame(); };\n  } else {\n    ForEach.animateFrame = window.requestAnimationFrame || window.webkitRequestAnimationFrame ||\n      window.mozRequestAnimationFrame || window.msRequestAnimationFrame ||\n      function (cb) { return window.setTimeout(cb, 1000 / 60); };\n  }\n}\n\n\nexport var foreach = {\n  // Valid valueAccessors:\n  //    []\n  //    observable([])\n  //    observableArray([])\n  //    computed\n  //    {data: array, name: string, as: string}\n  init: function init(element, valueAccessor, bindings, vm, context) {\n    var ffe, value = valueAccessor();\n    if (isPlainObject(value)) {\n      value.element = value.element || element;\n      value.$context = context;\n      ffe = new ForEach(value);\n    } else {\n      ffe = new ForEach({\n        element: element,\n        data: unwrap(context.$rawData) === value ? context.$rawData : value,\n        $context: context,\n        as: bindings.get('as'),\n        noIndex: bindings.get('noIndex')\n      });\n    }\n\n    addDisposeCallback(element, function () {\n      ffe.dispose();\n    });\n    return { controlsDescendantBindings: true };\n  },\n\n  setSync: setSync,\n\n  allowVirtualElements: true,\n\n  // Export for testing, debugging, and overloading.\n  ForEach: ForEach\n};","import { foreach } from './src/foreach.js';\n\nexport var bindings = {\n  foreach: foreach\n};\n\n// By default, foreach will be async.\nforeach.setSync(false);\n","\nimport {\n    arrayPushAll\n} from 'tko.utils';\n\nvar dataBind = 'data-bind';\n\n\n// Performance comparison at http://jsperf.com/markup-interpolation-comparison\nfunction parseInterpolationMarkup(textToParse, outerTextCallback, expressionCallback) {\n    function innerParse(text) {\n        var innerMatch = text.match(/^([\\s\\S]*)}}([\\s\\S]*?)\\{\\{([\\s\\S]*)$/);\n        if (innerMatch) {\n            innerParse(innerMatch[1]);\n            outerTextCallback(innerMatch[2]);\n            expressionCallback(innerMatch[3]);\n        } else {\n            expressionCallback(text);\n        }\n    }\n\n    var outerMatch = textToParse.match(/^([\\s\\S]*?)\\{\\{([\\s\\S]*)}}([\\s\\S]*)$/);\n\n    if (outerMatch) {\n        outerTextCallback(outerMatch[1]);\n        innerParse(outerMatch[2]);\n        outerTextCallback(outerMatch[3]);\n    }\n}\n\nfunction trim(string) {\n    return string ? string.trim() : '';\n}\n\nfunction interpolationMarkupPreprocessor(node) {\n    var nodes = [];\n\n    function addTextNode(text) {\n        if (text) {\n            nodes.push(document.createTextNode(text));\n        }\n    }\n\n    function wrapExpr(expressionText) {\n        if (expressionText) {\n            nodes.push.apply(nodes, interpolationMarkup.wrapExpression(expressionText, node));\n        }\n    }\n\n    // only needs to work with text nodes\n    if (node.nodeType === 3 && node.nodeValue && node.nodeValue.indexOf('{{') !== -1 && (node.parentNode || {}).nodeName != \"TEXTAREA\") {\n        parseInterpolationMarkup(node.nodeValue, addTextNode, wrapExpr);\n\n        if (nodes.length) {\n            if (node.parentNode) {\n                for (var i = 0, n = nodes.length, parent = node.parentNode; i < n; ++i) {\n                    parent.insertBefore(nodes[i], node);\n                }\n                parent.removeChild(node);\n            }\n            return nodes;\n        }\n    }\n}\n\n\nfunction wrapExpression(expressionText_, node) {\n    var ownerDocument = node ? node.ownerDocument : document,\n        closeComment = true,\n        binding,\n        expressionText = trim(expressionText_),\n        firstChar = expressionText[0],\n        lastChar = expressionText[expressionText.length - 1],\n        result = [],\n        matches;\n\n    if (firstChar === '#') {\n        if (lastChar === '/') {\n            binding = expressionText.slice(1, -1);\n        } else {\n            binding = expressionText.slice(1);\n            closeComment = false;\n        }\n        matches = binding.match(/^([^,\"'{}()\\/:[\\]\\s]+)\\s+([^\\s:].*)/);\n        if (matches) {\n            binding = matches[1] + ':' + matches[2];\n        }\n    } else if (firstChar === '/') {\n        // replace only with a closing comment\n    } else if (firstChar === '{' && lastChar === '}') {\n        binding = \"html:\" + trim(expressionText.slice(1, -1));\n    } else {\n        binding = \"text:\" + trim(expressionText);\n    }\n\n    if (binding) {\n        result.push(ownerDocument.createComment(\"ko \" + binding));\n    }\n    if (closeComment) {\n        result.push(ownerDocument.createComment(\"/ko\"));\n    }\n    return result;\n}\n\n\nfunction attributeInterpolationMarkerPreprocessor(node, provider) {\n    function addText(text) {\n        if (text) {\n            parts.push('\"' + text.replace(/\"/g, '\\\\\"') + '\"');\n        }\n    }\n\n    function addExpr(expressionText) {\n        if (expressionText) {\n            attrValue = expressionText;\n            parts.push('@(' + expressionText + \")\");\n        }\n    }\n\n    if (node.nodeType === 1 && node.attributes.length) {\n        var dataBindAttribute = node.getAttribute(dataBind);\n        for (var attrs = arrayPushAll([], node.attributes), n = attrs.length, i = 0; i < n; ++i) {\n            var attr = attrs[i];\n            if (attr.specified && attr.name != dataBind && attr.value.indexOf('{{') !== -1) {\n                var parts = [], attrValue = '';\n                parseInterpolationMarkup(attr.value, addText, addExpr);\n\n                if (parts.length > 1) {\n                    attrValue = '\"\"+' + parts.join('+');\n                }\n\n                if (attrValue) {\n                    var attrName = attr.name.toLowerCase();\n                    var attrBinding = attributeInterpolationMarkup.attributeBinding(attrName, attrValue, provider) || attributeBinding(attrName, attrValue, provider);\n                    if (!dataBindAttribute) {\n                        dataBindAttribute = attrBinding;\n                    } else {\n                        dataBindAttribute += ',' + attrBinding;\n                    }\n                    node.setAttribute(dataBind, dataBindAttribute);\n                    // Using removeAttribute instead of removeAttributeNode because IE clears the\n                    // class if you use removeAttributeNode to remove the id.\n                    node.removeAttribute(attr.name);\n                }\n            }\n        }\n    }\n}\n\nfunction attributeBinding(name, value, provider) {\n    if (provider.bindingHandlers.get(name)) {\n        return name + ':' + value;\n    } else {\n        return 'attr.' + name + ':' + value;\n    }\n}\n\n\n// Exports\nexport var interpolationMarkup = {\n    nodePreProcessor: interpolationMarkupPreprocessor,\n    wrapExpression: wrapExpression\n};\n\nexport var attributeInterpolationMarkup = {\n    nodePreProcessor: attributeInterpolationMarkerPreprocessor,\n    attributeBinding: attributeBinding\n};","\nimport {\n    interpolationMarkup, attributeInterpolationMarkup\n} from './src/interpolationMarkup';\n\nexport var preprocessors = [\n    interpolationMarkup,\n    attributeInterpolationMarkup\n];\n","\nimport {\n    unwrap, toJS\n} from 'tko.observable';\n\nvar sproto = String.prototype;\n\nvar filters = {};\n\n// Convert value to uppercase\nfilters.uppercase = function(value) {\n    return sproto.toUpperCase.call(unwrap(value));\n};\n\n// Convert value to lowercase\nfilters.lowercase = function(value) {\n    return sproto.toLowerCase.call(unwrap(value));\n};\n\n// Return default value if the input value is empty or null\nfilters['default'] = function (value, defaultValue) {\n    value = unwrap(value);\n    if (typeof value === \"function\") {\n        return value;\n    }\n    if (typeof value === \"string\") {\n        return sproto.trim.call(value) === '' ? defaultValue : value;\n    }\n    return value == null || value.length == 0 ? defaultValue : value;\n};\n\n// Return the value with the search string replaced with the replacement string\nfilters.replace = function(value, search, replace) {\n    return sproto.replace.call(unwrap(value), search, replace);\n};\n\nfilters.fit = function(value, length, replacement, trimWhere) {\n    value = unwrap(value);\n    if (length && ('' + value).length > length) {\n        replacement = '' + (replacement || '...');\n        length = length - replacement.length;\n        value = '' + value;\n        switch (trimWhere) {\n            case 'left':\n                return replacement + value.slice(-length);\n            case 'middle':\n                var leftLen = Math.ceil(length / 2);\n                return value.substr(0, leftLen) + replacement + value.slice(leftLen-length);\n            default:\n                return value.substr(0, length) + replacement;\n        }\n    } else {\n        return value;\n    }\n};\n\n// Convert a model object to JSON\nfilters.json = function(rootObject, space, replacer) {\n       // replacer and space are optional\n    return JSON.stringify(toJS(rootObject), replacer, space);\n};\n\n// Format a number using the browser's toLocaleString\nfilters.number = function(value) {\n    return (+unwrap(value)).toLocaleString();\n};\n\n// Export the filters object for general access\nexport { filters };\n","\nimport { subscribable, dependencyDetection } from 'tko.observable';\nimport { getObjectOwnProperty, tasks } from 'tko.utils';\n\n\nvar loadingSubscribablesCache = {}, // Tracks component loads that are currently in flight\n    loadedDefinitionsCache = {};    // Tracks component loads that have already completed\n\nfunction loadComponentAndNotify(componentName, callback) {\n    var _subscribable = getObjectOwnProperty(loadingSubscribablesCache, componentName),\n        completedAsync;\n    if (!_subscribable) {\n        // It's not started loading yet. Start loading, and when it's done, move it to loadedDefinitionsCache.\n        _subscribable = loadingSubscribablesCache[componentName] = new subscribable();\n        _subscribable.subscribe(callback);\n\n        beginLoadingComponent(componentName, function(definition, config) {\n            var isSynchronousComponent = !!(config && config.synchronous);\n            loadedDefinitionsCache[componentName] = { definition: definition, isSynchronousComponent: isSynchronousComponent };\n            delete loadingSubscribablesCache[componentName];\n\n            // For API consistency, all loads complete asynchronously. However we want to avoid\n            // adding an extra task schedule if it's unnecessary (i.e., the completion is already\n            // async).\n            //\n            // You can bypass the 'always asynchronous' feature by putting the synchronous:true\n            // flag on your component configuration when you register it.\n            if (completedAsync || isSynchronousComponent) {\n                // Note that notifySubscribers ignores any dependencies read within the callback.\n                // See comment in loaderRegistryBehaviors.js for reasoning\n                _subscribable.notifySubscribers(definition);\n            } else {\n                tasks.schedule(function() {\n                    _subscribable.notifySubscribers(definition);\n                });\n            }\n        });\n        completedAsync = true;\n    } else {\n        _subscribable.subscribe(callback);\n    }\n}\n\nfunction beginLoadingComponent(componentName, callback) {\n    getFirstResultFromLoaders('getConfig', [componentName], function(config) {\n        if (config) {\n            // We have a config, so now load its definition\n            getFirstResultFromLoaders('loadComponent', [componentName, config], function(definition) {\n                callback(definition, config);\n            });\n        } else {\n            // The component has no config - it's unknown to all the loaders.\n            // Note that this is not an error (e.g., a module loading error) - that would abort the\n            // process and this callback would not run. For this callback to run, all loaders must\n            // have confirmed they don't know about this component.\n            callback(null, null);\n        }\n    });\n}\n\nfunction getFirstResultFromLoaders(methodName, argsExceptCallback, callback, candidateLoaders) {\n    // On the first call in the stack, start with the full set of loaders\n    if (!candidateLoaders) {\n        candidateLoaders = registry.loaders.slice(0); // Use a copy, because we'll be mutating this array\n    }\n\n    // Try the next candidate\n    var currentCandidateLoader = candidateLoaders.shift();\n    if (currentCandidateLoader) {\n        var methodInstance = currentCandidateLoader[methodName];\n        if (methodInstance) {\n            var wasAborted = false,\n                synchronousReturnValue = methodInstance.apply(currentCandidateLoader, argsExceptCallback.concat(function(result) {\n                    if (wasAborted) {\n                        callback(null);\n                    } else if (result !== null) {\n                        // This candidate returned a value. Use it.\n                        callback(result);\n                    } else {\n                        // Try the next candidate\n                        getFirstResultFromLoaders(methodName, argsExceptCallback, callback, candidateLoaders);\n                    }\n                }));\n\n            // Currently, loaders may not return anything synchronously. This leaves open the possibility\n            // that we'll extend the API to support synchronous return values in the future. It won't be\n            // a breaking change, because currently no loader is allowed to return anything except undefined.\n            if (synchronousReturnValue !== undefined) {\n                wasAborted = true;\n\n                // Method to suppress exceptions will remain undocumented. This is only to keep\n                // KO's specs running tidily, since we can observe the loading got aborted without\n                // having exceptions cluttering up the console too.\n                if (!currentCandidateLoader.suppressLoaderExceptions) {\n                    throw new Error('Component loaders must supply values by invoking the callback, not by returning values synchronously.');\n                }\n            }\n        } else {\n            // This candidate doesn't have the relevant handler. Synchronously move on to the next one.\n            getFirstResultFromLoaders(methodName, argsExceptCallback, callback, candidateLoaders);\n        }\n    } else {\n        // No candidates returned a value\n        callback(null);\n    }\n}\n\nexport var registry = {\n    get: function(componentName, callback) {\n        var cachedDefinition = getObjectOwnProperty(loadedDefinitionsCache, componentName);\n        if (cachedDefinition) {\n            // It's already loaded and cached. Reuse the same definition object.\n            // Note that for API consistency, even cache hits complete asynchronously by default.\n            // You can bypass this by putting synchronous:true on your component config.\n            if (cachedDefinition.isSynchronousComponent) {\n                dependencyDetection.ignore(function() { // See comment in loaderRegistryBehaviors.js for reasoning\n                    callback(cachedDefinition.definition);\n                });\n            } else {\n                tasks.schedule(function() { callback(cachedDefinition.definition); });\n            }\n        } else {\n            // Join the loading process that is already underway, or start a new one.\n            loadComponentAndNotify(componentName, callback);\n        }\n    },\n\n    clearCachedDefinition: function(componentName) {\n        delete loadedDefinitionsCache[componentName];\n    },\n\n    _getFirstResultFromLoaders: getFirstResultFromLoaders,\n\n    loaders: []\n};\n","//\n// Binding Handler for Components\n//\nimport {\n    virtualElements, makeArray, cloneNodes, addDisposeCallback\n} from 'tko.utils';\n\nimport {\n    computed\n} from 'tko.computed';\n\nimport {\n    unwrap\n} from 'tko.observable';\n\nimport {\n    applyBindingsToDescendants\n} from 'tko.bind';\n\nimport {\n    registry\n} from './loaderRegistry';\n\n\nvar componentLoadingOperationUniqueId = 0;\n\n\nfunction cloneTemplateIntoElement(componentName, componentDefinition, element) {\n    var template = componentDefinition['template'];\n    if (!template) {\n        throw new Error('Component \\'' + componentName + '\\' has no template');\n    }\n\n    var clonedNodesArray = cloneNodes(template);\n    virtualElements.setDomNodeChildren(element, clonedNodesArray);\n}\n\n\nfunction createViewModel(componentDefinition, element, originalChildNodes, componentParams) {\n    var componentViewModelFactory = componentDefinition.createViewModel;\n    return componentViewModelFactory\n        ? componentViewModelFactory.call(componentDefinition, componentParams, { 'element': element, 'templateNodes': originalChildNodes })\n        : componentParams; // Template-only component\n}\n\n\nexport var componentBinding = {\n    init: function(element, valueAccessor, ignored1, ignored2, bindingContext) {\n        var currentViewModel,\n            currentLoadingOperationId,\n            disposeAssociatedComponentViewModel = function () {\n                var currentViewModelDispose = currentViewModel && currentViewModel['dispose'];\n                if (typeof currentViewModelDispose === 'function') {\n                    currentViewModelDispose.call(currentViewModel);\n                }\n                currentViewModel = null;\n                // Any in-flight loading operation is no longer relevant, so make sure we ignore its completion\n                currentLoadingOperationId = null;\n            },\n            originalChildNodes = makeArray(virtualElements.childNodes(element));\n\n        addDisposeCallback(element, disposeAssociatedComponentViewModel);\n\n        computed(function () {\n            var value = unwrap(valueAccessor()),\n                componentName, componentParams;\n\n            if (typeof value === 'string') {\n                componentName = value;\n            } else {\n                componentName = unwrap(value['name']);\n                componentParams = unwrap(value['params']);\n            }\n\n            if (!componentName) {\n                throw new Error('No component name specified');\n            }\n\n            var loadingOperationId = currentLoadingOperationId = ++componentLoadingOperationUniqueId;\n            registry.get(componentName, function(componentDefinition) {\n                // If this is not the current load operation for this element, ignore it.\n                if (currentLoadingOperationId !== loadingOperationId) {\n                    return;\n                }\n\n                // Clean up previous state\n                disposeAssociatedComponentViewModel();\n\n                // Instantiate and bind new component. Implicitly this cleans any old DOM nodes.\n                if (!componentDefinition) {\n                    throw new Error('Unknown component \\'' + componentName + '\\'');\n                }\n                cloneTemplateIntoElement(componentName, componentDefinition, element);\n                var componentViewModel = createViewModel(componentDefinition, element, originalChildNodes, componentParams),\n                    childBindingContext = bindingContext['createChildContext'](componentViewModel, /* dataItemAlias */ undefined, function(ctx) {\n                        ctx['$component'] = componentViewModel;\n                        ctx['$componentTemplateNodes'] = originalChildNodes;\n                    });\n                currentViewModel = componentViewModel;\n                applyBindingsToDescendants(childBindingContext, element);\n            });\n        }, null, { disposeWhenNodeIsRemoved: element });\n\n        return { 'controlsDescendantBindings': true };\n    },\n\n    allowVirtualElements: true\n};\n","\nimport {\n    isDomElement, isDocumentFragment, tagNameLower, parseHtmlFragment,\n    makeArray, cloneNodes\n} from 'tko.utils';\n\nimport {\n    registry\n} from './loaderRegistry';\n\n\n// The default loader is responsible for two things:\n// 1. Maintaining the default in-memory registry of component configuration objects\n//    (i.e., the thing you're writing to when you call ko.components.register(someName, ...))\n// 2. Answering requests for components by fetching configuration objects\n//    from that default in-memory registry and resolving them into standard\n//    component definition objects (of the form { createViewModel: ..., template: ... })\n// Custom loaders may override either of these facilities, i.e.,\n// 1. To supply configuration objects from some other source (e.g., conventions)\n// 2. Or, to resolve configuration objects by loading viewmodels/templates via arbitrary logic.\n\nexport var defaultConfigRegistry = {};\n\nexport function register(componentName, config) {\n    if (!config) {\n        throw new Error('Invalid configuration for ' + componentName);\n    }\n\n    if (isRegistered(componentName)) {\n        throw new Error('Component ' + componentName + ' is already registered');\n    }\n\n    defaultConfigRegistry[componentName] = config;\n}\n\nexport function isRegistered(componentName) {\n    return defaultConfigRegistry.hasOwnProperty(componentName);\n}\n\nexport function unregister(componentName) {\n    delete defaultConfigRegistry[componentName];\n    registry.clearCachedDefinition(componentName);\n}\n\nexport var defaultLoader = {\n    getConfig: function(componentName, callback) {\n        var result = defaultConfigRegistry.hasOwnProperty(componentName)\n            ? defaultConfigRegistry[componentName]\n            : null;\n        callback(result);\n    },\n\n    loadComponent: function(componentName, config, callback) {\n        var errorCallback = makeErrorCallback(componentName);\n        possiblyGetConfigFromAmd(errorCallback, config, function(loadedConfig) {\n            resolveConfig(componentName, errorCallback, loadedConfig, callback);\n        });\n    },\n\n    loadTemplate: function(componentName, templateConfig, callback) {\n        resolveTemplate(makeErrorCallback(componentName), templateConfig, callback);\n    },\n\n    loadViewModel: function(componentName, viewModelConfig, callback) {\n        resolveViewModel(makeErrorCallback(componentName), viewModelConfig, callback);\n    }\n};\n\nvar createViewModelKey = 'createViewModel';\n\n// Takes a config object of the form { template: ..., viewModel: ... }, and asynchronously convert it\n// into the standard component definition format:\n//    { template: <ArrayOfDomNodes>, createViewModel: function(params, componentInfo) { ... } }.\n// Since both template and viewModel may need to be resolved asynchronously, both tasks are performed\n// in parallel, and the results joined when both are ready. We don't depend on any promises infrastructure,\n// so this is implemented manually below.\nfunction resolveConfig(componentName, errorCallback, config, callback) {\n    var result = {},\n        makeCallBackWhenZero = 2,\n        tryIssueCallback = function() {\n            if (--makeCallBackWhenZero === 0) {\n                callback(result);\n            }\n        },\n        templateConfig = config['template'],\n        viewModelConfig = config['viewModel'];\n\n    if (templateConfig) {\n        possiblyGetConfigFromAmd(errorCallback, templateConfig, function(loadedConfig) {\n            registry._getFirstResultFromLoaders('loadTemplate', [componentName, loadedConfig], function(resolvedTemplate) {\n                result['template'] = resolvedTemplate;\n                tryIssueCallback();\n            });\n        });\n    } else {\n        tryIssueCallback();\n    }\n\n    if (viewModelConfig) {\n        possiblyGetConfigFromAmd(errorCallback, viewModelConfig, function(loadedConfig) {\n            registry._getFirstResultFromLoaders('loadViewModel', [componentName, loadedConfig], function(resolvedViewModel) {\n                result[createViewModelKey] = resolvedViewModel;\n                tryIssueCallback();\n            });\n        });\n    } else {\n        tryIssueCallback();\n    }\n}\n\nfunction resolveTemplate(errorCallback, templateConfig, callback) {\n    if (typeof templateConfig === 'string') {\n        // Markup - parse it\n        callback(parseHtmlFragment(templateConfig));\n    } else if (templateConfig instanceof Array) {\n        // Assume already an array of DOM nodes - pass through unchanged\n        callback(templateConfig);\n    } else if (isDocumentFragment(templateConfig)) {\n        // Document fragment - use its child nodes\n        callback(makeArray(templateConfig.childNodes));\n    } else if (templateConfig['element']) {\n        var element = templateConfig['element'];\n        if (isDomElement(element)) {\n            // Element instance - copy its child nodes\n            callback(cloneNodesFromTemplateSourceElement(element));\n        } else if (typeof element === 'string') {\n            // Element ID - find it, then copy its child nodes\n            var elemInstance = document.getElementById(element);\n            if (elemInstance) {\n                callback(cloneNodesFromTemplateSourceElement(elemInstance));\n            } else {\n                errorCallback('Cannot find element with ID ' + element);\n            }\n        } else {\n            errorCallback('Unknown element type: ' + element);\n        }\n    } else {\n        errorCallback('Unknown template value: ' + templateConfig);\n    }\n}\n\nfunction resolveViewModel(errorCallback, viewModelConfig, callback) {\n    if (typeof viewModelConfig === 'function') {\n        // Constructor - convert to standard factory function format\n        // By design, this does *not* supply componentInfo to the constructor, as the intent is that\n        // componentInfo contains non-viewmodel data (e.g., the component's element) that should only\n        // be used in factory functions, not viewmodel constructors.\n        callback(function (params /*, componentInfo */) {\n            return new viewModelConfig(params);\n        });\n    } else if (typeof viewModelConfig[createViewModelKey] === 'function') {\n        // Already a factory function - use it as-is\n        callback(viewModelConfig[createViewModelKey]);\n    } else if ('instance' in viewModelConfig) {\n        // Fixed object instance - promote to createViewModel format for API consistency\n        var fixedInstance = viewModelConfig['instance'];\n        callback(function (/* params, componentInfo */) {\n            return fixedInstance;\n        });\n    } else if ('viewModel' in viewModelConfig) {\n        // Resolved AMD module whose value is of the form { viewModel: ... }\n        resolveViewModel(errorCallback, viewModelConfig['viewModel'], callback);\n    } else {\n        errorCallback('Unknown viewModel value: ' + viewModelConfig);\n    }\n}\n\nfunction cloneNodesFromTemplateSourceElement(elemInstance) {\n    switch (tagNameLower(elemInstance)) {\n    case 'script':\n        return parseHtmlFragment(elemInstance.text);\n    case 'textarea':\n        return parseHtmlFragment(elemInstance.value);\n    case 'template':\n        // For browsers with proper <template> element support (i.e., where the .content property\n        // gives a document fragment), use that document fragment.\n        if (isDocumentFragment(elemInstance.content)) {\n            return cloneNodes(elemInstance.content.childNodes);\n        }\n    }\n\n    // Regular elements such as <div>, and <template> elements on old browsers that don't really\n    // understand <template> and just treat it as a regular container\n    return cloneNodes(elemInstance.childNodes);\n}\n\n\nfunction possiblyGetConfigFromAmd(errorCallback, config, callback) {\n    if (typeof config.require === 'string') {\n        // The config is the value of an AMD module\n        if (window.amdRequire || window.require) {\n            (window.amdRequire || window.require)([config.require], callback);\n        } else {\n            errorCallback('Uses require, but no AMD loader is present');\n        }\n    } else {\n        callback(config);\n    }\n}\n\nfunction makeErrorCallback(componentName) {\n    return function (message) {\n        throw new Error('Component \\'' + componentName + '\\': ' + message);\n    };\n}\n\n\n// By default, the default loader is the only registered component loader\nregistry.loaders.push(defaultLoader);\n","\nimport { tagNameLower, objectMap } from 'tko.utils';\nimport { unwrap, isWriteableObservable } from 'tko.observable';\nimport { computed } from 'tko.computed';\n\nimport { isRegistered } from './defaultLoader';\n\n\n// Overridable API for determining which component name applies to a given node. By overriding this,\n// you can for example map specific tagNames to components that are not preregistered.\nexport function getComponentNameForNode(node) {\n    if (node.nodeType !== node.ELEMENT_NODE) { return; }\n    var _tagNameLower = tagNameLower(node);\n    if (isRegistered(_tagNameLower)) {\n        // Try to determine that this node can be considered a *custom* element; see https://github.com/knockout/knockout/issues/1603\n        if (_tagNameLower.indexOf('-') != -1 || ('' + node) == \"[object HTMLUnknownElement]\") {\n            return _tagNameLower;\n        }\n    }\n}\n\n\n// getBindingAccessors\n// ---\n// Return the binding accessors for custom elements i.e.\n// `<cust-ele params='...'>` becomes\n// `<cust-ele data-bind='component: {name: \"cust-ele\", params: ...}'>`\n//\nexport function getBindingAccessors(node, context, parser, bindings) {\n    return addBindingsForCustomElement(bindings, node, context, /* valueAccessors */ true, parser);\n}\n\n\nexport function addBindingsForCustomElement(allBindings, node, bindingContext, valueAccessors, parser) {\n    // Determine if it's really a custom element matching a component\n    if (node.nodeType === 1) {\n        var componentName = bindingProvider.getComponentNameForNode(node);\n        if (componentName) {\n            // It does represent a component, so add a component binding for it\n            allBindings = allBindings || {};\n\n            if (allBindings.component) {\n                // Avoid silently overwriting some other 'component' binding that may already be on the element\n                throw new Error('Cannot use the \"component\" binding on a custom element matching a component');\n            }\n\n            var componentBindingValue = {\n                'name': componentName,\n                'params': getComponentParamsFromCustomElement(node, bindingContext, parser)\n            };\n\n            allBindings.component = valueAccessors\n                ? function() { return componentBindingValue; }\n                : componentBindingValue;\n        }\n    }\n\n    return allBindings;\n}\n\n\nexport function getComponentParamsFromCustomElement(node, context, parser) {\n    var accessors = parser.parse(node.getAttribute('params'));\n    if (!accessors || Object.keys(accessors).length === 0) {\n        return {\n            $raw: {}\n        };\n    }\n\n    var rawParamComputedValues = objectMap(accessors,\n        function(paramValue /*, paramName */ ) {\n            return computed(paramValue, null, {\n                disposeWhenNodeIsRemoved: node\n            });\n        }\n    );\n\n    var params = objectMap(rawParamComputedValues,\n        function(paramValueComputed /*, paramName */ ) {\n            var paramValue = paramValueComputed.peek();\n            // Does the evaluation of the parameter value unwrap any observables?\n            if (!paramValueComputed.isActive()) {\n                // No it doesn't, so there's no need for any computed wrapper. Just pass through the supplied value directly.\n                // Example: \"someVal: firstName, age: 123\" (whether or not firstName is an observable/computed)\n                return paramValue;\n            } else {\n                // Yes it does. Supply a computed property that unwraps both the outer (binding expression)\n                // level of observability, and any inner (resulting model value) level of observability.\n                // This means the component doesn't have to worry about multiple unwrapping. If the value is a\n                // writable observable, the computed will also be writable and pass the value on to the observable.\n                return computed({\n                    read: function() {\n                        return unwrap(paramValueComputed());\n                    },\n                    write: isWriteableObservable(paramValue) && function(value) {\n                        paramValueComputed()(value);\n                    },\n                    disposeWhenNodeIsRemoved: node\n                });\n            }\n        }\n    );\n    // For consistency, absence of a \"params\" attribute is treated the same as the presence of\n    // any empty one. Otherwise component viewmodels need special code to check whether or not\n    // 'params' or 'params.$raw' is null/undefined before reading subproperties, which is annoying.\n\n    if (!params.hasOwnProperty('$raw')) {\n        params.$raw = rawParamComputedValues;\n    }\n    return params;\n}\n\n\nexport var bindingProvider = {\n    nodeHasBindings: function (node) {\n        return bindingProvider.getComponentNameForNode(node);\n    },\n    getBindingAccessors: getBindingAccessors,\n    getComponentNameForNode: getComponentNameForNode\n};\n","//\n// Export the Components\n//\n// ko.bindingHandlers.component\n//\n\nimport { componentBinding } from './src/componentBinding';\nimport { registry } from './src/loaderRegistry';\nimport * as elements from './src/customElements';\nimport * as loader from './src/defaultLoader';\n\n\nvar components = {\n    // -- Registry --\n    get: registry.get,\n    clearCachedDefinition: registry.clearCachedDefinition,\n\n    // -- Loader --\n    register: loader.register,\n    isRegistered: loader.isRegistered,\n    unregister: loader.unregister,\n    defaultLoader: loader.defaultLoader,\n    // \"Privately\" expose the underlying config registry for use in old-IE shim\n    _allRegisteredComponents: loader.defaultConfigRegistry,\n\n    // -- Custom elements --\n    addBindingsForCustomElement: elements.addBindingsForCustomElement,\n\n    // -- Binding handler --\n    bindingHandler: componentBinding,\n\n    // -- Extend the Binding Provider --\n    // to recognize and bind <custom-element>'s.\n    bindingProvider: elements.bindingProvider\n};\n\n\n// This is to ensure that \"component.loaders = [a,b,c]\" works as expected.\nObject.defineProperty(components, 'loaders', {\n    enumerable: true,\n    get: function () { return registry.loaders; },\n    set: function (loaders) { registry.loaders = loaders; }\n});\n\n\nexport default components;\n","/* eslint semi: 0 */\nimport * as utils from 'tko.utils'\nimport { options } from 'tko.utils'\n\nimport {\n    // applyExtenders,\n    // arrayChangeEventName,\n    // deferUpdates,\n    dependencyDetection,\n    extenders,\n    isObservable,\n    isSubscribable,\n    isWriteableObservable,\n    observable,\n    observableArray,\n    peek,\n    subscribable,\n    toJS,\n    toJSON,\n    unwrap\n} from 'tko.observable'\n\nimport {\n    computed,\n    isComputed,\n    isPureComputed,\n    pureComputed\n} from 'tko.computed'\n\nimport {\n    Provider\n} from 'tko.provider';\n\nimport {\n    applyBindingAccessorsToNode,\n    applyBindings,\n    applyBindingsToDescendants,\n    applyBindingsToNode,\n    contextFor,\n    dataFor,\n    getBindingHandler,\n    BindingHandler,\n    setDomNodeChildrenFromArrayMapping\n} from 'tko.bind';\n\nimport {\n    bindings as coreBindings\n} from 'tko.binding.core';\n\nimport {\n    anonymousTemplate,\n    bindings as templateBindings,\n    domElement,\n    nativeTemplateEngine,\n    renderTemplate,\n    setTemplateEngine,\n    templateEngine\n    // templateSources\n} from 'tko.binding.template';\n\nimport {\n    bindings as ifBindings\n} from 'tko.binding.if';\n\nimport {\n    bindings as foreachBindings\n} from 'tko.binding.foreach';\n\nimport {\n    preprocessors as textInterpolation\n} from 'tko.preprocessor.textInterpolation';\n\nimport {\n    filters as punchesFilters\n} from 'tko.filter.punches';\n\nimport components from 'tko.components'\n\n// --- TODO ---\n// Component\n// Other extenders\n// Other bindings\n\nvar coreUtils = {}\n\nutils.arrayForEach([\n    \"extend\",\n    \"setTimeout\",\n    \"arrayForEach\",\n    \"arrayFirst\",\n    \"arrayFilter\",\n    \"arrayGetDistinctValues\",\n    \"arrayIndexOf\",\n    \"arrayMap\",\n    \"arrayPushAll\",\n    \"arrayRemoveItem\",\n    \"getFormFields\",\n    \"peekObservable\",\n    \"postJson\",\n    \"parseJson\",\n    \"registerEventHandler\",\n    \"stringifyJson\",\n    \"range\",\n    \"toggleDomNodeCssClass\",\n    \"triggerEvent\",\n    \"unwrapObservable\",\n    \"objectForEach\",\n    \"addOrRemoveItem\",\n    \"setTextContent\",\n    \"domData\",\n    \"parseHtmlFragment\",\n    \"setHtml\",\n    \"compareArrays\",\n    \"setDomNodeChildrenFromArrayMapping\"\n], function (coreUtil) {\n    coreUtils[coreUtil] = utils[coreUtil]\n})\n\ncoreUtils.domNodeDisposal = {\n    addDisposeCallback: utils.addDisposeCallback,\n    otherNodeCleanerFunctions: utils.otherNodeCleanerFunctions,\n    removeDisposeCallback: utils.removeDisposeCallback,\n    removeNode: utils.removeNode,\n}\n\n\nutils.extend(coreUtils, {\n    setDomNodeChildrenFromArrayMapping:  setDomNodeChildrenFromArrayMapping,\n    unwrapObservable: unwrap,\n    peekObservable: peek\n})\n\n\n// Create the binding provider and default bindings.\nvar provider = new Provider();\noptions.bindingProviderInstance = provider;\nprovider.bindingHandlers.set(coreBindings);\nprovider.bindingHandlers.set(templateBindings);\nprovider.bindingHandlers.set(ifBindings);\nprovider.bindingHandlers.set(foreachBindings);\nprovider.bindingHandlers.set({ each: foreachBindings.foreach });\nprovider.addNodePreprocessor(textInterpolation[0].nodePreProcessor);\nprovider.addNodePreprocessor(textInterpolation[1].nodePreProcessor);\nprovider.bindingHandlers.set({ component: components.bindingHandler });\nprovider.addProvider(components.bindingProvider);\n\n\nutils.extend(options.filters, punchesFilters);\n\n\n// Expose the API.\nexport default {\n    // --- Top-level ---\n    version: {{VERSION}},\n    options: options,\n\n    extenders: extenders,\n    filters: options.filters,\n\n\n    // --- Utilities ---\n    cleanNode: utils.cleanNode,\n    memoization: utils.memoization,\n    removeNode: utils.removeNode,\n    tasks: utils.tasks,\n    utils: coreUtils,\n    dependencyDetection: dependencyDetection,\n    ignoreDependencies: dependencyDetection.ignore,\n\n\n    // -- Observable ---\n    isObservable: isObservable,\n    isSubscribable: isSubscribable,\n    isWriteableObservable: isWriteableObservable,\n    isWritableObservable: isWriteableObservable,\n    observable: observable,\n    observableArray: observableArray,\n    peek: peek,\n    subscribable: subscribable,\n    unwrap: unwrap,\n    toJS: toJS,\n    toJSON: toJSON,\n\n    // ... Computed ...\n    computed: computed,\n    isComputed: isComputed,\n    isPureComputed: isPureComputed,\n    pureComputed: pureComputed,\n\n\n    // --- Templates ---\n    nativeTemplateEngine: nativeTemplateEngine,\n    renderTemplate: renderTemplate,\n    setTemplateEngine: setTemplateEngine,\n    templateEngine: templateEngine,\n    templateSources: {\n        domElement: domElement,\n        anonymousTemplate: anonymousTemplate\n    },\n\n    // --- Binding ---\n    applyBindingAccessorsToNode: applyBindingAccessorsToNode,\n    applyBindings: applyBindings,\n    applyBindingsToDescendants: applyBindingsToDescendants,\n    applyBindingsToNode: applyBindingsToNode,\n    bindingHandlers: provider.bindingHandlers,\n    bindingProvider: Provider,\n    contextFor: contextFor,\n    dataFor: dataFor,\n    getBindingHandler: getBindingHandler,\n    BindingHandler: BindingHandler,\n    virtualElements: utils.virtualElements,\n    domNodeDisposal: coreUtils.domNodeDisposal,\n\n    // --- Components ---\n    components: components\n}\n"],"names":["arrayForEach","array","action","i","j","length","arrayIndexOf","item","Array","prototype","indexOf","call","arrayFirst","predicate","predicateOwner","arrayRemoveItem","itemToRemove","index","splice","shift","arrayGetDistinctValues","result","push","arrayMap","mapping","arrayFilter","arrayPushAll","valuesToPush","apply","addOrRemoveItem","value","included","existingEntryIndex","peek","makeArray","arrayLikeObject","range","min","max","findMovesInArrayComparison","left","right","limitFailedCompares","failedCompares","l","r","leftItem","rightItem","statusNotInOld","statusNotInNew","compareArrays","oldArray","newArray","options","compareSmallArrayToBigArray","smlArray","bigArray","statusNotInSml","statusNotInBig","myMin","Math","myMax","editDistanceMatrix","smlIndex","smlIndexMax","bigIndex","bigIndexMax","compareRange","maxDistance","thisRow","lastRow","bigIndexMaxForRow","bigIndexMinForRow","northDistance","westDistance","editScript","meMinusOne","notInSml","notInBig","reverse","window","jQuery","e","name","Object","defineProperty","catchFunctionErrors","delegate","onError","arguments","deferError","error","safeSetTimeout","handler","timeout","setTimeout","throttle","callback","timeoutInstance","undefined","debounce","ieVersion","document","version","div","createElement","iElems","getElementsByTagName","innerHTML","isIe6","isIe7","extend","target","source","prop","hasOwnProperty","objectForEach","obj","objectMap","getObjectOwnProperty","propName","clonePlainObjectDeep","seen","constructor","protoProperty","canSetPrototype","babelHelpers.extends","setPrototypeOf","proto","setPrototypeOfOrExtend","hasPrototype","instance","stringTrim","string","trim","toString","replace","stringStartsWith","startsWith","substring","parseJson","jsonString","JSON","parse","Function","stringifyJson","data","replacer","space","stringify","Error","useSymbols","Symbol","createSymbolOrString","identifier","cssClassNameRegex","toggleDomNodeCssClass","node","classNames","shouldHaveClass","addOrRemoveFn","babelHelpers.typeof","classList","match","className","toggleObjectClassPropertyString","currentClassNames","join","jQueryInstance","jQuerySetInstance","jquery","domNodeIsContainedBy","containedByNode","nodeType","contains","parentNode","compareDocumentPosition","domNodeIsAttachedToDocument","ownerDocument","documentElement","anyDomNodeIsAttachedToDocument","nodes","tagNameLower","element","tagName","toLowerCase","isDomElement","HTMLElement","isDocumentFragment","DocumentFragment","dataStoreKeyExpandoPropertyName","Date","dataStore","uniqueId","get","set","clear","getAll","createIfNotFound","dataStoreKey","hasExistingDataStore","legacyGet","key","allDataForNode","legacySet","legacyClear","wmGet","wmSet","dataForNode","has","wmClear","WeakMap","nextKey","domDataKey","domData","cleanableNodeTypes","cleanableNodeTypesWithDescendants","getDisposeCallbacksCollection","allDisposeCallbacks","destroyCallbacksCollection","cleanSingleNode","callbacks","slice","otherNodeCleanerFunctions","cleanImmediateCommentTypeChildren","nodeWithChildren","child","nextChild","firstChild","nextSibling","addDisposeCallback","removeDisposeCallback","callbacksCollection","cleanNode","descendants","removeNode","removeChild","cleanjQueryData","jQueryCleanNodeFn","cleanData","knownEvents","knownEventTypesByEventName","keyEventTypeName","navigator","test","userAgent","eventType","knownEventsForType","isClickOnCheckableElement","type","inputType","eventsThatMustBeRegisteredUsingAttachEvent","registerEventHandler","wrappedHandler","mustUseAttachEvent","useOnlyNativeEvents","bind","addEventListener","attachEvent","attachEventHandler","event","attachEventName","detachEvent","triggerEvent","useClickWorkaround","trigger","createEvent","dispatchEvent","eventCategory","initEvent","click","fireEvent","fixUpContinuousNodeArray","continuousNodeArray","current","last","setOptionNodeSelectionState","optionNode","isSelected","setAttribute","selected","forceRefresh","elem","style","zoom","ensureSelectElementIsRenderedCorrectly","selectElement","originalWidth","width","commentNodesHaveTextProperty","createComment","text","startCommentRegex","endCommentRegex","htmlTagsWithOptionallyClosingChildren","isStartComment","nodeValue","isEndComment","getVirtualChildren","startComment","allowUnbalanced","currentNode","depth","children","getMatchingEndComment","allVirtualChildren","getUnbalancedChildTags","childNode","captureRemaining","matchingEndComment","allowedBindings","hasBindingValue","childNodes","emptyNode","emptyDomNode","virtualChildren","setDomNodeChildren","setRegularDomNodeChildren","endCommentNode","insertBefore","prepend","containerNode","nodeToPrepend","appendChild","insertAfter","nodeToInsert","insertAfterNode","lastChild","lastChildNode","previousSibling","virtualNodeBindingValue","regexMatch","normaliseVirtualElementDomStructure","elementVerified","unbalancedTags","nodeToInsertBefore","moveCleanedNodesToContainerElement","nodesArray","templateDocument","container","cloneNodes","shouldCleanNodes","newNodesArray","clonedNode","cloneNode","domNode","replaceDomNodes","nodeToReplaceOrNodeArray","nodesToReplaceArray","insertionPoint","parent","setElementName","mergeAttributes","setTextContent","textContent","innerTextNode","virtualElements","createTextNode","none","table","tbody","colgroup","tr","select","fieldset","map","object","lookup","supportsTemplateTag","getWrap","tags","m","simpleHtmlParse","html","documentContext","windowContext","wrap","markup","templateHtmlParse","template","content","jQueryHtmlParse","parseHTML","elems","clean","parseHtmlFragment","setHtml","parsedNodes","memos","randomMax8HexChars","random","generateRandomId","findMemoNodes","rootNode","appendToArray","memoId","parseMemoText","memoize","unmemoize","callbackParams","unmemoizeDomNodeAndDescendants","extraCallbackParamsArray","combinedParams","memoText","taskQueue","taskQueueLength","nextHandle","nextIndexToProcess","MutationObserver","standalone","taskScheduler","observe","attributes","toggle","scheduledProcess","script","onreadystatechange","processTasks","mark","countMarks","task","ex","scheduleTaskProcessing","schedule","func","cancel","handle","resetForTesting","deferUpdates","_deferUpdates","limit","tasks","notifySubscribers","primitiveTypes","valuesArePrimitiveAndEqual","a","b","oldValueIsPrimitive","applyExtenders","requestedExtenders","extenderHandler","extenders","notify","notifyWhen","equalityComparer","deferred","option","rateLimit","method","limitFunction","debounceFn","throttleFn","subscription","disposeCallback","_target","isDisposed","dispose","subscribable","ko_subscribable_fn","init","defaultEvent","_subscriptions","_versionNumber","callbackTarget","self","boundCallback","subscriptionInstance","afterSubscriptionRemove","beforeSubscriptionAdd","valueToNotify","updateVersion","hasSubscriptionsForEvent","versionToCheck","getVersion","total","eventName","subscriptions","oldValue","newValue","fn","isSubscribable","subscribe","outerFrames","currentFrame","lastId","getId","begin","end","pop","registerDependency","_id","ignore","callbackArgs","getDependenciesCount","computed","isInitial","observableLatestValue","observable","initialValue","Observable","isDifferent","valueWillMutate","valueHasMutated","limitNotifySubscribers","_limitChange","_limitBeforeChange","_origNotifySubscribers","selfIsObservable","isObservable","ignoreBeforeChange","previousValue","pendingValue","beforeChange","finish","_notificationIsPending","unwrap","isWriteableObservable","hasWriteFunction","arrayChangeEventName","trackArrayChanges","compareArrayOptions","sparse","cacheDiffForKnownOperation","trackingChanges","cachedDiff","arrayChangeSubscription","pendingNotifications","underlyingBeforeSubscriptionAddFunction","underlyingAfterSubscriptionRemoveFunction","trackChanges","underlyingNotifySubscribersFunction","previousContents","concat","currentContents","changes","getChanges","rawArray","operationName","args","argsIndex","diff","arrayLength","argsLength","offset","pushDiff","status","startIndex","endDeleteIndex","endAddIndex","endIndex","additions","deletions","observableArray","initialValues","valueOrPredicate","underlyingArray","removedValues","arrayOfValues","allValues","destroy","oldItem","newItem","methodName","methodCallResult","maxNestedObservableDepth","toJS","rootObject","mapJsObjectGraph","valueToMap","toJSON","plainJavaScriptObject","mapInputCallback","visitedObjects","objectLookup","canHaveProperties","RegExp","String","Number","Boolean","outputProperties","save","indexer","propertyValue","previouslyMappedValue","visitPropertiesOrArrayEntries","visitorCallback","propertyName","keys","values","existingIndex","computedState","evaluatorFunctionOrOptions","evaluatorFunctionTarget","read","writeFunction","write","state","owner","disposeWhenNodeIsRemoved","disposeWhen","computedObservable","isStale","isSleeping","haveDependenciesChanged","evaluateImmediate","latestValue","pure","pureComputedOverrides","deferEvaluation","deferEvaluationOverrides","koOptions","debug","_options","suppressDisposalUntilDisposeWhenReturnsFalse","isActive","domNodeDisposalCallback","computedDisposeDependencyCallback","id","entryToDispose","computedBeginDependencyDetectionCallback","disposalCount","disposalCandidates","addDependencyTracking","dependencyTracking","subscribeToDependency","dependenciesCount","trackingObj","_order","_version","dependency","hasChanged","_evalDelayed","isBeingEvaluated","evaluatePossiblyAsync","dirtySub","markDirty","changeSub","respondToChange","throttleEvaluationTimeout","throttleEvaluation","evaluationTimeoutInstance","notifyChange","evaluateImmediate_CallReadWithDependencyDetection","dependencyDetectionContext","evaluateImmediate_CallReadThenEndDependencyDetection","readFunction","dependeciesOrder","order","protoProp","isComputed","isPureComputed","pureComputed","throttleExtender","writeTimeoutInstance","stringDouble","stringSingle","stringRegexp","specials","everyThingElse","oneNotSpace","bindingToken","divisionLookBehind","keywordRegexLookBehind","parseObjectLiteral","objectLiteralString","str","charCodeAt","toks","tok","c","substr","Node","lhs","op","rhs","LAMBDA","unwrapOrCall","operators","not","notnot","preinc","mul","mod","add","sub","neg","lt","le","gt","ge","equal","ne","sequal","sne","bit_and","xor","bit_or","logic_and","logic_or","member","ternary","value_of","yes","no","precedence","get_leaf_value","leaf","member_of","isExpressionOrIdentifierSymbol","get_value","get_node_value","create_root","root","Expression","Arguments","parser","dereffed_args","Identifier","token","dereferences","lookup_value","$context","context","$data","globals","dereference","refs","last_value","n","assign","property","set_value","new_value","ID_Start","ID_Continue","is_valid_start_char","ch","is_valid_continue_char","Ternary","escapee","Parser","white","next","comment","p","at","second","lookahead","charAt","enclosed_by","number","isFinite","object_add_value","expression","read_string","delim","plus_op","hex","uffff","interpolate","parseInt","fromCharCode","operator","opts","op_fn","is_identifier_char","not_an_array","prefix","filter","next_filter","v","filters","arg_values","filterable","deref","func_arguments","read_bindings","bindings","sep","expr","split","convert_to_accessors","optionalValue","onlyIfChanged","expressionAccessor","nodeAccessor","isArray","arrayAccessor","constAccessor","emsg","message","Provider","otherProviders","bindingPreProcessors","nodePreProcessors","preprocessors","bindingHandlers","addGetterSetter","bindingHandlersObject","defineProperties","setBindingHandler","nameOrObject","getBindingHandler","nodeHasBindings","ELEMENT_NODE","getAttribute","defaultBindingAttribute","COMMENT_NODE","allowVirtualElements","getBindingsString","getBindingAccessors","bindingGlobals","binding_string","preProcessBindings","bindingString","results","preprocessed","preprocessNode","addBinding","processBinding","preprocess","keyValueItem","unknown","startingPreprocessorIndex","newNodes","addProvider","clearProviders","addBindingPreprocessor","clearBindingPreprocessors","addNodePreprocessor","clearNodePreprocessors","storedBindingContextDomDataKey","bindingContext","dataItemOrAccessor","parentContext","dataItemAlias","extendCallback","settings","isFunc","updateContext","dataItemOrObservable","dataItem","_subscribable","$parents","$root","ko","knockoutInstance","$rawData","exportDependencies","_addNode","createChildContext","$parentContext","$parent","unshift","properties","createStaticChildContext","storedBindingContextForNode","contextFor","dataFor","SUBSCRIPTIONS","ANCHOR_NODE","LifeCycle","mixInto","Constructor","addDisposable","params","act","__addEventListener","event_type","removeEventListener","anchorTo","forEach","s","BindingHandler","$element","valueAccessor","allBindings","onValueChange","registerAs","provider","bindingProviderInstance","LegacyBindingHandler","after","initReturn","legacyArgs","update","objectToTest","controlsDescendantBindings","getBindingHandlerClass","initFn","disposeFn","bindingDoesNotRecurseIntoElementTypes","bindingKey","makeValueAccessor","evaluateValueAccessor","makeAccessorsFromFunction","dependencyDetection","makeBindingAccessors","getBindingsAndMakeAccessors","getBindings","applyBindingsToDescendantsInternal","elementOrVirtualElement","bindingContextsMayDifferFromDomParentElement","currentChild","nextInQueue","applyBindingsToNodeAndDescendantsInternal","nodeVerified","bindingContextMayDifferFromDomParentElement","shouldBindDescendants","isElement","shouldApplyBindings","applyBindingsToNodeInternal","boundElementDomDataKey","topologicalSortBindings","pushBinding","bindingsConsidered","binding","bindingDependencyKey","cyclicDependencyStack","sourceBindings","alreadyBound","bindingsUpdater","bindingHandlerThatControlsDescendantBindings","allBindingHandlers","getValueAccessor","bindingKeyAndHandler","reportBindingError","during","errorCaptured","BindingHandlerClass","bindingHandler","controlsDescendants","err","getBindingContext","viewModelOrBindingContext","applyBindingAccessorsToNode","applyBindingsToNode","applyBindingsToDescendants","applyBindings","body","onBindingError","spec","bindingText","stack","mapNodeAndRefreshWhenChanged","callbackAfterAddingNodes","mappedNodes","dependentObservable","newMappedNodes","lastMappingResultDomDataKey","deletedItemDummyValue","setDomNodeChildrenFromArrayMapping","isFirstExecution","lastMappingResult","lastArray","x","arrayEntry","newMappingResult","lastMappingResultIndex","newMappingResultIndex","nodesToDelete","itemsToProcess","itemsForBeforeRemoveCallbacks","itemsForMoveCallbacks","itemsForAfterAddCallbacks","mapData","itemMovedOrRetained","editScriptIndex","oldPosition","indexObservable","callCallback","items","editScriptItem","movedIndex","nextNode","lastNode","initialized","attr","attrName","attrValue","toRemove","removeAttribute","checked","checkedValue","updateModel","isChecked","elemValue","useCheckedValue","isRadio","modelValue","valueIsArray","writableValue","rawValueIsNonArrayObservable","oldElemValue","updateView","isCheckbox","rawValue","makeEventHandlerShortcut","viewModel","newValueAccessor","eventHandler","eventsToHandle","handlerReturnValue","handlerFunction","argsForHandler","preventDefault","returnValue","bubble","cancelBubble","stopPropagation","onHandler","css","classesWrittenByBindingKey","enable","disabled","disable","hasfocusUpdatingProperty","hasfocusLastValue","hasfocus","handleElementFocusChange","isFocused","ownerDoc","active","activeElement","handleElementFocusIn","handleElementFocusOut","focus","blur","innerContext","hasDomDataExpandoProperty","selectExtensions","optionValueDomDataKey","selectedIndex","readValue","allowUnset","selection","optionValue","size","captionPlaceholder","remove","selectedOptions","selectWasPreviouslyEmpty","multiple","previousScrollTop","scrollTop","unwrappedArray","valueAllowUnset","includeDestroyed","arrayToDomNodeChildrenOptions","captionValue","filteredArray","previousSelectedValues","applyToObject","defaultValue","predicateType","itemUpdate","optionForArrayItem","oldOptions","writeValue","optionText","setSelectionCallback","newOptions","selectionChanged","abs","valueToWrite","styleName","styleValue","submit","parseVersion","operaVersion","safariVersion","firefoxVersion","matches","parseFloat","opera","selectionChangeRegisteredName","selectionChangeHandlerName","selectionChangeHandler","registerForSelectionChangeEvent","textInput","previousElementValue","timeoutHandle","elementValueBeforeEvent","elementValue","deferUpdateModel","ieUpdateModel","onEvent","_forceUpdateOn","uniqueName","currentIndex","eventsToCatch","requestedEventsToCatch","propertyChangedFired","valueUpdateHandler","ieAutoCompleteHackNeeded","autocomplete","form","updateFromModel","valueHasChanged","applyValueAction","visible","isCurrentlyVisible","display","hidden","using","hasFocus","$let","templateScript","templateTextArea","templateTemplate","templateElement","domElement","tagNameLowerFn","templateType","elemContentsProperty","dataDomDataPrefix","templatesDomDataKey","getTemplateDomData","setTemplateDomData","templateData","containerData","anonymousTemplate","textData","templateEngine","templateSource","getElementById","renderTemplateSource","_templateEngine","setTemplateEngine","tEngine","invokeForEachNodeInContinuousRange","firstNode","firstOutOfRangeNode","activateBindingsOnContinuousNodeArray","nextNodeInRange","nodePreviousSibling","memoization","getFirstNodeFromPossibleArray","nodeOrNodeArray","executeTemplate","targetNodeOrNodeArray","renderMode","firstTargetNode","templateEngineToUse","renderedNodesArray","renderTemplate","haveAddedNodesToParent","resolveTemplateName","dataOrBindingContext","whenToDispose","activelyDisposeWhenNodeIsRemoved","bindingContextConstructor","templateName","renderTemplateForEach","arrayOrObservableArray","targetNode","parentBindingContext","arrayItemContext","executeTemplateForArrayItem","arrayValue","activateBindingsCallback","addedNodesArray","templateComputedDomDataKey","disposeOldComputedAndStoreNewOne","newComputed","oldComputed","bindingValue","templateNodes","shouldDisplay","templateComputed","elseChainSatisfied","dataArray","innerBindingContext","nativeTemplateEngine","useNodesIfAvailable","templateNodesFunc","templateText","makeTemplateValueAccessor","unwrappedValue","foreach","isElseNode","detectElse","cloneIfElseNodes","hasElse","ifNodes","elseNodes","getPrecedingConditional","makeWithIfBinding","isWith","isNot","isElse","makeContextCallback","didDisplayOnLastUpdate","completesElseChain","ifElseNodes","precedingConditional","dataValue","shouldDisplayIf","needsRefresh","isFirstRender","withContextCallback","$if","ifnot","$else","$with","unless","MAX_LIST_SIZE","isPlainObject","o","supportsDocumentFragment","createDocumentFragment","makeTemplateNode","sourceNode","valueToChangeAddItem","PENDING_DELETE_INDEX_KEY","ForEach","generateContext","createContextGenerator","as","noIndex","updateIndexes","afterAdd","beforeRemove","templateNode","afterQueueFlush","beforeQueueFlush","changeQueue","firstLastNodesList","indexesToDelete","rendering_queued","pendingDeletes","isNotEmpty","primeData","onArrayChange","changeSubs","flushPendingDeletes","changeSet","changeMap","len","added","lastAdd","lastIndex","isBatch","deleted","processQueue","animateFrame","startQueueFlush","endQueueFlush","isEmpty","lowestIndexChanged","changeItem","extend$context","include$index","$index","$list","valuesToAdd","referenceElement","getLastNodeBeforeIndex","allChildNodes","pendingDelete","getPendingDeleteFor","nodesets","templateClone","first","insertAllAfter","getNodesForIndex","ptr","activeChildElement","nodeOrNodeArrayToInsert","frag","shouldDelayDeletion","getOrCreatePendingDeleteFor","pd","removeNodes","removeFn","beforeRemoveReturn","foreachInstance","then","clearDeletedIndexes","getContextStartingFrom","ctx","fromIndex","setSync","frame","requestAnimationFrame","webkitRequestAnimationFrame","mozRequestAnimationFrame","msRequestAnimationFrame","cb","vm","ffe","dataBind","parseInterpolationMarkup","textToParse","outerTextCallback","expressionCallback","innerParse","innerMatch","outerMatch","interpolationMarkupPreprocessor","addTextNode","wrapExpr","expressionText","interpolationMarkup","wrapExpression","nodeName","expressionText_","closeComment","firstChar","lastChar","attributeInterpolationMarkerPreprocessor","addText","addExpr","dataBindAttribute","attrs","specified","parts","attrBinding","attributeInterpolationMarkup","attributeBinding","sproto","uppercase","toUpperCase","lowercase","search","fit","replacement","trimWhere","leftLen","ceil","json","toLocaleString","loadingSubscribablesCache","loadedDefinitionsCache","loadComponentAndNotify","componentName","completedAsync","definition","config","isSynchronousComponent","synchronous","beginLoadingComponent","getFirstResultFromLoaders","argsExceptCallback","candidateLoaders","registry","loaders","currentCandidateLoader","methodInstance","wasAborted","synchronousReturnValue","suppressLoaderExceptions","cachedDefinition","componentLoadingOperationUniqueId","cloneTemplateIntoElement","componentDefinition","clonedNodesArray","createViewModel","originalChildNodes","componentParams","componentViewModelFactory","componentBinding","ignored1","ignored2","currentViewModel","currentLoadingOperationId","disposeAssociatedComponentViewModel","currentViewModelDispose","loadingOperationId","componentViewModel","childBindingContext","defaultConfigRegistry","register","isRegistered","unregister","clearCachedDefinition","defaultLoader","errorCallback","makeErrorCallback","loadedConfig","templateConfig","viewModelConfig","createViewModelKey","resolveConfig","makeCallBackWhenZero","tryIssueCallback","_getFirstResultFromLoaders","resolvedTemplate","resolvedViewModel","resolveTemplate","cloneNodesFromTemplateSourceElement","elemInstance","resolveViewModel","fixedInstance","possiblyGetConfigFromAmd","require","amdRequire","getComponentNameForNode","_tagNameLower","addBindingsForCustomElement","valueAccessors","bindingProvider","component","componentBindingValue","getComponentParamsFromCustomElement","accessors","rawParamComputedValues","paramValue","paramValueComputed","$raw","components","loader","elements","coreUtils","utils","coreUtil","domNodeDisposal","coreBindings","templateBindings","ifBindings","foreachBindings","each","textInterpolation","nodePreProcessor","punchesFilters"],"mappings":"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"}